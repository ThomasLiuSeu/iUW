jQuery.sap.registerPreloadedModules({"name":"sap/ui/core/library-preload","version":"2.0","modules":{"sap/ui/core/Core.js":function(){
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5/OpenUI5)
 * (c) Copyright 2009-2015 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(['jquery.sap.global','sap/ui/Device','sap/ui/Global','sap/ui/base/DataType','sap/ui/base/EventProvider','./Component','./Configuration','./Control','./Element','./ElementMetadata','./FocusHandler','./RenderManager','./ResizeHandler','./ThemeCheck','./UIArea','./tmpl/Template','./message/MessageManager','jquery.sap.act','jquery.sap.dom','jquery.sap.events','jquery.sap.mobile','jquery.sap.properties','jquery.sap.resources','jquery.sap.script'],function(q,D,G,a,E,C,c,d,e,g,F,R,h,T,U,k,M){"use strict";var L={};var n=E.extend("sap.ui.core.Core",{constructor:function(){if(sap.ui.getCore&&sap.ui.getCore()){return sap.ui.getCore();}var t=this,l=q.sap.log,f="sap.ui.core.Core";E.apply(this);this.bBooted=false;this.bInitialized=false;this.bDomReady=false;this.aPlugins=[];this.mLibraries={};this.mResourceBundles={};this.mUIAreas={};this.oModels={};this.oEventBus=null;this.mElements={};this.mObjects={"component":{},"template":{}};this.oRootComponent=null;this.aInitListeners=[];this.bInitLegacyLib=false;l.info("Creating Core",null,f);this.oConfiguration=new c(this);var o=this.oConfiguration["frameOptionsConfig"]||{};o.mode=this.oConfiguration["frameOptions"];o.whitelistService=this.oConfiguration["whitelistService"];this.oFrameOptions=new q.sap.FrameOptions(o);if(this.oConfiguration["bindingSyntax"]==="complex"){sap.ui.base.ManagedObject.bindingParser=sap.ui.base.BindingParser.complexParser;}if(this.oConfiguration["xx-designMode"]==true){sap.ui.base.BindingParser._keepBindingStrings=true;}g.prototype.register=function(Q){t.registerElementClass(Q);};e.prototype.register=function(){t.registerElement(this);};e.prototype.deregister=function(){t.deregisterElement(this);};C.prototype.register=function(){t.registerObject(this);};C.prototype.deregister=function(){t.deregisterObject(this);};k.prototype.register=function(){t.registerObject(this);};k.prototype.deregister=function(){t.deregisterObject(this);};var m=this.oConfiguration.modules;if(this.oConfiguration.getDebug()){m.unshift("sap.ui.debug.DebugEnv");}var i=q.inArray("sap.ui.core.library",m);if(i!=0){if(i>0){m.splice(i,1);}m.unshift("sap.ui.core.library");}if(this.oConfiguration["xx-lesssupport"]&&q.inArray("sap.ui.core.plugin.LessSupport",m)==-1){l.info("Including LessSupport into declared modules");m.push("sap.ui.core.plugin.LessSupport");}l.info("Declared modules: "+m,f);var j=window["sap-ui-config"];if(this.oConfiguration.themeRoot){j=j||{};j.themeroots=j.themeroots||{};j.themeroots[this.oConfiguration.getTheme()]=this.oConfiguration.themeRoot;}if(j){if(j.themeroots){for(var p in j.themeroots){var s=j.themeroots[p];if(typeof s==="string"){this.setThemeRoot(p,s);}else{for(var u in s){if(u.length>0){this.setThemeRoot(p,[u],s[u]);}else{this.setThemeRoot(p,s[u]);}}}}}}this.sTheme=this.oConfiguration.getTheme();q(document.documentElement).addClass("sapUiTheme-"+this.sTheme);l.info("Declared theme "+this.sTheme,null,f);if(this.oConfiguration.getRTL()){q(document.documentElement).attr("dir","rtl");l.info("RTL mode activated",null,f);}var $=q("html");var b=D.browser;var v=b.name;if(v===b.BROWSER.CHROME){q.browser.safari=false;q.browser.chrome=true;}else if(v===b.BROWSER.SAFARI){q.browser.safari=true;q.browser.chrome=false;if(b.mobile){v="m"+v;}}if(v){q.browser.fVersion=b.version;q.browser.mobile=b.mobile;v=v+Math.floor(b.version);$.attr("data-sap-ui-browser",v);l.debug("Browser-Id: "+v,null,f);}$.attr("data-sap-ui-os",D.os.name+D.os.versionStr);var w=null;switch(D.os.name){case D.os.OS.IOS:w="sap-ios";break;case D.os.OS.ANDROID:w="sap-android";break;case D.os.OS.BLACKBERRY:w="sap-bb";break;case D.os.OS.WINDOWS_PHONE:w="sap-winphone";break;}if(w){$.addClass(w);}var x=function(){var Q=this.oConfiguration.getLocale();if(Q){$.attr("lang",Q.toString());}else{$.removeAttr("lang");}};x.call(this);this.attachLocalizationChanged(x,this);if(this.oConfiguration.getWeinreId()){l.info("Starting WEINRE Remote Web Inspector");var W="<script src=\"";W+=this.oConfiguration.getWeinreServer();W+="/target/target-script-min.js#";W+=q.sap.encodeURL(this.oConfiguration.getWeinreId());W+="\"></script>";document.write(W);}sap.ui.getCore=q.sap.getter(this.getInterface());this.oRenderManager=new R();var y=q.sap.syncPoint("UI5 Document Ready",function(Q,V){t.handleLoad();});var z=y.startTask("document.ready");var A=y.startTask("preload and boot");q(function(){l.trace("document is ready");y.finishTask(z);});var B=q.sap.syncPoint("UI5 Core Preloads and Bootstrap Script",function(Q,V){l.trace("Core loaded: open="+Q+", failures="+V);t._boot();y.finishTask(A);});var H=this.oConfiguration["xx-bootTask"];if(H){var I=B.startTask("custom boot task");H(function(Q){B.finishTask(I,typeof Q==="undefined"||Q===true);});}var J=new q.sap.Version(this.oConfiguration.getCompatibilityVersion("flexBoxPolyfill"));if(J.compareTo("1.16")>=0){q.support.useFlexBoxPolyfill=false;}else if(!q.support.flexBoxLayout&&!q.support.newFlexBoxLayout&&!q.support.ie10FlexBoxLayout){q.support.useFlexBoxPolyfill=true;}else{q.support.useFlexBoxPolyfill=false;}var K=B.startTask("bootstrap script");this.boot=function(){if(this.bBooted){return;}this.bBooted=true;B.finishTask(K);};var P=this.oConfiguration.preload;if(window["sap-ui-debug"]){P="";}if(P==="auto"){P=(window["sap-ui-optimized"]&&!this.oConfiguration['xx-loadAllMode'])?"sync":"";}this.oConfiguration.preload=P;if(P==="sync"||P==="async"){var N=P!=="sync";q.each(m,function(i,Q){if(Q.match(/\.library$/)){q.sap.preloadModules(Q+"-preload",N,B);}});}var O=this.oConfiguration.getAppCacheBuster();if(O&&O.length>0){q.sap.require("sap.ui.core.AppCacheBuster");sap.ui.core.AppCacheBuster.boot(B);}},metadata:{publicMethods:["boot","isInitialized","isThemeApplied","attachInitEvent","attachInit","getRenderManager","createRenderManager","getConfiguration","setRoot","createUIArea","getUIArea","getUIDirty","getElementById","getCurrentFocusedControlId","getControl","getComponent","getTemplate","lock","unlock","isLocked","attachEvent","detachEvent","applyChanges","getEventBus","applyTheme","setThemeRoot","attachThemeChanged","detachThemeChanged","getStaticAreaRef","registerPlugin","unregisterPlugin","getLibraryResourceBundle","byId","getLoadedLibraries","loadLibrary","loadLibraries","initLibrary","includeLibraryTheme","setModel","getModel","hasModel","isMobile","attachControlEvent","detachControlEvent","attachIntervalTimer","detachIntervalTimer","attachParseError","detachParseError","fireParseError","attachValidationError","detachValidationError","fireValidationError","attachFormatError","detachFormatError","fireFormatError","attachValidationSuccess","detachValidationSuccess","fireValidationSuccess","attachLocalizationChanged","detachLocalizationChanged","attachLibraryChanged","detachLibraryChanged","isStaticAreaRef","createComponent","getRootComponent","getApplication","setMessageManager","getMessageManager"]}});n.M_EVENTS={ControlEvent:"ControlEvent",UIUpdated:"UIUpdated",ThemeChanged:"ThemeChanged",LocalizationChanged:"localizationChanged",LibraryChanged:"libraryChanged",ValidationError:"validationError",ParseError:"parseError",FormatError:"formatError",ValidationSuccess:"validationSuccess"};var S="sap-ui-static";n.prototype._boot=function(){this.lock();var b=this.oConfiguration['preloadLibCss'];if(b.length>0){var A=b[0].slice(0,1)==="!";if(A){b[0]=b[0].slice(1);}if(b[0]==="*"){b.splice(0,1);var p=0;q.each(this.oConfiguration.modules,function(i,f){var m=f.match(/^(.*)\.library$/);if(m){b.splice(p,0,m[1]);}});}if(!A){this.includeLibraryTheme("sap-ui-merged",undefined,"?l="+b.join(","));}}var t=this;q.each(this.oConfiguration.modules,function(i,f){var m=f.match(/^(.*)\.library$/);if(m){t.loadLibrary(m[1]);}else{q.sap.require(f);}});this.unlock();};n.prototype.applyTheme=function(t,s){t=this.oConfiguration._normalizeTheme(t,s);if(s){this.setThemeRoot(t,s);}if(t&&this.sTheme!=t){var b=this.sTheme;this._updateThemeUrls(t);this.sTheme=t;this.oConfiguration._setTheme(t);q(document.documentElement).removeClass("sapUiTheme-"+b).addClass("sapUiTheme-"+t);if(this.oThemeCheck){this.oThemeCheck.fireThemeChangedEvent(false,true);}}};n.prototype._updateThemeUrls=function(t){var b=this,s=this.oConfiguration.getRTL()?"-RTL":"";q("link[id^=sap-ui-theme-]").each(function(){var l=this.id.slice(13),f=this.href.slice(this.href.lastIndexOf("/")+1),i="library",H,p,$=q(this);if((p=l.indexOf("-["))>0){i+=l.slice(p+2,-1);l=l.slice(0,p);}if(f===(i+".css")||f===(i+"-RTL.css")){f=i+s+".css";}if($.attr("sap-ui-css-count")){$.remove();}H=b._getThemePath(l,t)+f;if(H!=this.href){this.href=H;$.removeAttr("sap-ui-ready");}});};n.prototype._getThemePath=function(l,t){if(this._mThemeRoots){var p=this._mThemeRoots[t+" "+l]||this._mThemeRoots[t];if(p){p=p+l.replace(/\./g,"/")+"/themes/"+t+"/";q.sap.registerModulePath(l+".themes."+t,p);return p;}}return q.sap.getModulePath(l+".themes."+t,"/");};n.prototype.setThemeRoot=function(t,l,s){if(!this._mThemeRoots){this._mThemeRoots={};}if(s===undefined){s=l;l=undefined;}s=s+(s.slice(-1)=="/"?"":"/");if(l){for(var i=0;i<l.length;i++){var b=l[i];this._mThemeRoots[t+" "+b]=s;}}else{this._mThemeRoots[t]=s;}return this;};n.prototype.init=function(){if(this.bInitialized){return;}var b=q.sap.log,j="sap.ui.core.Core.init()";this.boot();b.info("Initializing",null,j);this.oFocusHandler=new F(document.body,this);this.oRenderManager._setFocusHandler(this.oFocusHandler);this.oResizeHandler=new h(this);this.oThemeCheck=new T(this);b.info("Initialized",null,j);this.bInitialized=true;b.info("Starting Plugins",null,j);this.startPlugins();b.info("Plugins started",null,j);var o=this.oConfiguration;if(o.areas){for(var i=0,l=o.areas.length;i<l;i++){this.createUIArea(o.areas[i]);}o.areas=undefined;}if(o.onInit){if(typeof o.onInit==="function"){o.onInit();}else{q.sap.globalEval(o.onInit);}o.onInit=undefined;}this.oThemeCheck.fireThemeChangedEvent(true);var s=o.getRootComponent();if(s){b.info("Loading Root Component: "+s,null,j);var m=sap.ui.component({name:s});this.oRootComponent=m;var p=o["xx-rootComponentNode"];if(p&&m instanceof sap.ui.core.UIComponent){var t=q.sap.domById(p);if(t){b.info("Creating ComponentContainer for Root Component: "+s,null,j);var u=new sap.ui.core.ComponentContainer({component:m,propagateModel:true});u.placeAt(t);}}}else{var A=o.getApplication();if(A){b.warning("The configuration 'application' is deprecated. Please use the configuration 'component' instead! Please migrate from sap.ui.app.Application to sap.ui.core.Component.");b.info("Loading Application: "+A,null,j);q.sap.require(A);var v=q.sap.getObject(A);var w=new v();}}var $=q("body");if(o.getAccessibility()&&o.getAutoAriaBodyRole()&&!$.attr("role")){$.attr("role","application");}var x=this.aInitListeners;this.aInitListeners=undefined;if(x&&x.length>0){b.info("Fire Loaded Event",null,j);q.each(x,function(i,f){f();});}this.renderPendingUIUpdates();};n.prototype.handleLoad=function(){this.bDomReady=true;var w=this.isLocked();if(!w){this.lock();}this.init();if(!w){this.unlock();}};n.prototype.isInitialized=function(){return this.bInitialized;};n.prototype.isThemeApplied=function(){return T.themeLoaded;};n.prototype.attachInitEvent=function(f){if(this.aInitListeners){this.aInitListeners.push(f);}};n.prototype.attachInit=function(f){if(this.aInitListeners){this.aInitListeners.push(f);}else{f();}};n.prototype.lock=function(){this.bLocked=true;};n.prototype.unlock=function(){this.bLocked=false;};n.prototype.isLocked=function(){return this.bLocked;};n.prototype.getConfiguration=function(){return this.oConfiguration;};n.prototype.getRenderManager=function(){return this.createRenderManager();};n.prototype.createRenderManager=function(){var o=new R();o._setFocusHandler(this.oFocusHandler);return o.getInterface();};n.prototype.getCurrentFocusedControlId=function(){if(!this.isInitialized()){throw new Error("Core must be initialized");}return this.oFocusHandler.getCurrentFocusedControlId();};n.prototype.loadLibrary=function(l,u){if(!L[l]){var m=l+".library",A;if(u){q.sap.registerModulePath(l,u);}if(this.oConfiguration['xx-loadAllMode']&&!q.sap.isDeclared(m)){A=m+"-all";q.sap.log.debug("load all-in-one file "+A);q.sap.require(A);}else if(this.oConfiguration.preload==='sync'||this.oConfiguration.preload==='async'){q.sap.preloadModules(m+"-preload",false);}q.sap.require(m);if(!L[l]){q.sap.log.warning("library "+l+" didn't initialize itself");this.initLibrary(l);}if(this.oThemeCheck&&this.isInitialized()){this.oThemeCheck.fireThemeChangedEvent(true);}}return this.mLibraries[l];};n.prototype.loadLibraries=function(l,o){o=q.extend({async:true},o);var t=this,p=this.oConfiguration.preload==='sync'||this.oConfiguration.preload==='async',A=o.async;function b(s){if(p){q.each(l,function(i,j){q.sap.preloadModules(j+".library-preload",!!s,s);});}}function f(){q.each(l,function(i,s){q.sap.require(s+".library");});if(t.oThemeCheck&&t.isInitialized()){t.oThemeCheck.fireThemeChangedEvent(true);}}if(A&&p){return new Promise(function(i,j){var s=q.sap.syncPoint("Load Libraries",function(O,u){if(!u){f();i();}else{j();}});var m=s.startTask("load libraries");b(s);s.finishTask(m);});}else{b(null);f();}};n.prototype.createComponent=function(v,u,i,s){if(typeof v==="string"){v={name:v,url:u};if(typeof i==="object"){v.settings=i;}else{v.id=i;v.settings=s;}}return sap.ui.component(v);};n.prototype.getRootComponent=function(){return this.oRootComponent;};n.prototype.initLibrary=function(l){var b=typeof l==="string",o=b?{name:l}:l,s=o.name,f=q.sap.log,m="sap.ui.core.Core.initLibrary()";if(b){f.warning("[Deprecated] library "+s+" uses old fashioned initLibrary() call (rebuild with newest generator)");}if(!s||L[s]){return;}f.debug("Analyzing Library "+s,null,m);L[s]=true;function p(j,I){var K,V;for(K in I){V=I[K];if(V!==undefined){if(q.isArray(j[K])){if(j[K].length===0){j[K]=V;}else{j[K]=q.sap.unique(j[K].concat(V));}}else if(j[K]===undefined){j[K]=V;}else{q.sap.log.warning("library info setting ignored: "+K+"="+V);}}}return j;}this.mLibraries[s]=o=p(this.mLibraries[s]||{name:s,dependencies:[],types:[],interfaces:[],controls:[],elements:[]},o);function t(){var P=q.sap.properties({url:sap.ui.resource(s,"library.properties")});o.version=P.getProperty(s+"[version]");var w=P.getProperty(s+"[dependencies]");f.debug("Required Libraries: "+w,null,m);o.dependencies=(w&&w.split(/[,;| ]/))||[];var K=P.getKeys(),x=/(.+)\.(type|interface|control|element)$/,y;for(var j=0;j<K.length;j++){var z=P.getProperty(K[j]);if((y=z.match(x))!==null){o[y[2]+"s"].push(K[j]);}}}if(b){t();}for(var i=0;i<o.dependencies.length;i++){var u=o.dependencies[i];f.debug("resolve Dependencies to "+u,null,m);if(!L[u]){f.warning("Dependency from "+s+" to "+u+" has not been resolved by library itself",null,m);this.loadLibrary(u);}}a.registerInterfaceTypes(o.interfaces);for(var i=0;i<o.types.length;i++){if(!/^(any|boolean|float|int|string|object|void)$/.test(o.types[i])){q.sap.declare(o.types[i]);}}var v=o.controls.concat(o.elements);for(var i=0;i<v.length;i++){sap.ui.lazyRequire(v[i],"new extend getMetadata");}if(!o.noLibraryCSS&&q.inArray(s,this.oConfiguration['preloadLibCss'])<0){this.includeLibraryTheme(s);}o.sName=o.name;o.aControls=o.controls;if(!q.sap.isDeclared(s+".library")){f.warning("Library Module "+s+".library"+" not loaded automatically",null,m);q.sap.require(s+".library");}this.fireLibraryChanged({name:s,stereotype:"library",operation:"add",metadata:o});};n.prototype.includeLibraryTheme=function(l,v,Q){if((l!="sap.ui.legacy")&&(l!="sap.ui.classic")){if(!v){v="";}var s=(this.oConfiguration.getRTL()?"-RTL":"");var b,f=l+(v.length>0?"-["+v+"]":v);if(l&&l.indexOf(":")==-1){b="library"+v+s;}else{b=l.substring(l.indexOf(":")+1)+v;l=l.substring(0,l.indexOf(":"));}var i=this._getThemePath(l,this.sTheme)+b+".css"+(Q?Q:"");q.sap.log.info("Including "+i+" -  sap.ui.core.Core.includeLibraryTheme()");q.sap.includeStyleSheet(i,"sap-ui-theme-"+f);if(sap.ui.core.theming&&sap.ui.core.theming.Parameters){sap.ui.core.theming.Parameters._addLibraryTheme(f,i);}}};n.prototype.getLoadedLibraries=function(){return q.extend({},this.mLibraries);};n.prototype.getLibraryResourceBundle=function(l,s){l=l||"sap.ui.core";s=s||this.getConfiguration().getLanguage();var K=l+"/"+s;if(!this.mResourceBundles[K]){var u=sap.ui.resource(l,'messagebundle.properties');this.mResourceBundles[K]=q.sap.resources({url:u,locale:s});}return this.mResourceBundles[K];};n.prototype.setRoot=function(o,b){if(b){b.placeAt(o,"only");}};n.prototype.createUIArea=function(o){var t=this;if(!o){throw new Error("oDomRef must not be null");}if(typeof(o)==="string"){var i=o;if(i==S){o=this.getStaticAreaRef();}else{o=q.sap.domById(o);if(!o){throw new Error("DOM element with ID '"+i+"' not found in page, but application tries to insert content.");}}}if(!o.id||o.id.length==0){o.id=q.sap.uid();}var I=o.id;if(!this.mUIAreas[I]){this.mUIAreas[I]=new U(this,o);q.each(this.oModels,function(N,m){t.mUIAreas[I].oPropagatedProperties.oModels[N]=m;});this.mUIAreas[I].propagateProperties(true);}else{this.mUIAreas[I].setRootNode(o);}return this.mUIAreas[I];};n.prototype.getUIArea=function(o){var i="";if(typeof(o)=="string"){i=o;}else{i=o.id;}if(i){return this.mUIAreas[i];}return null;};var r=U._oRenderLog;n.prototype.addInvalidatedUIArea=function(u){if(!this._sRerenderTimer){r.debug("Registering timer for delayed re-rendering");this._sRerenderTimer=q.sap.delayedCall(0,this,"renderPendingUIUpdates");}};n.MAX_RENDERING_ITERATIONS=20;n.prototype.renderPendingUIUpdates=function(){r.debug("Render pending UI updates: start");q.sap.measure.start("renderPendingUIUpdates","Render pending UI updates in all UIAreas");var u=false,l=n.MAX_RENDERING_ITERATIONS>0,i=0;this._bRendering=true;do{if(l){i++;if(i>n.MAX_RENDERING_ITERATIONS){this._bRendering=false;throw new Error("Rendering has been re-started too many times ("+i+"). Add URL parameter sap-ui-xx-debugRendering=true for a detailed analysis.");}if(i>1){r.debug("Render pending UI updates: iteration "+i);}}if(this._sRerenderTimer){q.sap.clearDelayedCall(this._sRerenderTimer);this._sRerenderTimer=undefined;}var m=this.mUIAreas;for(var I in m){u=m[I].rerender()||u;}}while(l&&this._sRerenderTimer);this._bRendering=false;if(u){this.fireUIUpdated();}r.debug("Render pending UI updates: finished");q.sap.measure.end("renderPendingUIUpdates");};n.prototype.getUIDirty=function(){return!!(this._sRerenderTimer||this._bRendering);};n.prototype.attachUIUpdated=function(f,l){this.attachEvent(n.M_EVENTS.UIUpdated,f,l);};n.prototype.detachUIUpdated=function(f,l){this.detachEvent(n.M_EVENTS.UIUpdated,f,l);};n.prototype.fireUIUpdated=function(p){this.fireEvent(n.M_EVENTS.UIUpdated,p);};n.prototype.attachThemeChanged=function(f,l){this.attachEvent(n.M_EVENTS.ThemeChanged,f,l);};n.prototype.detachThemeChanged=function(f,l){this.detachEvent(n.M_EVENTS.ThemeChanged,f,l);};n.prototype.fireThemeChanged=function(p){q.sap.scrollbarSize(true);if(sap.ui.core.theming&&sap.ui.core.theming.Parameters){sap.ui.core.theming.Parameters.reset(true);}var s=n.M_EVENTS.ThemeChanged;var o=q.Event(s);o.theme=p?p.theme:null;q.each(this.mElements,function(i,b){b._handleEvent(o);});q.sap.act.refresh();this.fireEvent(s,p);};n.prototype.attachLocalizationChanged=function(f,l){this.attachEvent(n.M_EVENTS.LocalizationChanged,f,l);};n.prototype.detachLocalizationChanged=function(f,l){this.detachEvent(n.M_EVENTS.LocalizationChanged,f,l);};n.prototype.fireLocalizationChanged=function(m){var s=n.M_EVENTS.LocalizationChanged,b=q.Event(s,{changes:m}),A=sap.ui.base.ManagedObject._handleLocalizationChange,f=[];q.each(m,function(j,v){f.push(j);});q.sap.log.info("localization settings changed: "+f.join(","),null,"sap.ui.core.Core");q.each(this.oModels,function(N,o){if(o&&o._handleLocalizationChange){o._handleLocalizationChange();}});function i(p){q.each(this.mUIAreas,function(){A.call(this,p);});q.each(this.mObjects["component"],function(){A.call(this,p);});q.each(this.mElements,function(){A.call(this,p);});}i.call(this,1);i.call(this,2);if(m.rtl!=undefined){q(document.documentElement).attr("dir",m.rtl?"rtl":"ltr");this._updateThemeUrls(this.sTheme);q.each(this.mUIAreas,function(){this.invalidate();});q.sap.log.info("RTL mode "+m.rtl?"activated":"deactivated");}q.each(this.mElements,function(I,o){this._handleEvent(b);});this.fireEvent(s,{changes:m});};n.prototype.attachLibraryChanged=function(f,l){this.attachEvent(n.M_EVENTS.LibraryChanged,f,l);};n.prototype.detachLibraryChanged=function(f,l){this.detachEvent(n.M_EVENTS.LibraryChanged,f,l);};n.prototype.fireLibraryChanged=function(p){this.fireEvent(n.M_EVENTS.LibraryChanged,p);};n.prototype.applyChanges=function(){this.renderPendingUIUpdates();};n.prototype.registerElementClass=function(m){var N=m.getName(),l=m.getLibraryName()||"",o=this.mLibraries[l],s=d.prototype.isPrototypeOf(m.getClass().prototype)?'controls':'elements';if(!o){o=this.mLibraries[l]={name:l,dependencies:[],types:[],interfaces:[],controls:[],elements:[]};}if(q.inArray(N,o[s])<0){o[s].push(N);q.sap.log.debug("Class "+m.getName()+" registered for library "+m.getLibraryName());this.fireLibraryChanged({name:m.getName(),stereotype:m.getStereotype(),operation:"add",metadata:m});}};n.prototype.registerElement=function(o){var b=this.byId(o.getId());if(b&&b!==o){if(this.oConfiguration.getNoDuplicateIds()){q.sap.log.error("adding element with duplicate id '"+o.getId()+"'");throw new Error("Error: adding element with duplicate id '"+o.getId()+"'");}else{q.sap.log.warning("adding element with duplicate id '"+o.getId()+"'");}}this.mElements[o.getId()]=o;};n.prototype.deregisterElement=function(o){delete this.mElements[o.getId()];};n.prototype.registerObject=function(o){var i=o.getId(),t=o.getMetadata().getStereotype(),b=this.getObject(t,i);if(b&&b!==o){q.sap.log.error("adding object \""+t+"\" with duplicate id '"+i+"'");throw new Error("Error: adding object \""+t+"\" with duplicate id '"+i+"'");}this.mObjects[t][i]=o;};n.prototype.deregisterObject=function(o){var i=o.getId(),t=o.getMetadata().getStereotype();delete this.mObjects[t][i];};n.prototype.byId=function(i){return i==null?undefined:this.mElements[i];};n.prototype.getControl=n.prototype.byId;n.prototype.getElementById=n.prototype.byId;n.prototype.getObject=function(t,i){return i==null?undefined:this.mObjects[t]&&this.mObjects[t][i];};n.prototype.getComponent=function(i){return this.getObject("component",i);};n.prototype.getTemplate=function(i){return this.getObject("template",i);};n.prototype.getStaticAreaRef=function(){var s=q.sap.domById(S);if(!s){if(!this.bDomReady){throw new Error("DOM is not ready yet. Static UIArea cannot be created.");}var A={id:S};if(q("body").attr("role")!="application"){A.role="application";}var l=this.getConfiguration().getRTL()?"right":"left";s=q("<DIV/>",A).css({"height":"0","width":"0","overflow":"hidden","float":l}).prependTo(document.body)[0];this.createUIArea(s).bInitial=false;}return s;};n.prototype.isStaticAreaRef=function(o){return o&&(o.id===S);};n._I_INTERVAL=200;h.prototype.I_INTERVAL=n._I_INTERVAL;n.prototype.attachIntervalTimer=function(f,l){if(!this.oTimedTrigger){q.sap.require("sap.ui.core.IntervalTrigger");this.oTimedTrigger=new sap.ui.core.IntervalTrigger(n._I_INTERVAL);}this.oTimedTrigger.addListener(f,l);};n.prototype.detachIntervalTimer=function(f,l){if(this.oTimedTrigger){this.oTimedTrigger.removeListener(f,l);}};n.prototype.attachControlEvent=function(f,l){this.attachEvent(n.M_EVENTS.ControlEvent,f,l);};n.prototype.detachControlEvent=function(f,l){this.detachEvent(n.M_EVENTS.ControlEvent,f,l);};n.prototype.fireControlEvent=function(p){this.fireEvent(n.M_EVENTS.ControlEvent,p);};n.prototype._handleControlEvent=function(o,u){var b=q.Event(o.type);q.extend(b,o);b.originalEvent=undefined;this.fireControlEvent({"browserEvent":b,"uiArea":u});};n.prototype.getApplication=function(){return sap.ui.getApplication&&sap.ui.getApplication();};n.prototype.registerPlugin=function(p){if(!p){return;}for(var i=0,l=this.aPlugins.length;i<l;i++){if(this.aPlugins[i]===p){return;}}this.aPlugins.push(p);if(this.bInitialized&&p&&p.startPlugin){p.startPlugin(this);}};n.prototype.unregisterPlugin=function(p){if(!p){return;}var P=-1;for(var i=this.aPlugins.length;i--;i>=0){if(this.aPlugins[i]===p){P=i;break;}}if(P==-1){return;}if(this.bInitialized&&p&&p.stopPlugin){p.stopPlugin(this);}this.aPlugins.splice(P,1);};n.prototype.startPlugins=function(){for(var i=0,l=this.aPlugins.length;i<l;i++){var p=this.aPlugins[i];if(p&&p.startPlugin){p.startPlugin(this,true);}}};n.prototype.stopPlugins=function(){for(var i=0,l=this.aPlugins.length;i<l;i++){var p=this.aPlugins[i];if(p&&p.stopPlugin){p.stopPlugin(this);}}};n.prototype.setModel=function(m,N){if(!m&&this.oModels[N]){delete this.oModels[N];q.each(this.mUIAreas,function(i,u){delete u.oPropagatedProperties.oModels[N];u.propagateProperties(N);});}else if(m&&m!==this.oModels[N]){this.oModels[N]=m;q.each(this.mUIAreas,function(i,u){u.oPropagatedProperties.oModels[N]=m;u.propagateProperties(N);});}return this;};n.prototype.setMessageManager=function(m){this.oMessageManager=m;};n.prototype.getMessageManager=function(){if(!this.oMessageManager){this.oMessageManager=new M();}return this.oMessageManager;};n.prototype.getModel=function(N){return this.oModels[N];};n.prototype.hasModel=function(){return!q.isEmptyObject(this.oModels);};n.prototype.getEventBus=function(){if(!this.oEventBus){q.sap.require("sap.ui.core.EventBus");this.oEventBus=new sap.ui.core.EventBus();}return this.oEventBus;};n.prototype.attachValidationError=function(o,f,l){if(typeof(o)==="function"){l=f;f=o;o=undefined;}this.attachEvent(n.M_EVENTS.ValidationError,o,f,l);return this;};n.prototype.detachValidationError=function(f,l){this.detachEvent(n.M_EVENTS.ValidationError,f,l);return this;};n.prototype.attachParseError=function(o,f,l){if(typeof(o)==="function"){l=f;f=o;o=undefined;}this.attachEvent(n.M_EVENTS.ParseError,o,f,l);return this;};n.prototype.detachParseError=function(f,l){this.detachEvent(n.M_EVENTS.ParseError,f,l);return this;};n.prototype.attachFormatError=function(o,f,l){if(typeof(o)==="function"){l=f;f=o;o=undefined;}this.attachEvent(n.M_EVENTS.FormatError,o,f,l);return this;};n.prototype.detachFormatError=function(f,l){this.detachEvent(n.M_EVENTS.FormatError,f,l);return this;};n.prototype.attachValidationSuccess=function(o,f,l){if(typeof(o)==="function"){l=f;f=o;o=undefined;}this.attachEvent(n.M_EVENTS.ValidationSuccess,o,f,l);return this;};n.prototype.detachValidationSuccess=function(f,l){this.detachEvent(n.M_EVENTS.ValidationSuccess,f,l);return this;};n.prototype.fireParseError=function(A){this.fireEvent(n.M_EVENTS.ParseError,A);return this;};n.prototype.fireValidationError=function(A){this.fireEvent(n.M_EVENTS.ValidationError,A);return this;};n.prototype.fireFormatError=function(A){this.fireEvent(n.M_EVENTS.FormatError,A);return this;};n.prototype.fireValidationSuccess=function(A){this.fireEvent(n.M_EVENTS.ValidationSuccess,A);return this;};n.prototype.isMobile=function(){return D.browser.mobile;};sap.ui.setRoot=function(o,b){sap.ui.getCore().setRoot(o,b);};return new n().getInterface();},false);},"sap/ushell/Layout.js":function(){
/* the subsequent text seems not to contain a copyright or license statement */
(function(){"use strict";jQuery.sap.declare("sap.ushell.Layout");var C=function(s){this.init(s);};C.prototype={settings:null,tileWidth:0,tileHeight:0,tileMargin:0,curTouchMatrixCords:null,tilesInRow:null,groupsList:null,item:null,matrix:null,tiles:null,collisionLeft:false,startGroup:null,currentGroup:null,endGroup:null,init:function(s){this.curTouchMatrixCords={column:null,row:null};this.endGroup=null;this.item=null;this.matrix=null;this.tiles=null;this.collisionLeft=false;this.startGroup=null;this.currentGroup=null;this.groupsList=null;this.settings=this.settings||s;jQuery.extend(this,this.settings);this.tileWidth=this.thisLayout.styleInfo.tileWidth;this.tileHeight=this.thisLayout.styleInfo.tileHeight;this.tileMargin=this.thisLayout.styleInfo.tileMarginWidth;},moveDraggable:function(m,a){var i=this.detectCollision(m,a);if(i){this.changePlaceholder();}},layoutStartCallback:function(e){this.init();this.item=sap.ui.getCore().byId(e.id);this.tilesInRow=this.thisLayout.getTilesInRow();this.groupsList=this.thisLayout.getGroups();this.startGroup=this.currentGroup=this.item.getParent();},layoutEndCallback:function(){if(!this.tiles){return{tile:this.item};}var r={srcGroup:this.startGroup,dstGroup:this.endGroup,tile:this.item,dstTileIndex:this.tiles.indexOf(this.item),tileMovedFlag:true};return r;},compareArrays:function(a,b){if(a.length!==b.length){return false;}for(var i=0;i<a.length;i++){if(a[i]!==b[i]){return false;}}return true;},reorderTilesView:function(t,g){this.tiles=t;this.matrix=this.thisLayout.organizeGroup(t);this.thisLayout.applyTilesPositions(g,this.matrix);},changeTilesOrder:function(i,r,t,m){var n=t.slice(0);var d=n.indexOf(i);if(d>-1){n.splice(d,1);}if(r){n.splice(n.indexOf(r),0,this.item);}else{n.push(i);}if(this.currentGroup==this.endGroup){if(this.compareArrays(t,n)){return false;}var a=this.thisLayout.organizeGroup(n);var c=this.thisLayout.getTilePositionInMatrix(i,m);var b=this.thisLayout.getTilePositionInMatrix(i,a);if((c.row==b.row)&&(c.col==b.col)){return false;}}this.tiles=n;this.currentGroup=this.endGroup;return n;},removePlusTile:function(m){var n=[];var c=m[0].length;for(var r=0;r<m.length;r++){n.push([]);for(var a=0;a<c;a++){var i=m[r][a]&&m[r][a]instanceof sap.ushell.ui.launchpad.PlusTile;n[r].push(i?undefined:m[r][a]);}}return n;},changePlaceholder:function(){var t=(this.endGroup!==this.currentGroup);if(t){var c=this.thisLayout.getGroupTiles(this.currentGroup);if(this.currentGroup===this.startGroup){c=c.slice(0);c.splice(c.indexOf(this.item),1);}var a=this.thisLayout.organizeGroup(c);this.thisLayout.applyTilesPositions(this.currentGroup,a);this.tiles=this.thisLayout.getGroupTiles(this.endGroup).slice(0);if(this.startGroup===this.endGroup){this.tiles.splice(this.tiles.indexOf(this.item),1);}this.matrix=this.thisLayout.organizeGroup(this.tiles);this.endGroup.getInnerContainerDomRef().appendChild(this.item.getDomRef());this.currentGroup=this.endGroup;}var b=this.removePlusTile(this.matrix);var d=this.tiles||this.thisLayout.getGroupTiles(this.endGroup).slice(0);var n;if(b[this.curTouchMatrixCords.row]&&typeof b[this.curTouchMatrixCords.row][this.curTouchMatrixCords.column]=="object"){var r=b[this.curTouchMatrixCords.row][this.curTouchMatrixCords.column];var e=d.indexOf(r);if(this.rightToLeft){this.collisionLeft=!this.collisionLeft;}if(this.collisionLeft){r=d[e+1];}if(r===this.item){if(t){this.reorderTilesView(d,this.endGroup);}return;}n=this.changeTilesOrder(this.item,r,d,b);if(n){this.reorderTilesView(n,this.endGroup);}return;}var m=this.findTileToPlaceAfter(b,d);if(d[m+1]==this.item){return;}n=this.changeTilesOrder(this.item,d[m+1],d,b);if(n){this.reorderTilesView(n,this.endGroup);}},findTileToPlaceAfter:function(c,t){var x=(this.thisLayout.rightToLeft)?0:this.curTouchMatrixCords.column,I=(this.thisLayout.rightToLeft)?1:-1,m=0,r=c[0].length;for(var i=this.curTouchMatrixCords.row;i>=0;i--){for(var j=x;j>=0&&j<r;j+=I){if(!c[i]||typeof c[i][j]!="object"){continue;}var a=t.indexOf(c[i][j]);m=a>m?a:m;}x=c[0].length-1;}return m;},detectCollision:function(m,a){var r,b,c,d=false;for(var i=0;i<this.groupsList.length;i++){var e=this.groupsList[i].getInnerContainerDomRef();r=e.getBoundingClientRect();b=!(r.right<m||r.left>m);c=!(r.bottom<a||r.top>a);if(b&&c){d=this.groupsList[i];break;}}var f=jQuery.extend({},this.curTouchMatrixCords);if(!d||d.getIsGroupLocked()){return false;}if(d){this.matrix=this.matrix||this.thisLayout.organizeGroup(this.thisLayout.getGroupTiles(d));var g=(r.top*(-1)+a)/(this.tileHeight+this.tileMargin);var h=(r.left*(-1)+m)/(this.tileWidth+this.tileMargin);f={row:Math.floor(g),column:Math.floor(h)};}if((d===this.endGroup)&&(f.column===this.curTouchMatrixCords.column)&&(f.row===this.curTouchMatrixCords.row)){return false;}this.collisionLeft=(f.column-this.curTouchMatrixCords.column)>0;if(f.column===this.curTouchMatrixCords.column){this.collisionLeft=false;}jQuery.extend(this.curTouchMatrixCords,f);this.endGroup=d;return true;}};var L=function(){};L.prototype={init:function(c){var t=function(){var s=this.getStyleInfo(this.container);if(s.tileWidth>0){this.isInited=true;this.reRenderGroupsLayout();this.layoutEngine=new C({thisLayout:this});return;}setTimeout(t,100);}.bind(this);this.cfg=c||this.cfg;this.minTilesinRow=2;this.maxTilesInRow=8;this.rightToLeft=sap.ui.getCore().getConfiguration().getRTL();this.container=this.cfg.container||document.getElementById('dashboardGroups');t();},getLayoutEngine:function(){return this.layoutEngine;},getStyleInfo:function(c){var t=document.createElement('div'),a=c.getAttribute('id');c=a?document.getElementById(a):c;t.className="sapUshellTile";t.setAttribute('style','position: absolute; visibility: hidden;');c.appendChild(t);var b=window.getComputedStyle(t);var i={"tileMarginHeight":parseInt(b.marginBottom,10)+parseInt(b.marginTop,10),"tileMarginWidth":parseInt(b.marginLeft,10)+parseInt(b.marginRight,10),"tileWidth":t.offsetWidth,"tileHeight":t.offsetHeight,"containerWidth":c.offsetWidth};t.parentNode.removeChild(t);return i;},getGroups:function(){return this.cfg.getGroups();},getTilesInRow:function(){return this.tilesInRow;},setTilesInRow:function(t){this.tilesInRow=t;},checkPlaceForTile:function(t,m,a,l){if(typeof m[a.y]==="undefined"){m.push(new Array(m[0].length));}if(typeof m[a.y+1]==="undefined"){m.push(new Array(m[0].length));}if(typeof m[a.y][a.x]!=="undefined"){return false;}var p=jQuery.extend({},a);if(!t.getLong()&&!t.getTall()){return[p];}var c=[p];if(t.getTall()){if((p.y+1)>l||typeof m[p.y+1][p.x]!=="undefined"){return false;}c.push({y:p.y+1,x:p.x});}if(t.getLong()){if((a.x+1)>=m[0].length||(typeof m[p.y][p.x+1]!=="undefined")){return false;}c.push({y:p.y,x:p.x+1});}if(t.getTall()&&t.getLong()){if(typeof m[p.y+1][p.x+1]!=="undefined"){return false;}c.push({y:p.y+1,x:p.x+1});}return c;},placeTile:function(t,m,c){for(var i=0;i<c.length;i++){m[c[i].y][c[i].x]=t;}},getTilePositionInMatrix:function(t,m){for(var r=0;r<m.length;r++){for(var c=0;c<m[0].length;c++){if(m[r][c]==t){return{row:r,col:c};}}}return false;},fillRowsInLine:function(m,t,s,e){if(!t.length){return 0;}var p=[],c,i;var a=e||s;for(i=s;i<=a&&t.length;i++){for(var j=0;j<m[0].length&&t.length;j++){c=this.checkPlaceForTile(t[0],m,{x:j,y:i},e);if(c){this.placeTile(t[0],m,c);p.push(t.shift());}}}var b=1,h;for(i=0;i<p.length;i++){h=p[i].getTall()?2:1;b=h>b?h:b;}return b;},organizeGroup:function(t){var a=t.slice(0);var b=[];var c=0;b.push(new Array(this.tilesInRow));while(a.length){var l=this.fillRowsInLine(b,a,c);c++;if(l<=1){continue;}this.fillRowsInLine(b,a,c,c+l-2);c+=(l-1)||1;}if(this.rightToLeft){for(var i=0;i<b.length;i++){b[i].reverse();}}b=this.cleanRows(b);return b;},cleanRows:function(t){var d=false;for(var r=t.length-1;r>0&&!d;r--){for(var c=0;c<t[r].length&&!d;c++){if(typeof t[r][c]==="object"){d=true;}}if(!d){t.pop();}}return t;},applyTilesPositions:function(g,m){var p=[];var s=0;var i;for(i=0;i<m.length;i++){var e=true;for(var j=0;j<m[0].length;j++){if(typeof m[i][j]=="object"&&p.indexOf(m[i][j])<0){var t=m[i][j];if(this.rightToLeft){s=this.tilesInRow-1;if(t.getLong()){s--;}}var a=(j-s)*this.styleInfo.tileWidth+(j-s)*this.styleInfo.tileMarginWidth;var b=(i*this.styleInfo.tileHeight)+(i*this.styleInfo.tileMarginHeight);var c="translate3d("+a+"px,"+b+"px,0px)";var d="translate("+a+"px,"+b+"px)";var f=t.getDomRef();if(f){var h=f.style;h.webkitTransform=c;h.transform=c;h.msTransform=d;}t.data('layoutPosition',{translate3D:c,translate2D:d});p.push(t);}if(typeof m[i][j]!=="undefined"){e=false;}}if(e){m.splice(i,1);i--;}}var k=m.length||1;var l=(k*(this.styleInfo.tileHeight+this.styleInfo.tileMarginHeight))+'px';g.data('containerHeight',l);var n=g.getInnerContainerDomRef();if(n){n.style.height=l;}if(this.cfg.isLockedGroupsCompactLayoutEnabled&&g.getIsGroupLocked()&&m.length>0){var o=g.getDomRef().parentElement;if(this.cfg.isLockedGroupsCompactLayoutEnabled()){var q=m[0].length;for(i=0;i<m[0].length;i++){if(!m[0][i]){q=i;break;}}var r=q*(this.styleInfo.tileWidth+this.styleInfo.tileMarginWidth);g.getDomRef().style.width="auto";o.style.width=r+"px";o.style.display="inline-block";}else{g.getDomRef().style.width="";o.style.width="";o.style.display="";}}},calcTilesInRow:function(c,t,a){var b=Math.floor(c/(t+a));if(b<=this.maxTilesInRow){b=(b<this.minTilesinRow?this.minTilesinRow:b);}else{b=this.maxTilesInRow;}return b;},reRenderGroupLayout:function(g,t){t=t||this.getGroupTiles(g);var a=this.organizeGroup(t);this.applyTilesPositions(g,a);},getGroupTiles:function(g){var t=g.getTiles();if(t.length>=1&&g.getShowPlaceholder()){t.push(g.oPlusTile);}return t;},reRenderGroupsLayout:function(g,o){if(!this.isInited){return;}var s=this.getStyleInfo(this.container);if(!s.tileWidth){return;}if(o&&JSON.stringify(s)==JSON.stringify(this.styleInfo)){return;}this.styleInfo=s;this.tilesInRow=this.calcTilesInRow(s.containerWidth,s.tileWidth,s.tileMarginWidth);g=g||this.getGroups();for(var i=0;i<g.length;i++){this.reRenderGroupLayout(g[i]);}}};sap.ushell.Layout=new L();})();},"sap/ushell/UIActions.js":function(){(function(){"use strict";jQuery.sap.declare("sap.ushell.UIActions");sap.ushell.UIActions=function(c){if(!c||!c.rootSelector||!c.containerSelector||!c.draggableSelector){throw new Error("No configuration object to initialize User Interaction module.");}this.animationDuration=null;this.captureStart=null;this.captureMove=null;this.captureEnd=null;this.clickCallback=null;this.clickEvent=null;this.clickHandler=null;this.clone=null;this.cloneClass=null;this.container=null;this.contextMenuEvent=null;this.debug=null;this.defaultDragStartEvent=null;this.disabledDraggableSelector=null;this.dragAndScrollCallback=null;this.dragAndScrollDuration=null;this.dragAndScrollTimer=null;this.draggable=null;this.placeHolderClass=null;this.draggableSelector=null;this.draggableSelectorExclude=null;this.doubleTapCallback=null;this.doubleTapDelay=null;this.element=null;this.endX=null;this.endY=null;this.isLayoutEngine=null;this.isTouch=null;this.lastElement=null;this.lastTapTime=null;this.lockMode=null;this.log=null;this.mode=null;this.mouseDownEvent=null;this.mouseMoveEvent=null;this.mouseUpEvent=null;this.moveTolerance=null;this.moveX=null;this.moveY=null;this.noop=null;this.onDragStartUIHandler=null;this.onDragEndUIHandler=null;this.preventClickFlag;this.preventClickTimeoutId;this.scrollContainer=null;this.scrollContainerSelector=null;this.scrollEvent=null;this.scrollTimer=null;this.startX=null;this.startY=null;this.switchModeDelay=null;this.tapsNumber=null;this.timer=null;this.scrollHandler=null;this.touchCancelEvent=null;this.dragCallback=null;this.endCallback=null;this.touchEndEvent=null;this.touchMoveEvent=null;this.startCallback=null;this.touchStartEvent=null;this.wrapper=null;this.wrapperRect=null;this.scrollCallback=null;this.init=function(c){this.startX=-1;this.startY=-1;this.moveX=-1;this.moveY=-1;this.endX=-1;this.endY=-1;this.noop=function(){};this.isLayoutEngine=c.isLayoutEngine||false;if(this.isLayoutEngine){this.moveDraggable=this.noop;}this.isTouch=c.isTouch?!!c.isTouch:false;this.container=document.querySelector(c.containerSelector);this.scrollContainerSelector=c.scrollContainerSelector||c.containerSelector;this.switchModeDelay=c.switchModeDelay||1500;this.dragAndScrollDuration=c.dragAndScrollDuration||230;this.moveTolerance=c.moveTolerance===0?0:c.moveTolerance||10;this.draggableSelector=c.draggableSelector;this.draggableSelectorBlocker=c.draggableSelectorBlocker||c.rootSelector;this.draggableSelectorExclude=c.draggableSelectorExclude;this.mode='normal';this.debug=c.debug||false;this.root=document.querySelector(c.rootSelector);this.animationDuration=c.animationDuration||330;this.tapsNumber=0;this.lastTapTime=0;this.log=this.debug?this.logToConsole:this.noop;this.lockMode=false;this.placeHolderClass=c.placeHolderClass||"";this.cloneClass=c.cloneClass||"";this.wrapper=c.wrapperSelector?document.querySelector(c.wrapperSelector):this.container.parentNode;this.clickCallback=typeof c.clickCallback==='function'?c.clickCallback:this.noop;this.startCallback=typeof c.startCallback==='function'?c.startCallback:this.noop;this.doubleTapCallback=typeof c.doubleTapCallback==='function'?c.doubleTapCallback:this.noop;this.endCallback=typeof c.endCallback==='function'?c.endCallback:this.noop;this.dragCallback=typeof c.dragCallback==='function'?c.dragCallback:this.noop;this.dragAndScrollCallback=typeof c.dragAndScrollCallback==='function'?c.dragAndScrollCallback:this.noop;this.scrollCallback=typeof c.scrollCallback==='function'?c.scrollCallback:this.noop;this.doubleTapDelay=c.doubleTapDelay||500;this.wrapperRect=this.wrapper.getBoundingClientRect();this.scrollEvent='scroll';this.touchStartEvent='touchstart';this.touchMoveEvent='touchmove';this.touchEndEvent='touchend';this.mouseDownEvent='mousedown';this.mouseMoveEvent='mousemove';this.mouseUpEvent='mouseup';this.contextMenuEvent='contextmenu';this.touchCancelEvent='touchcancel';this.defaultDragStartEvent='dragstart';this.clickEvent='click';this.isVerticalDragOnly=c.isVerticalDragOnly||false;this.disabledDraggableSelector=c.disabledDraggableSelector;this.onDragStartUIHandler=typeof c.onDragStartUIHandler==='function'?c.onDragStartUIHandler:this.noop;this.onDragEndUIHandler=typeof c.onDragEndUIHandler==='function'?c.onDragEndUIHandler:this.noop;};this.forEach=function(s,a){return Array.prototype.forEach.call(s,a);};this.indexOf=function(s,i){return Array.prototype.indexOf.call(s,i);};this.insertBefore=function(s,i,r){var a,b,d;d=Array.prototype.splice;a=this.indexOf(s,i);b=this.indexOf(s,r);d.call(s,b-(a<b?1:0),0,d.call(s,a,1)[0]);};this.logToConsole=function(){window.console.log.apply(console,arguments);};this.getDraggableElement=function(a){var e;this.draggable=jQuery(this.draggableSelector,this.container);while(typeof e==='undefined'&&a!==this.root&&!jQuery(a).is(this.draggableSelectorBlocker)){if(this.indexOf(this.draggable,a)>=0&&jQuery(a).not(this.draggableSelectorExclude).length>0){e=a;}a=a.parentNode;}return e;};this.captureStart=function(e){var a;if(e.type==='touchstart'&&e.touches.length===1){a=e.touches[0];}else if(e.type==='mousedown'){a=e;if(e.which!=1){return;}}if(a){this.element=this.getDraggableElement(a.target);this.startX=a.pageX;this.startY=a.pageY;this.lastMoveX=0;this.lastMoveY=0;if(this.lastTapTime&&this.lastElement&&this.element&&(this.lastElement===this.element)&&Math.abs(Date.now()-this.lastTapTime)<this.doubleTapDelay){this.lastTapTime=0;this.tapsNumber=2;}else{this.lastTapTime=Date.now();this.tapsNumber=1;this.lastElement=this.element;}this.log('captureStart('+this.startX+', '+this.startY+')');}};this.startHandler=function(e){this.log('startHandler');clearTimeout(this.timer);delete this.timer;this.captureStart(e);if(this.element){this.startCallback(e,this.element);if(this.lockMode===false){if(this.tapsNumber===2){this.mode='double-tap';return;}if(this.isTouch){this.timer=setTimeout(function(){if(!jQuery(this.element).hasClass(this.disabledDraggableSelector)){this.log('mode switched to drag');this.mode='drag';this.createClone();this.dragCallback(e,this.element);}else{this.onDragStartUIHandler();}}.bind(this),this.switchModeDelay);}}}}.bind(this);this.captureMove=function(e){var a;if(e.type==='touchmove'&&e.touches.length===1){a=e.touches[0];}else if(e.type==='mousemove'){a=e;}if(a){this.moveX=a.pageX;this.moveY=a.pageY;this.log('captureMove('+this.moveX+', '+this.moveY+')');}};this.moveHandler=function(e){var i;this.log('moveHandler');this.captureMove(e);switch(this.mode){case'normal':if((Math.abs(this.startX-this.moveX)>this.moveTolerance||Math.abs(this.startY-this.moveY)>this.moveTolerance)){if(this.isTouch){this.log('-> normal');clearTimeout(this.timer);delete this.timer;}else if(this.element){this.onDragStartUIHandler();if(!jQuery(this.element).hasClass(this.disabledDraggableSelector)){this.log('mode switched to drag');this.mode='drag';this.createClone();}else{this.preventClick();this.element=null;}}}break;case'drag':e.preventDefault();this.onDragStartUIHandler();this.log('-> drag');if(this.isVerticalDragOnly){this.mode='vertical-drag';}else{this.mode='drag-and-scroll';}window.addEventListener(this.mouseUpEvent,this.endHandler,true);this.translateClone();this.scrollContainer=document.querySelector(this.scrollContainerSelector);this.dragAndScroll();if(!this.isTouch){this.dragCallback(e,this.element);}break;case'drag-and-scroll':e.stopPropagation();e.preventDefault();this.log('-> drag-and-scroll');i=this.dragAndScroll();this.translateClone();if(!i){this.moveDraggable();}this.dragAndScrollCallback({evt:e,clone:this.clone,isScrolling:i,moveX:this.moveX,moveY:this.moveY});break;case'vertical-drag':e.stopPropagation();e.preventDefault();i=this.dragAndScroll();this.translateClone();if(!i){this.moveDraggableVerticalOnly(this.moveX,this.moveY);}this.dragAndScrollCallback({evt:e,clone:this.clone,isScrolling:i,moveX:this.moveX,moveY:this.moveY});break;default:break;}}.bind(this);this.captureEnd=function(e){var a;if((e.type==='touchend'||e.type==='touchcancel')&&(e.changedTouches.length===1)){a=e.changedTouches[0];}else if(e.type==='mouseup'){a=e;}if(a){this.endX=a.pageX;this.endY=a.pageY;this.log('captureEnd('+this.endX+', '+this.endY+')');}};this.contextMenuHandler=function(e){if(this.isTouch){e.preventDefault();}}.bind(this);this.clickHandler=function(e){if(this.preventClickFlag){this.preventClickFlag=false;e.preventDefault();e.stopPropagation();e.stopImmediatePropagation();clearTimeout(this.preventClickTimeoutId);}this.clickCallback();}.bind(this);this.preventClick=function(){this.preventClickFlag=true;this.preventClickTimeoutId=setTimeout(function(){this.preventClickFlag=false;}.bind(this),100);};this.endHandler=function(e){this.log('endHandler');this.captureEnd(e);this.onDragEndUIHandler();switch(this.mode){case'normal':this.log('-> normal');break;case'drag':this.log('-> drag');this.removeClone();this.endCallback(e,this.element);this.preventClick();break;case'drag-and-scroll':this.log('-> drag-and-scroll');window.removeEventListener(this.mouseUpEvent,this.endHandler,true);this.removeClone();this.endCallback(e,this.element);this.preventClick();e.stopPropagation();e.preventDefault();break;case'vertical-drag':this.log('-> vertical-drag');window.removeEventListener(this.mouseUpEvent,this.endHandler,true);this.removeClone();this.endCallback(e,this.element);e.stopPropagation();e.preventDefault();break;case'double-tap':this.log('-> double-tap');this.doubleTapCallback(e,this.element);break;default:break;}clearTimeout(this.timer);delete this.timer;this.lastMoveX=0;this.lastMoveY=0;this.element=null;this.mode='normal';}.bind(this);this.defaultDragStartHandler=function(e){e.preventDefault();};this.scrollHandler=function(){clearTimeout(this.scrollTimer);this.lockMode=true;this.scrollTimer=setTimeout(function(){this.lockMode=false;}.bind(this),500);}.bind(this);this.createClone=function(){var s,r;r=this.element.getBoundingClientRect();this.clone=this.element.cloneNode(true);this.clone.className+=(' '+this.cloneClass);this.element.className+=(' '+this.placeHolderClass);s=this.clone.style;s.position='fixed';s.display='block';s.top=r.top+'px';s.left=r.left+'px';s.width=r.width+'px';s.zIndex='100';s.webkitTransition='-webkit-transform 0ms cubic-bezier(0.33, 0.66, 0.66, 1)';s.mozTransition='-moz-transform 0ms cubic-bezier(0.33, 0.66, 0.66, 1)';s.msTransition='-ms-transform 0ms cubic-bezier(0.33, 0.66, 0.66, 1)';s.transition='transform 0ms cubic-bezier(0.33, 0.66, 0.66, 1)';s.webkitTransform='translate3d(0px, 0px, 0px) ';s.mozTransform='translate3d(0px, 0px, 0px) ';s.msTransform='translate3d(0px, 0px, 0px) ';s.transform='translate3d(0px, 0px, 0px) ';this.root.appendChild(this.clone);this.log('createClone');};this.removeClone=function(){this.element.className=this.element.className.split(' '+this.placeHolderClass).join('');this.clone.parentElement.removeChild(this.clone);this.clone=null;this.log('removeClone');};this.translateClone=function(){var d,a;d=this.moveX-this.startX;a=this.moveY-this.startY;this.clone.style.webkitTransform='translate3d('+d+'px, '+a+'px, 0px)';this.clone.style.mozTransform='translate3d('+d+'px, '+a+'px, 0px)';this.clone.style.msTransform='translate('+d+'px, '+a+'px)';this.clone.style.transform='translate3d('+d+'px, '+a+'px, 0px)';this.log('translateClone ('+d+', '+a+')');};this.dragAndScroll=function(){var d,a,s,t=this;function b(){s.webkitTransition='-webkit-transform '+a+'ms linear';s.transition='transform '+a+'ms linear';s.mozTransition='-moz-transform '+a+'ms linear';s.msTransition='-ms-transform '+a+'ms linear';s.webkitTransform='translate(0px, '+d+'px) scale(1) translateZ(0px)';s.mozTransform='translate(0px, '+d+'px) scale(1) translateZ(0px)';s.msTransform='translate(0px, '+d+'px) scale(1) translateZ(0px)';s.transform='translate(0px, '+d+'px) scale(1) translateZ(0px)';}function e(){s.webkitTransition='';s.mozTransition='';s.msTransition='';s.transition='';s.webkitTransform='';s.mozTransform='';s.msTransform='';s.transform='';t.wrapper.scrollTop-=d;}function g(){var r,h;if(t.clone){r=t.clone.getBoundingClientRect();h=t.wrapperRect.top-r.top;if(h>0){return h;}h=t.wrapper.offsetTop+t.wrapper.offsetHeight-(r.top+t.clone.offsetHeight);if(h<0){return h;}}return 0;}function i(){if(d<0){return t.wrapper.getBoundingClientRect().top-(t.container.getBoundingClientRect().top+t.container.offsetHeight)+t.wrapper.offsetHeight<0;}return t.container.getBoundingClientRect().top-(t.wrapper.getBoundingClientRect().top+t.container.offsetTop)<0;}function f(){b();t.dragAndScrollTimer=setTimeout(function(){e();t.dragAndScrollTimer=undefined;if((d=g())!==0&&i()){f();}t.scrollCallback();},a);}d=g();if(d!==0&&!this.dragAndScrollTimer&&i()){a=this.dragAndScrollDuration;this.scrollContainer=this.scrollContainer||document.querySelector(this.scrollContainerSelector);s=this.scrollContainer.style;f();}this.log('dragAndScroll ('+d+')');return(d!=0)&&i();};this.moveDraggableVerticalOnly=function(){var h,i,r,m=true;this.forEach(this.draggable,function(a,b){if(!h){r=a.getBoundingClientRect();i=!(r.bottom<this.moveY||r.top>this.moveY);if(i){h=a;if(r.top+r.height/2<this.moveY){m=false;}}}}.bind(this));if(h&&this.element!==h){if(m){this.insertBefore(this.draggable,this.element,h);h.parentNode.insertBefore(this.element,h);}else{this.insertBefore(this.draggable,this.element,h.nextSibling);h.parentNode.insertBefore(this.element,h.nextSibling);}this.lastMoveX=this.moveX;this.lastMoveY=this.moveY;}this.log('moveDraggableVerticalonly');};this.moveDraggable=function(m,a){var e,h,b,i,d,r;this.forEach(this.draggable,function(f,g){if(!h){r=f.getBoundingClientRect();i=!(r.right<this.moveX||r.left>this.moveX);d=!(r.bottom<this.moveY||r.top>this.moveY);if(i&&d){h=f;b=g;}}}.bind(this));if(h&&this.element!==h){e=this.indexOf(this.draggable,this.element);if(Math.abs(this.lastMoveX-this.moveX)>=this.moveTolerance||Math.abs(this.lastMoveY-this.moveY)>=this.moveTolerance){if(b<=e){h.parentNode.insertBefore(this.element,h);this.insertBefore(this.draggable,this.element,h);}else if(b>e){h.parentNode.insertBefore(this.element,h.nextSibling);this.insertBefore(this.draggable,this.element,this.draggable[b+1]);}this.lastMoveX=this.moveX;this.lastMoveY=this.moveY;}}this.log('moveDraggable');};this.enable=function(){this.log('enable');this.root.addEventListener(this.touchStartEvent,this.startHandler,false);this.root.addEventListener(this.touchMoveEvent,this.moveHandler,true);this.root.addEventListener(this.touchEndEvent,this.endHandler,false);this.root.addEventListener(this.touchCancelEvent,this.endHandler,false);this.root.addEventListener(this.mouseMoveEvent,this.moveHandler,true);this.root.addEventListener(this.mouseDownEvent,this.startHandler,false);this.root.addEventListener(this.mouseUpEvent,this.endHandler,false);this.root.addEventListener(this.contextMenuEvent,this.contextMenuHandler,false);this.root.addEventListener(this.clickEvent,this.clickHandler,true);this.root.addEventListener(this.defaultDragStartEvent,this.defaultDragStartHandler,true);this.wrapper.addEventListener(this.scrollEvent,this.scrollHandler,false);return this;};this.disable=function(){this.log('disable');this.root.removeEventListener(this.touchStartEvent,this.startHandler,false);this.root.removeEventListener(this.touchMoveEvent,this.moveHandler,true);this.root.removeEventListener(this.touchEndEvent,this.endHandler,false);this.root.removeEventListener(this.mouseDownEvent,this.startHandler,false);this.root.removeEventListener(this.mouseMoveEvent,this.moveHandler,true);this.root.removeEventListener(this.mouseUpEvent,this.endHandler,false);this.root.removeEventListener(this.contextMenuEvent,this.contextMenuHandler,false);this.root.removeEventListener(this.clickEvent,this.clickHandler,true);this.root.removeEventListener(this.touchCancelEvent,this.endHandler,false);this.wrapper.removeEventListener(this.scrollEvent,this.scrollHandler,false);return this;};this.init(c);};})();},"sap/ushell/renderers/fiori2/ActionMode.js":function(){
// Copyright (c) 2009-2014 SAP SE, All Rights Reserved
(function(){"use strict";jQuery.sap.declare("sap.ushell.renderers.fiori2.ActionMode");var A=function(){var m=sap.ui.getCore().byId("shell").getModel(),S=sap.ui.getCore().byId("mainShell").getController();this.oEventBus=sap.ui.getCore().getEventBus();this.oEventBus.subscribe('launchpad','actionModeInactive',this.scrollToViewPoint,this);this.oEventBus.subscribe('launchpad','actionModeActive',this.scrollToViewPoint,this);this.viewPoint=undefined;c(m,S);},c=function(m,S){if(m.getProperty("/actionModeMenuButtonEnabled")){a(S,m);}if(m.getProperty("/actionModeFloatingButtonEnabled")){b(S,m);}},a=function(S,m){var t=new sap.m.Button("ActionModeBtn",{text:sap.ushell.resources.i18n.getText("activateActionMode"),icon:'sap-icon://edit',tooltip:sap.ushell.resources.i18n.getText("activateActionMode"),press:function(){sap.ushell.renderers.fiori2.ActionMode.toggleActionMode();}});S._addOptionsActionSheetButton(true,t,"home");if(m.getProperty("/enableHelp")){t.addStyleClass('help-id-ActionModeBtn');}},b=function(S,m){var f=new sap.ushell.ui.shell.ActionButton({id:"floatingActionBtn",icon:'sap-icon://edit',visible:false,press:function(e){sap.ushell.renderers.fiori2.ActionMode.toggleActionMode();},tooltip:sap.ushell.resources.i18n.getText("activateActionMode")});f.data("sap-ui-fastnavgroup","true",true);f.addEventDelegate({onsapskipback:function(e){e.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.goToTileContainer();},onsaptabprevious:function(e){e.preventDefault();if(!sap.ushell.renderers.fiori2.AccessKeysHandler.goToTileContainer()){sap.ui.getCore().byId('actionsBtn').focus();}}});if(m.getProperty("/enableHelp")){f.addStyleClass('help-id-floatingActionBtn');}S.setFloatingAction(f,"home");},s=function(e){var d=e.target;if(!$(d).hasClass("tileActionLayerDiv")){setTimeout($.proxy(sap.ushell.renderers.fiori2.ActionMode.deactivate(),sap.ushell.renderers.fiori2.ActionMode),0);}};A.prototype.activate=function(){var t=$(".sapUshellTile"),S=sap.ui.getCore().byId("shellPage"),f,T,d=this;this.eventDelegateObj={ontap:s,ontouchstart:s,onmousedown:s};jQuery.sap.require("sap.m.MessageToast");sap.m.MessageToast.show(sap.ushell.resources.i18n.getText("actionModeActivated"),{duration:4000});this.calcViewPosition();sap.ui.getCore().byId('shell').getModel().setProperty('/tileActionModeActive',true);this.aOrigHiddenGroupsIds=sap.ushell.utils.getCurrentHiddenGroupIds();f=sap.ui.getCore().byId("floatingActionBtn");if(f){f.addStyleClass("Active");f.setTooltip(sap.ushell.resources.i18n.getText("deactivateActionMode"));}T=sap.ui.getCore().byId("ActionModeBtn");if(T){T.setTooltip(sap.ushell.resources.i18n.getText("deactivateActionMode"));}this.oEventBus.publish('launchpad','actionModeActive');};A.prototype.calcViewPosition=function(){var j=jQuery('#dashboardGroups').find('.sapUshellTileContainer').not('.sapUshellHidden'),i;if(j){for(i=0;i<j.length;i++){var u=j[i],f=jQuery(u).parent().offset().top;if(f>0){var d=jQuery(u).attr("id"),g=sap.ui.getCore().byId(d),D={group:g,fromTop:f};this.viewPoint=D;return;}}}};A.prototype.scrollToViewPoint=function(){window.setTimeout(jQuery.proxy(this.oEventBus.publish,this.oEventBus,"launchpad","scrollToFirstVisibleGroup",this.viewPoint),0);};A.prototype.deactivate=function(){var S=sap.ui.getCore().byId("shellPage"),t=sap.ui.getCore().byId("TileActions"),T,f;this.calcViewPosition();sap.ui.getCore().byId('shell').getModel().setProperty('/tileActionModeActive',false);this.oEventBus.publish("launchpad",'actionModeInactive',this.aOrigHiddenGroupsIds);if(t!==undefined){t.destroy();}f=sap.ui.getCore().byId("floatingActionBtn");if(f){f.removeStyleClass("Active");f.setTooltip(sap.ushell.resources.i18n.getText("activateActionMode"));}T=sap.ui.getCore().byId("ActionModeBtn");if(T){T.setTooltip(sap.ushell.resources.i18n.getText("activateActionMode"));}};A.prototype.toggleActionMode=function(){var t=sap.ui.getCore().byId('shell').getModel().getProperty('/tileActionModeActive');if(t){this.deactivate();}else{this.activate();}};A.prototype.activateGroupEditMode=function(g){var j=jQuery(g.getDomRef()).find('.sapUshellTileContainerContent'),t=j.find(".sapUshellTile"),d=this;j.addClass("tileContainerEditMode");};A.prototype._openActionsMenu=function(e,t){var d=this,T=t||e.getSource(),l=sap.ushell.Container.getService("LaunchPage"),f=[],o=sap.ui.getCore().byId("TileActions"),i,n,B,g,h,H;if(T){h=T.getBindingContext().getObject().object;f=l.getTileActions(h);}d.oTileControl=T;$(".tileActionLayerDivSelected").removeClass("tileActionLayerDivSelected");var j=$(e.getSource().getDomRef()).find(".tileActionLayerDiv");j.addClass("tileActionLayerDivSelected");if(o==undefined){o=new sap.m.ActionSheet("TileActions",{placement:sap.m.PlacementType.Auto,afterClose:function(){$(".tileActionLayerDivSelected").removeClass("tileActionLayerDivSelected");var E=sap.ui.getCore().getEventBus();E.publish("dashboard","actionSheetClose",d.oTileControl);}});}else{o.destroyButtons();}if(f.length==0||T.oParent.getProperty("isGroupLocked")){n=new sap.m.Button({text:sap.ushell.resources.i18n.getText("tileHasNoActions"),enabled:false});o.addButton(n);}else{for(i=0;i<f.length;i++){g=f[i];H=function(g){return function(){d._handleActionPress(g);};}(g);B=new sap.m.Button({text:g.text,icon:g.icon,press:H});o.addButton(B);}}o.openBy(e.getSource());};A.prototype._setUiActionsState=function(e){var d=this._getDashboardPage();if(e){d.uiActions.enable();}else{d.uiActions.disable();}};A.prototype._getDashboardPage=function(){var d=sap.ui.getCore().byId("mainShell"),e=d.oDashboardManager;return e.getDashboardView();};A.prototype._handleActionPress=function(o){if(o.press){o.press.call();}else if(o.targetURL){if(o.targetURL.indexOf("#")==0){hasher.setHash(o.targetURL);}else{window.open(o.targetURL,'_blank');}}else{sap.m.MessageToast.show("No Action");}};sap.ushell.renderers.fiori2.ActionMode=new A();}());},"sap/ushell/renderers/fiori2/Renderer.js":function(){(function(){"use strict";jQuery.sap.declare("sap.ushell.renderers.fiori2.Renderer");jQuery.sap.require("sap.ushell.ui.shell.Shell");jQuery.sap.require("sap.ui.core.UIComponent");jQuery.sap.require("sap.ushell.resources");jQuery.sap.require("sap.ushell.renderers.fiori2.RendererExtensions");sap.ui.core.UIComponent.extend("sap.ushell.renderers.fiori2.Renderer",{metadata:{version:"1.28.1",dependencies:{version:"1.28.1",libs:["sap.ui.core","sap.m"],components:[]}}});sap.ushell.renderers.fiori2.Renderer.prototype.createContent=function(){var p=jQuery.sap.getUriParameters().get("appState")||jQuery.sap.getUriParameters().get("sap-ushell-config"),v=this.getComponentData()||{};if(p){if(!v.config){v.config={};}v.config.appState=p;}if(v.config&&v.config.customViews){Object.keys(v.config.customViews).forEach(function(s){var V=v.config.customViews[s];sap.ui.view(s,{type:V.viewType,viewName:V.viewName,viewData:V.componentData});});}var V=sap.ui.view('mainShell',{type:sap.ui.core.mvc.ViewType.JS,viewName:"sap.ushell.renderers.fiori2.Shell",viewData:v});sap.ushell.renderers.fiori2.utils.init();return V;};}());},"sap/ushell/renderers/fiori2/RendererExtensions.js":function(){(function(){"use strict";jQuery.sap.declare("sap.ushell.renderers.fiori2.RendererExtensions");var s;var i=false;function _(){if(!i){s=sap.ui.getCore().byId("mainShell").oController;a("rendererLoaded");i=true;}}function a(E,D){setTimeout(function(){sap.ui.getCore().getEventBus().publish("sap.ushell.renderers.fiori2.Renderer",E,D);},0);}sap.ushell.renderers.fiori2.utils={};sap.ushell.renderers.fiori2.utils.publishExternalEvent=a;sap.ushell.renderers.fiori2.utils.init=_;function b(I,L,n,o){s.addHeaderItem.apply(s,arguments);}function c(I,L,n,o){s.addHeaderEndItem.apply(s,arguments);}function d(I,L,n,o){s.removeHeaderItem.apply(s,arguments);}function e(I,L,n,o){s.removeHeaderEndItem.apply(s,arguments);}function f(B,L,n,o){s.addOptionsActionSheetButton.apply(s,arguments);}function g(B,L,n,o){s.removeOptionsActionSheetButton.apply(s,arguments);}function h(F){s.setFooter.apply(s,arguments);}function j(){s.removeFooter();}function k(C,S){s.addEndUserFeedbackCustomUI.apply(s,arguments);}function l(){s.addUserPreferencesEntry.apply(s,arguments);}function m(){s._setHeaderTitle.apply(s,arguments);}function R(){this.addHeaderItem=b;this.addHeaderEndItem=c;this.removeHeaderItem=d;this.removeHeaderEndItem=e;this.addEndUserFeedbackCustomUI=k;this.addOptionsActionSheetButton=f;this.removeOptionsActionSheetButton=g;this.setFooter=h;this.removeFooter=j;this.addUserPreferencesEntry=l;this.setHeaderTitle=m;this.LaunchpadState={App:"app",Catalog:"catalog",Home:"home"};}sap.ushell.renderers.fiori2.RendererExtensions=new R();}());},"sap/ushell/renderers/fiori2/Shell.controller.js":function(){(function(){"use strict";jQuery.sap.require("sap.ui.core.IconPool");setTimeout(function(){jQuery.sap.require("sap.ushell.renderers.fiori2.launchpad.DashboardManager");},10);jQuery.sap.require("sap.ushell.services.Message");jQuery.sap.require("sap.ushell.services.ShellNavigation");jQuery.sap.require("sap.ushell.services.AppConfiguration");jQuery.sap.require("sap.ushell.renderers.fiori2.History");jQuery.sap.require("sap.ushell.ui.launchpad.LoadingDialog");jQuery.sap.require("sap.ushell.renderers.fiori2.AccessKeysHandler");var a=true,b=sap.ui.Device.system.desktop,u,U,s,m=new sap.ui.model.json.JSONModel({groups:[],animationRendered:false,searchAvailable:false,title:"",tagFiltering:true,catalogSelection:true,searchFiltering:true,tileActionModeEnabled:false,tileActionModeActive:false,isInDrag:false,rtl:false,showEndUserFeedback:false,personalization:true,editTitle:false,searchTerm:"",tagList:[],selectedTags:[],isPhoneWidth:false,states:{"home":{"stateName":"home","showCurtain":false,"headerHiding":false,"headerVisible":true,"showCatalog":false,"showPane":false,"headItems":["configBtn"],"headEndItems":["sf"],"search":"","paneContent":[],"actions":["hideGroupsBtn","ContactSupportBtn","EndUserFeedbackBtn","userPreferencesButton","logoutBtn"],"floatingActions":[],"footer":[]},"app":{"stateName":"app","showCurtain":false,"headerHiding":!b,"headerVisible":true,"headEndItems":["sf"],"showCatalog":false,"showPane":false,"search":"","headItems":["homeBtn"],"actions":["ContactSupportBtn","EndUserFeedbackBtn","aboutBtn","userPreferencesButton","logoutBtn"],"shellActions":["ContactSupportBtn","EndUserFeedbackBtn","aboutBtn","userPreferencesButton","logoutBtn"],"floatingActions":[],"footer":[]},"minimal":{"stateName":"minimal","showCurtain":false,"headerHiding":false,"headerVisible":true,"headEndItems":[],"showCatalog":false,"showPane":false,"headItems":[],"actions":["aboutBtn","ContactSupportBtn","EndUserFeedbackBtn","userPreferencesButton","logoutBtn"],"shellActions":["aboutBtn","ContactSupportBtn","EndUserFeedbackBtn","userPreferencesButton","logoutBtn"],"floatingActions":[],"footer":[]},"standalone":{"stateName":"standalone","showCurtain":false,"headerHiding":!b,"headerVisible":true,"headEndItems":[],"showCatalog":false,"showPane":false,"headItems":[],"actions":["aboutBtn","ContactSupportBtn","EndUserFeedbackBtn"],"shellActions":["aboutBtn","ContactSupportBtn","EndUserFeedbackBtn"],"floatingActions":[],"footer":[]},"embedded":{"stateName":"embedded","showCurtain":false,"headerHiding":!b,"headerVisible":true,"headEndItems":["standardActionsBtn"],"showCatalog":false,"showPane":false,"headItems":[],"actions":["aboutBtn","ContactSupportBtn","EndUserFeedbackBtn"],"shellActions":["aboutBtn","ContactSupportBtn","EndUserFeedbackBtn"],"floatingActions":[],"footer":[]},"headerless":{"stateName":"headerless","showCurtain":false,"headerHiding":!b,"headerVisible":false,"headEndItems":[],"showCatalog":false,"showPane":false,"headItems":[],"actions":[],"shellActions":[],"floatingActions":[],"footer":[]},"catalog":{"stateName":"catalog","showCurtain":false,"headerHiding":!b,"headerVisible":true,"headEndItems":["sf"],"showCatalog":true,"showPane":false,"search":"","headItems":["homeBtn"],"actions":["ContactSupportBtn","EndUserFeedbackBtn","userPreferencesButton","logoutBtn"],"floatingActions":[],"footer":[]}},userPreferences:{entries:[]}}),c={},d=['minimal','app','standalone','embedded','headerless'];m.setSizeLimit(10000);sap.ui.controller("sap.ushell.renderers.fiori2.Shell",{catalogPageId:"catalogPage",onInit:function(){s={home:{headItems:[],headEndItems:[],actions:[]},app:{headItems:[],headEndItems:[],actions:[]},catalog:{headItems:[],headEndItems:[],actions:[]},allStates:{footer:null}};this.oEndUserFeedbackConfiguration={showAnonymous:true,showLegalAgreement:true,showCustomUIContent:true,feedbackDialogTitle:true,textAreaPlaceholder:true,customUIContent:undefined};this.getView().setModel(m);this.getView().setModel(sap.ushell.resources.i18nModel,"i18n");sap.ui.getCore().getEventBus().subscribe("externalSearch",this.externalSearchTriggered,this);sap.ui.getCore().getEventBus().subscribe("showCatalog",this.showCatalog,this);sap.ui.getCore().getEventBus().subscribe("openApp",this.openApp,this);sap.ui.getCore().getEventBus().subscribe("launchpad","contentRendered",this.loadResources,this);this._setConfigurationToModel();u=sap.ushell.Container.getService("UserRecents");this.history=new sap.ushell.renderers.fiori2.History();this.oNavContainer=sap.ui.getCore().byId("navContainer");this.oLoadingDialog=sap.ui.getCore().byId("loadingDialog");this.toggleRtlMode(sap.ui.getCore().getConfiguration().getRTL());this.oShellNavigation=sap.ushell.Container.getService("ShellNavigation");this.oShellNavigation.init(jQuery.proxy(this.doHashChange,this));this.oShellNavigation.registerNavigationFilter(jQuery.proxy(this.handleDataLoss,this));sap.ushell.Container.getService("Message").init(jQuery.proxy(this.doShowMessage,this));sap.ushell.Container.setLogonFrameProvider(this._getLogonFrameProvider());this.bContactSupportEnabled=sap.ushell.Container.getService("SupportTicket").isEnabled();window.onbeforeunload=function(){if(sap.ushell.Container&&sap.ushell.Container.getDirtyFlag()){if(!sap.ushell.resources.browserI18n){sap.ushell.resources.browserI18n=sap.ushell.resources.getTranslationModel(window.navigator.language).getResourceBundle();}return sap.ushell.resources.browserI18n.getText("dataLossExternalMessage");}};try{sap.ushell.Container.getService("EndUserFeedback").isEnabled().done(function(){m.setProperty('/showEndUserFeedback',true);});}catch(e){jQuery.sap.log.error("EndUserFeedback adapter is not found",e.message||e);}if(this.bContactSupportEnabled){sap.ushell.UserActivityLog.activate();}var f=window.matchMedia("(min-width: 800px)");var h=function(g){m.setProperty("/isPhoneWidth",!g.matches);};if(f.addListener){f.addListener(h);h(f);}},_setConfigurationToModel:function(){var v=this.getView().getViewData(),e;if(v){c=v.config||{};}if(c){if(c.states){var f=m.getProperty('/states');for(e in c.states){if(c.states.hasOwnProperty(e)){f[e]=c.states[e];}}m.setProperty('/states',f);}if(c.appState==="headerless"){m.setProperty("/personalization",false);m.setProperty("/states/home/headerVisible",false);}else if(c.enablePersonalization!==undefined){m.setProperty("/personalization",c.enablePersonalization);}if(c.changeEndUserFeedbackTitle!==undefined){this.oEndUserFeedbackConfiguration.feedbackDialogTitle=c.changeEndUserFeedbackTitle;}if(c.changeEndUserFeedbackPlaceholder!==undefined){this.oEndUserFeedbackConfiguration.textAreaPlaceholder=c.changeEndUserFeedbackPlaceholder;}if(c.showEndUserFeedbackAnonymousCheckbox!==undefined){this.oEndUserFeedbackConfiguration.showAnonymous=c.showEndUserFeedbackAnonymousCheckbox;}if(c.showEndUserFeedbackLegalAgreement!==undefined){this.oEndUserFeedbackConfiguration.showLegalAgreement=c.showEndUserFeedbackLegalAgreement;}if(c.enableTagFiltering!==undefined){m.setProperty("/tagFiltering",c.enableTagFiltering);}if(c.enableSetTheme!==undefined){m.setProperty("/setTheme",c.enableSetTheme);}if(c.enableCatalogSelection!==undefined){m.setProperty("/catalogSelection",c.enableCatalogSelection);}if(c.enableSearchFiltering!==undefined){m.setProperty("/searchFiltering",c.enableSearchFiltering);}if(c.enableTilesOpacity!==undefined){m.setProperty("/tilesOpacity",c.enableTilesOpacity);}if(c.enableDragIndicator!==undefined){m.setProperty("/enableDragIndicator",c.enableDragIndicator);}var t=false;if(c.enableActionModeMenuButton!==undefined){m.setProperty("/actionModeMenuButtonEnabled",c.enableActionModeMenuButton);t=c.enableActionModeMenuButton;}if(c.enableActionModeFloatingButton!==undefined){m.setProperty("/actionModeFloatingButtonEnabled",c.enableActionModeFloatingButton);t=t||c.enableActionModeFloatingButton;}m.setProperty("/tileActionModeEnabled",t);if(c.enableTileActionsIcon!==undefined){m.setProperty("/tileActionsIconEnabled",sap.ui.Device.system.desktop?c.enableTileActionsIcon:false);}if(c.enableHideGroups!==undefined){m.setProperty("/enableHideGroups",c.enableHideGroups);}if(c.title){m.setProperty("/title",c.title);}m.setProperty("/enableHelp",!!c.enableHelp);}},_getLogonFrameProvider:function(){var v=this.getView();return{create:function(){return v.createIFrameDialog();},show:function(){v.showIFrameDialog();},destroy:function(){v.destroyIFrameDialog();}};},onExit:function(){sap.ui.getCore().getEventBus().unsubscribe("externalSearch",this.externalSearchTriggered,this);sap.ui.getCore().getEventBus().unsubscribe("showCatalog",this.showCatalog,this);sap.ui.getCore().getEventBus().unsubscribe("openApp",this.openApp,this);this.oShellNavigation.hashChanger.destroy();this.getView().aDanglingControls.forEach(function(C){if(C.destroyContent){C.destroyContent();}C.destroy();});this.getView().oDashboardManager.destroy();sap.ushell.UserActivityLog.deactivate();},getModel:function(){return m;},showCatalog:function(C,e,D){if(!this.isCatalogExist()){var o=sap.ui.view({id:this.catalogPageId,viewName:"sap.ushell.renderers.fiori2.launchpad.catalog.Catalog",viewData:{},type:sap.ui.core.mvc.ViewType.JS});this.oNavContainer.addPage(o);}this.switchViewState("catalog");this.oNavContainer.to(this.catalogPageId,this.getAnimationType());this.setAppIcons({title:sap.ushell.resources.i18n.getText("tile_catalog")});sap.ushell.services.AppConfiguration.setCurrentApplication(null);this.oLoadingDialog.closeLoadingScreen();sap.ui.getCore().getEventBus().publish("showCatalogEvent",D);jQuery(document).off('keydown.dashboard');jQuery(document).off('keydown.catalog');jQuery(document).on('keydown.catalog',sap.ushell.renderers.fiori2.AccessKeysHandler.catalogKeydownHandler);},isCatalogExist:function(){return(sap.ui.getCore().byId(this.catalogPageId))?true:false;},getAnimationType:function(){return sap.ui.Device.os.android?"show":"slide";},onCurtainClose:function(e){jQuery.sap.log.warning("Closing Curtain",e);},handleDataLoss:function(n,o){if(sap.ushell.Container.getDirtyFlag()){if(!sap.ushell.resources.browserI18n){sap.ushell.resources.browserI18n=sap.ushell.resources.getTranslationModel(window.navigator.language).getResourceBundle();}if(confirm(sap.ushell.resources.browserI18n.getText("dataLossInternalMessage"))){sap.ushell.Container.setDirtyFlag(false);return this.oShellNavigation.NavigationFilterStatus.Continue;}else{return this.oShellNavigation.NavigationFilterStatus.Abandon;}}return this.oShellNavigation.NavigationFilterStatus.Continue;},doShowMessage:function(t,M,p){jQuery.sap.require("sap.m.MessageToast");jQuery.sap.require("sap.m.MessageBox");if(t===sap.ushell.services.Message.Type.ERROR){if(sap.ushell.Container.getService("SupportTicket").isEnabled()&&M!==sap.ushell.resources.i18n.getText("supportTicketCreationFailed")){try{jQuery.sap.require("sap.ushell.ui.launchpad.EmbeddedSupportErrorMessage");var f=new sap.ushell.ui.launchpad.EmbeddedSupportErrorMessage("EmbeddedSupportErrorMessage",{title:p.title||sap.ushell.resources.i18n.getText("error"),content:new sap.m.Text({text:M})});f.open();}catch(e){sap.m.MessageBox.show(M,sap.m.MessageBox.Icon.ERROR,p.title||sap.ushell.resources.i18n.getText("error"));}}else{sap.m.MessageBox.show(M,sap.m.MessageBox.Icon.ERROR,p.title||sap.ushell.resources.i18n.getText("error"));}}else if(t===sap.ushell.services.Message.Type.CONFIRM){if(p.actions){sap.m.MessageBox.show(M,sap.m.MessageBox.Icon.QUESTION,p.title,p.actions,p.callback);}else{sap.m.MessageBox.confirm(M,p.callback,p.title);}}else{sap.m.MessageToast.show(M,{duration:p.duration||3000});}},doHashChange:function(S,A,o,O,p){if(!a){a=true;return;}S=this.fixShellHash(S);var e=this.history.getHistoryLength();if(p){this.hashChangeFailure(e,p.message,null,"sap.ushell.renderers.fiori2.Shell.controller");return;}this.history.hashChange(S,o);var f=sap.ushell.Container.getService("URLParsing"),g=f.parseShellHash(S),C=m.getProperty("/currentState"),i=C&&C.stateName==="catalog",h=g&&g.action!==sap.ushell.renderers.fiori2.Navigation.CATALOG.ACTION;if(!i||h){this.oLoadingDialog.setText("");this.oLoadingDialog.openLoadingScreen();}if(g&&g.contextRaw&&g.contextRaw==="navResCtx"){var j={};j.additionalInformation=g.params.additionalInformation[0];j.url=g.params.url[0];j.applicationType=g.params.applicationType[0];this.openSomething(S,A,o,O,j);}else{sap.ushell.Container.getService("NavTargetResolution").resolveHashFragment(S).done(jQuery.proxy(this.openSomething,this,S,A,o,O)).fail(jQuery.proxy(function(M){this.hashChangeFailure(e,"Failed to resolve navigation target: "+S,M,"sap.ushell.renderers.fiori2.Shell.controller");},this));}},hashChangeFailure:function(h,M,D,C){this.reportError(M,D,C);this.oLoadingDialog.closeLoadingScreen();this.delayedMessageError(sap.ushell.resources.i18n.getText("fail_to_start_app_try_later"));if(h===0){hasher.setHash("");}else{this.historyBack();}},reportError:function(M,D,C){jQuery.sap.log.error(M,D,C);},delayedMessageError:function(M){setTimeout(function(){sap.ushell.Container.getService("Message").error(M);},0);},fixShellHash:function(S){if(!S){S='#';}else if(S.charAt(0)!=='#'){S='#'+S;}return S;},historyBack:function(){window.history.back(1);},openSomething:function(S,A,o,O,f){var g;if(!this.oNavContainer.getParent()){sap.ui.getCore().byId("shell").addContent(this.oNavContainer);}if(f){try{g=sap.ushell.Container.getService("URLParsing").parseShellHash(S);}catch(e){g=undefined;}if(g===undefined){jQuery.sap.log.warning("Could not parse shell hash: "+S);g={};}g.sShellHash=S;g.sAppPart=A;g.sOldShellHash=o;g.sOldAppPart=O;g.oApplication=f;if(f.applicationType===sap.ushell.renderers.fiori2.Navigation.CATALOG.ID){if(m.getProperty("/personalization")){sap.ui.getCore().getEventBus().publish("showCatalog",g);}else{hasher.setHash("");}}else{try{jQuery.sap.require('sap.fiori.core-ext');}catch(h){jQuery.sap.log.warning("failed to load sap.fiori.core-ext!");}g.oMetadata=sap.ushell.services.AppConfiguration.getMetadata(f);sap.ui.getCore().getEventBus().publish("openApp",g);}}else{this.openDashboard();}},openDashboard:function(){var o=m.getProperty("/currentState")&&m.getProperty("/currentState").stateName==="catalog";this.switchViewState("home");this.oNavContainer.backToTop();sap.ushell.services.AppConfiguration.setCurrentApplication(null);this.setAppIcons(null);if(o){sap.ushell.utils.addBottomSpace();}try{sap.ushell.utils.handleTilesVisibility();}catch(e){}this.oLoadingDialog.closeLoadingScreen();jQuery(document).off('keydown.dashboard');jQuery(document).off('keydown.catalog');jQuery(document).on('keydown.dashboard',sap.ushell.renderers.fiori2.AccessKeysHandler.dashboardKeydownHandler);var f=sap.ui.getCore().byId('shell');f.focusOnConfigBtn();if(sap.ushell.Layout){sap.ushell.Layout.reRenderGroupsLayout(null,true);}},openApp:function(C,E,D){jQuery.sap.log.warning("Triggering navigation to ",D);var A=D.oApplication,M=D.oMetadata||{},i=null,f=D.sShellHash.replace(/\W/g,"-"),g=M.title||"",h=M.icon||null;if(c&&c.enableTilesOpacity){setTimeout(function(){if(sap.ushell.Container){u.addAppUsage(D.sShellHash);}},700);}if(A){try{if(A.applicationType==="NWBC"&&!(D&&D.contextRaw&&D.contextRaw==="navResCtx")&&this.history.getHistoryLength()>1&&this.history._history[this.history.getHistoryLength()-2]!==D.sShellHash){this.openNWBCApp(A,D);return;}if(!this.oNavContainer.getPage("application"+f)&&!this.oNavContainer.getPage("shellPage"+f)){i=this.getWrappedApplication(A,D,M);this.oNavContainer.addPage(i);sap.ushell.services.AppConfiguration.setCurrentApplication(A);this.oLoadingDialog.showAppInfo(g,h);}else if(this.oNavContainer.getPage("application"+f)||this.oNavContainer.getPage("shellPage"+f)){i=this.oNavContainer.getPage("application"+f)||this.oNavContainer.getPage("shellPage"+f);}this.setAppIcons(M);if(A.applicationType[0]==="NWBC"||A.applicationType==="NWBC"){this.switchViewState("minimal");if(D.contextRaw==="navResCtx"){a=false;hasher.replaceHash(D.params.original_intent[0]);}}else{var j="app";if(d.indexOf(c.appState)>=0){j=c.appState;}this.switchViewState(j);}if(this.history.backwards&&this.oNavContainer.getInitialPage()!==this.oNavContainer.getCurrentPage().getId()){this.oNavContainer.to(i,"slideBack");}else{this.oNavContainer.to(i,this.oNavContainer.getInitialPage()?"slide":"show");}setTimeout(function(){this.oLoadingDialog.closeLoadingScreen();}.bind(this),300);}catch(e){if(e.stack){jQuery.sap.log.error("Application initialization failed due to an Exception:\n"+e.stack);}this.restoreNavContainerAfterFailure();this.hashChangeFailure(this.history.getHistoryLength(),e.name,e.message,g);}}if(this.history.getHistoryLength()<1){this.oLoadingDialog.closeLoadingScreen();}},restoreNavContainerAfterFailure:function(){this.oNavContainer.removePage(this.oNavContainer.getCurrentPage()).destroy();var o=this.oNavContainer.removeAllPages();this.oNavContainer.destroy();this.oNavContainer=this.getView().initNavContainer(this);jQuery.each(o,jQuery.proxy(function(i,v){if(!this.oNavContainer.getPage(v.getId())){this.oNavContainer.addPage(v);}if(v.getId()===this.oNavContainer.getInitialPage()){v.removeStyleClass("sapMNavItemHidden");}},this));},getWrappedApplication:function(A,D,M){var o,i,e=M.title||"",f=D.sShellHash.replace(/\W/g,"-");jQuery.sap.require('sap.ushell.components.container.ApplicationContainer');o=new sap.ushell.components.container.ApplicationContainer("application"+f,A);this.publishNavigationStateEvents(o,D);if(!M.fullWidth&&A.applicationType!=="NWBC"){jQuery.sap.require("sap.m.Shell");i=new sap.m.Shell("shellPage"+f,{logo:sap.ui.resource('sap.ui.core','themes/base/img/1x1.gif'),title:e,showLogout:false,app:o}).addStyleClass("sapUshellApplicationPage");if(!e){i.addStyleClass("sapUshellApplicationPageNoHdr");}}else{o.addStyleClass('sapMShellGlobalInnerBackground');i=o;}return i;},openNWBCApp:function(A,D){a=false;window.history.back(1);var t=D;var S=D;var e;S.params.additionalInformation=A.additionalInformation;S.params.url=A.url;S.params.applicationType=A.applicationType;S.params.original_intent=D.sShellHash;S.target=t;t.contextRaw=S.contextRaw="navResCtx";var o=sap.ushell.Container.getService("ShellNavigation").hrefForExternal(S,true);if(o.skippedParams){e=o.params.original_intent[0];}else{e=o.hash;}this.openAppNewWindow(e);this.oLoadingDialog.closeLoadingScreen();},publishNavigationStateEvents:function(A,D){var o=A.onAfterRendering;A.onAfterRendering=function(){if(o){o.apply(this,arguments);}sap.ushell.renderers.fiori2.utils.publishExternalEvent("appOpened",D);};var e=A.exit;A.exit=function(){if(e){e.apply(this,arguments);}sap.ushell.renderers.fiori2.utils.publishExternalEvent("appClosed",D.oApplication);};},openAppNewWindow:function(e){window.open(e);},setAppIcons:function(M){var e=jQuery.sap.getModulePath("sap.ushell");var l=(M&&M.homeScreenIconPhone)||(e+'/themes/base/img/launchicons/57_iPhone_Desktop_Launch.png'),L=(M&&M["homeScreenIconPhone@2"])||(e+'/themes/base/img/launchicons/114_iPhone-Retina_Web_Clip.png'),o=(M&&M.homeScreenIconTablet)||(e+'/themes/base/img/launchicons/72_iPad_Desktop_Launch.png'),f=(M&&M["homeScreenIconTablet@2"])||(e+'/themes/base/img/launchicons/144_iPad_Retina_Web_Clip.png'),F=(M&&M.favIcon)||(e+'/themes/base/img/launchpad_favicon.ico'),t=(M&&M.title)||sap.ushell.resources.i18n.getText("homeBtn_tooltip"),C=this.getFavIconHref();if(sap.ui.Device.os.ios){jQuery.sap.setIcons({'phone':l,'phone@2':L,'tablet':o,'tablet@2':f,'favicon':F,'precomposed':true});}else if(C!==F){jQuery.sap.setIcons({'phone':'','phone@2':'','tablet':'','tablet@2':'','favicon':F,'precomposed':true});}window.document.title=t;},getFavIconHref:function(){return jQuery('link').filter('[rel="shortcut icon"]').attr('href')||'';},externalSearchTriggered:function(C,e,D){m.setProperty("/searchTerm",D.searchTerm);D.query=D.searchTerm;},onAfterNavigate:function(e){var h=this.oNavContainer.getInitialPage(),f=e.getParameter("fromId");if(f!==h&&f!==this.catalogPageId){this.oNavContainer.removeAggregation("pages",f,true);sap.ui.getCore().byId(f).destroy();}this.oLoadingDialog.closeLoadingScreen();},onAfterRendering:function(){if(window.f2p){f2p.add(f2p.m.endHomePage);}},navigateToHome:function(e){if(!e||(e&&e.getParameter("id")==='homeBtn')){hasher.setHash("");}else{sap.ushell.renderers.fiori2.Navigation.openCatalogByHash();}},toggleSearch:function(i){m.setProperty("/searchAvailable",i);},toggleRtlMode:function(r){m.setProperty("/rtl",r);},togglePane:function(e){var S=e.getSource(),f=S.getSelected();if(!sap.ui.getCore().byId('groupList')&&(!this.getModel().getProperty||this.getModel().getProperty('/states/home/paneContent').length===0)){var g=this.getView().oDashboardManager.getGroupListView();if(sap.ui.Device.system.desktop){g.addStyleClass("sapUshellGroupListDesktopScrollbar");}this.getModel().setProperty('/states/home/paneContent',[g.getId()]);this.getModel().setProperty('/currentState/paneContent',[g.getId()]);}if(e.getParameter("id")==="categoriesBtn"){S.getModel().setProperty("/currentState/showCurtainPane",!f);}else{S.getModel().setProperty("/currentState/showPane",!f);if(S.getModel().getProperty&&S.getModel().getProperty('/currentState/paneContent').indexOf('groupList')!==-1){setTimeout(function(){var o=sap.ui.getCore().byId("shell");if(o){o.setFocusOnFirstGroupInList();}},1500);}}},getActiveViews:function(){var C=this.getModel().getProperty("/currentState/curtainContent"),p=sap.ui.getCore().byId(C[0]),A=[];jQuery.each(p.getContent(),function(i,v){A.push(v.getId());});return A;},getLastSearchScreen:function(){return m.getProperty("/lastSearchScreen");},saveSearchScreen:function(S){if(S==='historyScreen'||S==='searchResults'||S==='suggestions'){m.setProperty("/lastSearchScreen",S);}},switchViewState:function(S,e){if(m.getProperty("/personalization")){jQuery.sap.require("sap.ushell.renderers.fiori2.ActionMode");}var p=S[0]==="/"?S:"/states/"+S,o=m.getProperty(p),C=m.getProperty("/currentState")||{};var f=m.getProperty("/currentState/stateName");if(f){if((f!=="home")&&(f!=="catalog")){var g=m.getProperty("/currentState/shellActions");if(g){var h=m.getProperty("/states/"+f+"/actions");h.length=0;for(var i=0;i<g.length;i++){h.push(g[i]);}m.setProperty("/states/"+f+"/actions",h);}}}this.saveSearchScreen(S);if(!!e){m.setProperty("/lastState",C);}o=jQuery.extend({},C,o);var j=C.floatingActions;var n=o.floatingActions;if(j){j.forEach(function(F){if(!n||n.indexOf(F)==-1){sap.ui.getCore().byId(F).setVisible(false);}});}if(n){n.forEach(function(F,I,A){var l=sap.ui.getCore().byId(F),q=o.footer;if(A.length==1){l.setVisible(true);}else{l.setVisible(false);}if(q.length>0){l.addStyleClass("sapUshellRoundedActionButtonWithFooter");}},this);}if(n&&(n.length>1)){this.addMultipleActionsButton(n);}else{this.toggleFloatingMultipleActionsButton(false);}m.setProperty("/currentState",o);if(S==="searchResults"){m.setProperty("/lastSearchScreen",'');if(!hasher.getHash().indexOf("Action-search")===0){var k=sap.ui.getCore().getModel("searchModel");hasher.setHash("Action-search&/searchTerm="+k.getProperty("/searchBoxTerm")+"&dataSource="+JSON.stringify(k.getDataSourceJson()));}}},toggleFloatingMultipleActionsButton:function(v){var B=sap.ui.getCore().byId("floatingMultipleActionsButton");if(B){B.setVisible(v);}},addMultipleActionsButton:function(f){if(!sap.ui.getCore().byId("floatingMultipleActionsButton")){var F=new sap.ushell.ui.shell.ActionButton({id:"floatingMultipleActionsButton",icon:'sap-icon://add',visible:true,press:function(e){var p=sap.ui.getCore().byId('floatingMultipleActionsButton').$();var i=this.$().find('span');i.addClass('sapUshellShellActionButtonTransition');if(!i.hasClass('sapUshellShellActionButtonRotate')){i.addClass('sapUshellShellActionButtonRotate');var t=parseInt(p.outerHeight(),10)+parseInt(p.css('bottom'),10);f.forEach(function(o,I){var B=sap.ui.getCore().byId(o);B.setVisible(true);B.addStyleClass('sapUshellShellActionButtonTransition');setTimeout(function(){B.$().css('transform',"translateY(-"+(t*(I+1))+"px)");},0);});}else{i.removeClass('sapUshellShellActionButtonRotate');f.forEach(function(o){var B=sap.ui.getCore().byId(o);var t=parseInt(p.css('bottom'),10);B.$().css('transform',"translateY(-"+t+"px)");setTimeout(function(){B.setVisible(false);},150);});}},tooltip:sap.ushell.resources.i18n.getText("XXX")});this.getView().insertContent(F,1);}else{this.toggleFloatingMultipleActionsButton(true);}},pressActionBtn:function(e){if(!sap.ui.Device.system.desktop){var o=this.getModel().getProperty("/currentState").headerHiding;this.getModel().setProperty("/currentState/headerHiding",false);}var A=sap.ui.getCore().byId('headActions');if(!A){var f=new sap.ushell.ui.footerbar.UserPreferencesButton("userPreferencesButton"),l=new sap.ushell.ui.footerbar.LogoutButton("logoutBtn"),g=new sap.ushell.ui.footerbar.AboutButton("aboutBtn");this._setUserPrefModel();jQuery.sap.require("sap.ushell.ui.footerbar.HideGroupsButton");var h=new sap.ushell.ui.footerbar.HideGroupsButton("hideGroupsBtn");if(!this.getModel().getProperty('/enableHideGroups')){h.setVisible(false);}jQuery.sap.require('sap.ushell.ui.footerbar.ContactSupportButton');jQuery.sap.require('sap.ushell.ui.footerbar.EndUserFeedback');var C=new sap.ushell.ui.footerbar.ContactSupportButton("ContactSupportBtn",{visible:this.bContactSupportEnabled}),E=new sap.ushell.ui.footerbar.EndUserFeedback("EndUserFeedbackBtn",{visible:'{/showEndUserFeedback}',showAnonymous:this.oEndUserFeedbackConfiguration.showAnonymous,showLegalAgreement:this.oEndUserFeedbackConfiguration.showLegalAgreement,showCustomUIContent:this.oEndUserFeedbackConfiguration.showCustomUIContent,feedbackDialogTitle:this.oEndUserFeedbackConfiguration.feedbackDialogTitle,textAreaPlaceholder:this.oEndUserFeedbackConfiguration.textAreaPlaceholder,customUIContent:this.oEndUserFeedbackConfiguration.customUIContent});if(this.getModel().getProperty("/enableHelp")){f.addStyleClass('help-id-loginDetails');l.addStyleClass('help-id-logoutBtn');g.addStyleClass('help-id-aboutBtn');h.addStyleClass('help-id-hideGroupsBtn');E.addStyleClass('help-id-EndUserFeedbackBtn');C.addStyleClass('help-id-contactSupportBtn');}A=new sap.m.ActionSheet("headActions",{placement:sap.m.PlacementType.Bottom,buttons:{path:"/currentState/actions",factory:function(i,j){return sap.ui.getCore().byId(j.getObject());}}});A.updateAggregation=this.getView().updateShellAggregation;A.setModel(this.getModel());this.getView().aDanglingControls.push(A,f,l,g,C,E,h);A.attachAfterClose(A,function(){if(!sap.ui.Device.system.desktop){this.getModel().setProperty("/currentState/headerHiding",o);}});}A.openBy(e.getSource());},loadResources:function(){this.loadCoreExt();if(!U){this.getView().loadUserImage();U=true;}},loadCoreExt:function(){var A=jQuery.sap.isDeclared('sap.fiori.core',true)||jQuery.sap.isDeclared('sap.fiori.core-ext',true),l,p='';if(A){return;}if(window.Worker){p=jQuery.sap.getModulePath('sap.ushell.loader','.js');l=new window.Worker(p);l.onmessage=function(E){if(E.data&&!E.data.error){try{window.eval(E.data);jQuery.sap.declare('sap.fiori.core-ext'+'');setTimeout(function(){sap.ui.getCore().getEventBus().publish("launchpad","coreExtLoaded");},0);}catch(e){jQuery.sap.log.warning('failed to load sap.fiori.core-ext');}}else{jQuery.sap.log.warning('failed to load sap.fiori.core-ext');}l.terminate();};l.postMessage({action:'loadResource',url:window['sap-ui-debug']?'../fiori/core-ext-dbg.js':'../fiori/core-ext.js'});}else{setTimeout(function(){try{jQuery.sap.require('sap.fiori.core-ext');setTimeout(function(){sap.ui.getCore().getEventBus().publish("launchpad","coreExtLoaded");},0);}catch(e){jQuery.sap.log.warning("failed to load sap.fiori.core-ext");}},0);}},_setUserPrefModel:function(){var e=m.getProperty("/userPreferences/entries");var D=this._getUserPrefDefaultModel();D.entries=D.entries.concat(e);m.setProperty("/userPreferences",D);},_getUserPrefDefaultModel:function(){jQuery.sap.require("sap.ushell.ui.footerbar.UserPrefThemeSelector");var o=sap.ushell.Container.getUser();var l=o.getLanguage();var e=window.location.host;var f=sap.ushell.resources.i18n.getText("languageFld");var g=sap.ushell.resources.i18n.getText("serverFld");var t=new sap.ushell.ui.footerbar.UserPrefThemeSelector();return{dialogTitle:sap.ushell.resources.i18n.getText("userPreferences"),isDetailedEntryMode:false,activeEntryPath:null,entries:[{entryHelpID:"serverName",title:g,editable:false,valueArgument:e,valueResult:null},{entryHelpID:"language",title:f,editable:false,valueArgument:l,valueResult:null},{entryHelpID:"themes",title:t.getTitle(),editable:t.getIsChangeThemePermitted(),valueArgument:t.getValue.bind(t),valueResult:null,onSave:t.getOnSave.bind(t),onCancel:t.getOnCancel.bind(t),contentFunc:t.getContent.bind(t),contentResult:null}]};},addHeaderItem:function(i,S,e,f){var n=Array.prototype.slice.call(arguments);n.splice(0,0,"headItems");this._addHeaderItem.apply(this,n);},addHeaderEndItem:function(i,S,e,f){var n=Array.prototype.slice.call(arguments);n.splice(0,0,"headEndItems");this._addHeaderItem.apply(this,n);},_addHeaderItem:function(p,I,S,e,f){if(typeof I!=="object"||!I.getId){throw new Error("oItem value is invalid");}var n=Array.prototype.slice.call(arguments);n.splice(0,1);var P=this._getPassStates.apply(this,n);for(var i=0;i<P.length;i++){var h=s[P[i]][p];var o;if(h.length===1){var E=p.substring(0,p.length-1);jQuery.sap.log.warning("You can only add one "+E+". Replacing existing headItem: "+h[0]+" in state: "+P[i]+", with the new headItem: "+I.getId()+".");o=h[h.length-1];h.splice(h.length-1,1);}h.push(I.getId());var M=this._getModelStates(P[i]);for(var j=0;j<M.length;j++){this._addHeaderItemToModel(I,p,M[j],o);}}},_addHeaderItemToModel:function(i,p,S,o){var e="/states/"+S+"/"+p;var h=m.getProperty(e);if(o){var f=h.indexOf(o);h.splice(f,1);}if((S=="embedded")&&(p=="headEndItems")){var g=h.indexOf("standardActionsBtn");h.splice(g,0,i.getId());}else{h.push(i.getId());}m.setProperty(e,h);},removeHeaderItem:function(i,S,e,f){var n=Array.prototype.slice.call(arguments);n.splice(0,0,"headItems");this._removeHeaderItem.apply(this,n);},removeHeaderEndItem:function(i,S,e,f){var n=Array.prototype.slice.call(arguments);n.splice(0,0,"headEndItems");this._removeHeaderItem.apply(this,n);},addEndUserFeedbackCustomUI:function(C,S){if(C){this.oEndUserFeedbackConfiguration.customUIContent=C;}if(S===false){this.oEndUserFeedbackConfiguration.showCustomUIContent=S;}},_removeHeaderItem:function(p,I,S,e,f){if(typeof I!=="object"||!I.getId){throw new Error("oItem value is invalid");}var n=Array.prototype.slice.call(arguments);n.splice(0,1);var P=this._getPassStates.apply(this,n);for(var i=0;i<P.length;i++){var h=s[P[i]][p];var g=h.indexOf(I.getId());if(g>-1){h.splice(g,1);}else{jQuery.sap.log.warning("You cannot remove headItem: "+I.getId()+", the headItem does not exists.");return;}var M=this._getModelStates(P[i]);for(var j=0;j<M.length;j++){this._removeHeaderItemFromModel(I,p,M[j]);}}},_removeHeaderItemFromModel:function(i,p,S){var e="/states/"+S+"/"+p;var h=m.getProperty(e);var f=h.indexOf(i.getId());if(f>-1){h.splice(f,1);}m.setProperty(e,h);},addOptionsActionSheetButton:function(B,S,e,f){Array.prototype.unshift.call(arguments,false);return this._addOptionsActionSheetButton.apply(this,arguments);},_addOptionsActionSheetButton:function(e,B,S,f,g){if(typeof B!=="object"||!B.getId){throw new Error("oButton value is invalid");}var p=this._getPassStates.apply(this,Array.prototype.splice.call(arguments,1));for(var i=0;i<p.length;i++){var P=s[p[i]]["actions"];P.push(B.getId());var M=this._getModelStates(p[i]);for(var j=0;j<M.length;j++){if(M[j]=="home"||M[j]=="catalog"){this._addOptionsActionSheetButtonToModel(B,e,M[j],"actions");}else{this._addOptionsActionSheetButtonToModel(B,e,M[j],"actions");this._addOptionsActionSheetButtonToModel(B,e,M[j],"shellActions");}}}},_addOptionsActionSheetButtonToModel:function(B,i,S,p){var e="/states/"+S+"/"+p;var A=m.getProperty(e);if(i){A.unshift(B.getId());}else{var l=A.indexOf("logoutBtn");if(l>-1){A.splice(l,0,B.getId());}else{A.push(B.getId());}}m.setProperty(e,A);},removeOptionsActionSheetButton:function(B,S,e,f){if(typeof B!=="object"||!B.getId){throw new Error("oButton value is invalid");}var p=this._getPassStates.apply(this,arguments);for(var i=0;i<p.length;i++){var P=s[p[i]]["actions"];var g=P.indexOf(B.getId());if(g>-1){P.splice(g,1);}else{jQuery.sap.log.warning("You cannot remove button: "+B.getId()+" from the launchpad state: "+p[i]+", the button was not added using 'sap.ushell.renderers.fiori2.RendererExtensions.addOptionsActionSheetButton'.");continue;}var M=this._getModelStates(p[i]);for(var j=0;j<M.length;j++){if(M[j]=="home"||M[j]=="catalog"){this._removeOptionsActionSheetButtonFromModel(B,M[j],"actions");}else{this._removeOptionsActionSheetButtonFromModel(B,M[j],"actions");this._removeOptionsActionSheetButtonFromModel(B,M[j],"shellActions");}}}},_removeOptionsActionSheetButtonFromModel:function(B,S,p){var e="/states/"+S+"/"+p;var A=m.getProperty(e);var i=A.indexOf(B.getId());if(i>-1){A.splice(i,1);}m.setProperty(e,A);},setFooter:function(f){if(typeof f!=="object"||!f.getId){throw new Error("oFooter value is invalid");}var p=s["allStates"]["footer"];if(p!=null){jQuery.sap.log.warning("You can only set one footer. Replacing existing footer: "+p+", with the new footer: "+f.getId()+".");}s["allStates"]["footer"]=f.getId();var M=["home","catalog","app","minimal","standalone","embedded"];for(var j=0;j<M.length;j++){var e="/states/"+M[j]+"/footer";var F=m.getProperty(e);if(F.length>0){F.pop();}F.push(f.getId());m.setProperty(e,F);}},removeFooter:function(){var p=s["allStates"]["footer"];if(p==null){jQuery.sap.log.warning("There is no footer to remove.");return;}s["allStates"]["footer"]=null;var M=["home","catalog","app","minimal","standalone","embedded"];for(var j=0;j<M.length;j++){var e="/states/"+M[j]+"/footer";var f=m.getProperty(e);if(f.length>0){f.pop();}m.setProperty(e,f);}},_getPassStates:function(I,S,e,f){var p=[];if(arguments.length==1){p=["app","catalog","home"];}else{p=Array.prototype.slice.call(arguments,1,arguments.length);}for(var i=0;i<p.length;i++){if(p[i]!="home"&&p[i]!="app"&&p[i]!="catalog"){throw new Error("sLaunchpadState value is invalid");}}return p;},_getModelStates:function(S){var M=[];if(S=="app"){var e=["app","minimal","standalone","embedded"];M=M.concat(e);}else{M.push(S);}return M;},setFloatingAction:function(B,S,p,i){if(typeof B!=="object"||!B.getId){throw new Error("oFooter type is invalid");}var e="/states/"+S+"/floatingActions";var f=m.getProperty(e);f.push(B.getId());m.setProperty(e,f);},addUserPreferencesEntry:function(e){this._validateUserPrefEntryConfiguration(e);this._updateUserPrefModel(e);},_validateUserPrefEntryConfiguration:function(e){if((!e)||(typeof e!=="object")){throw new Error("object oConfig was not provided");}if(!e.title){throw new Error("title was not provided");}if(!e.value){throw new Error("value was not provided");}if(typeof e.entryHelpID!=="undefined"){if(typeof e.entryHelpID!=="string"){throw new Error("entryHelpID type is invalid");}else{if(e.entryHelpID===""){throw new Error("entryHelpID type is invalid");}}}if(e.title&&typeof e.title!=="string"){throw new Error("title type is invalid");}if(typeof e.value!=="function"&&typeof e.value!=="string"&&typeof e.value!=="number"){throw new Error("value type is invalid");}if(e.onSave&&typeof e.onSave!=="function"){throw new Error("onSave type is invalid");}if(e.content&&typeof e.content!=="function"){throw new Error("content type is invalid");}if(e.onCancel&&typeof e.onCancel!=="function"){throw new Error("onCancel type is invalid");}},_updateUserPrefModel:function(e){var n={"entryHelpID":e.entryHelpID,"title":e.title,"editable":e.content?true:false,"valueArgument":e.value,"valueResult":null,"onSave":e.onSave,"onCancel":e.onCancel,"contentFunc":e.content,"contentResult":null};var f=m.getProperty("/userPreferences/entries");f.push(n);m.setProperty("/userPreferences/entries",f);},_setHeaderTitle:function(t){if(typeof t!=="string"){throw new Error("sTitle type is invalid");}m.setProperty("/title",t);}});}());},"sap/ushell/renderers/fiori2/Shell.view.js":function(){(function(){"use strict";jQuery.sap.require("sap.ushell.renderers.fiori2.Navigation");jQuery.sap.require("sap.ushell.renderers.fiori2.launchpad.DashboardManager");jQuery.sap.require("sap.ushell.ui.shell.Shell");jQuery.sap.require("sap.ushell.UIActions");jQuery.sap.require("sap.ushell.UserActivityLog");sap.ui.jsview("sap.ushell.renderers.fiori2.Shell",{createContent:function(c){var s=this;var v=this.getViewData()||{},C=v.config||{},S=(C.appState==="embedded")?true:false,b=(C.appState==="headerless")?true:false,p=function(e,i,H){return e?H:i;},f=function(i,e){return sap.ui.getCore().byId(e.getObject());},l=new sap.ushell.ui.launchpad.LoadingDialog({id:"loadingDialog",title:null,text:"",showCancelButton:false}),o=new sap.ushell.ui.shell.ShellHeadItem({id:"configBtn",tooltip:"{i18n>showGrpsBtn_tooltip}",icon:sap.ui.core.IconPool.getIconURI("menu2"),selected:{path:"/currentState/showPane"},press:[c.togglePane,c]}),h=new sap.ushell.ui.shell.ShellHeadItem({id:"homeBtn",title:"{i18n>homeBtn_tooltip}",tooltip:"{i18n>homeBtn_tooltip}",icon:sap.ui.core.IconPool.getIconURI("home"),target:"#"}),B=new sap.ushell.ui.shell.ShellHeadItem({id:"backBtn",title:"{i18n>backBtn_tooltip}",tooltip:"{i18n>backBtn_tooltip}",icon:{parts:["/rtl"],formatter:function(r){return r?sap.ui.core.IconPool.getIconURI("feeder-arrow"):sap.ui.core.IconPool.getIconURI("nav-back");}},press:[c.navigateToHome,c]});h.addEventDelegate({onsapskipback:function(E){try{E.preventDefault();E.stopPropagation();var i=jQuery('#catalogTiles .sapUshellTile:visible:first');sap.ushell.renderers.fiori2.AccessKeysHandler.setTileFocus(i);}catch(e){}},onsapskipforward:function(E){try{E.preventDefault();var n=jQuery("#catalogTilesPage header button")[0];n.focus();}catch(e){}}});o.addEventDelegate({onsapdown:function(e){if(c.getModel().getProperty("/currentState/showPane")){var i=sap.ui.getCore().byId("shell");if(i){e.stopImmediatePropagation();e.stopPropagation();i.setFocusOnFirstGroupInList();}}else{o.firePress();}},onsapup:function(e){if(c.getModel().getProperty("/currentState/showPane")){o.firePress();}},onsapskipforward:function(E){try{E.preventDefault();var i=jQuery(".sapUshellGroupLI:first:visible");if(!i.length){sap.ushell.renderers.fiori2.AccessKeysHandler.goToTileContainer();}else{i.focus();}}catch(e){}}});var a,A;if(S){A=new sap.ushell.ui.shell.ShellHeadItem({id:"standardActionsBtn",tooltip:"{i18n>headerActionsTooltip}",icon:sap.ui.core.IconPool.getIconURI("account"),press:[c.pressActionBtn,c]});}else if(!b){a=new sap.ushell.ui.shell.ShellHeadUserItem({id:"actionsBtn",username:sap.ushell.Container.getUser().getFullName(),tooltip:"{i18n>headerActionsTooltip}",image:sap.ui.core.IconPool.getIconURI("account"),press:[c.pressActionBtn,c]});a.addEventDelegate({onsaptabnext:function(E){try{var n=sap.ui.getCore().byId('shell'),q=n.getModel().getData();if(q.currentState.stateName==="home"){if(q.currentState.showPane){var r=sap.ui.getCore().byId('groupListPage');var t=r.getContent()[1].getItems();var w;for(var i=0;i<t.length&&!w;i++){if(t[i].getDomRef()&&jQuery.sap.getObject("style.display",null,t[i].getDomRef())!=='none'){w=t[i];}}if(w){w.focus();}else{sap.ui.getCore().byId('openCatalogActionItem').focus();}}else{E.preventDefault();if(!sap.ushell.renderers.fiori2.AccessKeysHandler.goToTileContainer()){sap.ui.getCore().byId('configBtn').focus();}}}}catch(e){}}});}var u=new sap.ushell.ui.shell.Shell({id:"shell",fullHeightContent:true,showPane:{path:"/currentState/showPane"},headItems:{path:"/currentState/headItems",factory:f},headEndItems:{path:"/currentState/headEndItems",factory:f},floatingButtons:{path:"/currentState/floatingActions",factory:f},user:a,paneContent:{path:"/currentState/paneContent",factory:f},headerHiding:{path:"/currentState/headerHiding"},headerVisible:{path:"/currentState/headerVisible"},title:{path:"/title"}});u._setStrongBackground(true);var d=u.getHeader();if(d){var g=d.onAfterRendering;d.onAfterRendering=function(){if(g){g.apply(this,arguments);}if(this.getModel().getProperty("/enableHelp")){jQuery('#actionsBtn').addClass('help-id-actionsBtn');jQuery('#configBtn').addClass('help-id-configBtn');jQuery('#homeBtn').addClass('help-id-homeBtn');}jQuery(".sapUshellHeadTitle").removeAttr("tabindex",0);};}if(sap.ui.Device.os.android){o.addEventDelegate({onclick:function(e){e.preventDefault();}});}u.focusOnConfigBtn=function(){jQuery.sap.delayedCall(500,this,function(){if(!b){var C=sap.ui.getCore().byId('configBtn');if(C){C.focus();}}});};u.oldInvalidate=u.invalidate;u.invalidate=function(){this.oldInvalidate.apply(this,arguments);};u.setFocusOnFirstGroupOnPage=function(){var e=sap.ui.getCore().byId('dashboardGroups'),n=jQuery(e.getDomRef()).find(".sapUshellTileContainer:first");if(n[0]){n.focus();}else{sap.ui.getCore().byId('openCatalogActionItem').focus();}};u.setFocusOnFirstGroupInList=function(){var e=sap.ui.getCore().byId('groupList'),n=jQuery(e.getDomRef()).find("li:first");if(n[0]){n.focus();}};this.oDashboardManager=new sap.ushell.renderers.fiori2.launchpad.DashboardManager("dashboardMgr",{model:c.getModel(),config:C});var D=this.pageFactory("dashboardPage",this.oDashboardManager.getDashboardView(),!sap.ui.Device.system.desktop),j=this.pageFactory("shellPage",u,true);j.bindAggregation("footer",{path:"/currentState/footer",factory:f});var k=D.onAfterRendering;D.onAfterRendering=function(){if(k){k.apply(this,arguments);}setTimeout(function(){sap.ui.getCore().getEventBus().publish("grouplist","DashboardRerender");},0);};this.initNavContainer(c);if(S){u.setIcon(sap.ui.resource('sap.ui.core','themes/base/img/1x1.gif'));}else{this.initShellBarLogo(u);}this.setDisplayBlock(true);this.aDanglingControls=[sap.ui.getCore().byId('navContainer'),j,D,B,l,h,o];u.updateAggregation=this.updateShellAggregation;var m=(C.enableSearch!==false);c.getModel().setProperty("/searchAvailable",m);if(m){s.oSearchField=new sap.ushell.ui.shell.ShellHeadItem({id:"sf",tooltip:"{i18n>searchbox_tooltip}",icon:sap.ui.core.IconPool.getIconURI("search"),visible:{path:"/searchAvailable"},showSeparator:false,press:function(e){var i;if(!s.searchShellHelper){jQuery.sap.require('sap.ushell.renderers.fiori2.search.SearchShellHelper');s.searchShellHelper=sap.ushell.renderers.fiori2.search.SearchShellHelper;s.searchShellHelper.init(s);i=false;}else{i=s.searchShellHelper.oHeadSearchBox.getVisible();}i=!i;s.searchShellHelper.handleClickMagnifier();u.setSearchVisible(i);}});s.aDanglingControls.push(s.oSearchField);}this.logonIFrameReference=null;return new sap.m.App({pages:j});},loadUserImage:function(){var i=sap.ushell.Container.getUser().getImage();if(i){jQuery.ajax({url:i,headers:{'Cache-Control':'no-cache, no-store, must-revalidate','Pragma':'no-cache','Expires':'0'},success:function(){var a=sap.ui.getCore().byId('actionsBtn');if(a){a.setImage(i);}},error:function(){jQuery.sap.log.error("Could not load user image from: "+i,"","sap.ushell.renderers.fiori2.Shell.view");}});}},_getIconURI:function(i){var r=null;if(i){var m=/url[\s]*\('?"?([^\'")]*)'?"?\)/.exec(i);if(m){r=m[1];}}return r;},initShellBarLogo:function(u){jQuery.sap.require("sap.ui.core.theming.Parameters");var i=sap.ui.core.theming.Parameters.get("sapUiGlobalLogo");if(i){i=this._getIconURI(i);if(!i){u.setIcon(sap.ui.resource("sap.ui.core","mimes/logo/sap_50x26.png"));}}var t=this;sap.ui.getCore().attachThemeChanged(function(){if(u.bIsDestroyed){return;}var n=sap.ui.core.theming.Parameters.get("sapUiGlobalLogo");if(n){n=t._getIconURI(n);if(n){u.setIcon(n);}else{u.setIcon(sap.ui.resource("sap.ui.core","mimes/logo/sap_50x26.png"));}}else{u.setIcon(sap.ui.resource("sap.ui.core","mimes/logo/sap_50x26.png"));}});},initNavContainer:function(c){var d=sap.ui.getCore().byId("dashboardPage"),n=new sap.m.NavContainer({id:"navContainer",pages:[d],initialPage:d,afterNavigate:jQuery.proxy(c.onAfterNavigate,c)});n.addCustomTransition("slideBack",sap.m.NavContainer.transitions.slide.back,sap.m.NavContainer.transitions.slide.back);return n;},updateShellAggregation:function(n){var b=this.mBindingInfos[n],a=this.getMetadata().getJSONKeys()[n],c;jQuery.each(this[a._sGetter](),jQuery.proxy(function(i,v){this[a._sRemoveMutator](v);},this));jQuery.each(b.binding.getContexts(),jQuery.proxy(function(i,v){c=b.factory(this.getId()+"-"+i,v)?b.factory(this.getId()+"-"+i,v).setBindingContext(v,b.model):"";this[a._sMutator](c);},this));},disableBouncing:function(p){p.onBeforeRendering=function(){sap.m.Page.prototype.onBeforeRendering.apply(p);var s=this._oScroller,o=s.onAfterRendering;s.onAfterRendering=function(){o.apply(s);if(s._scroller){s._scroller.options.bounce=false;}};};return p;},getControllerName:function(){return"sap.ushell.renderers.fiori2.Shell";},pageFactory:function(i,c,d){var p=new sap.m.Page({id:i,showHeader:false,content:c,enableScrolling:!!sap.ui.Device.system.desktop}),e=["onAfterHide","onAfterShow","onBeforeFirstShow","onBeforeHide","onBeforeShow"],D={};jQuery.each(e,function(I,E){D[E]=jQuery.proxy(function(a){jQuery.each(this.getContent(),function(I,c){c._handleEvent(a);});},p);});p.addEventDelegate(D);if(d&&sap.ui.Device.system.desktop){this.disableBouncing(p);}return p;},onAfterRendering:function(){if(window.f2p){jQuery.sap.require("sap.ushell.components.perf.monitor");window.f2pMonitor.init(sap.ui.getCore().byId("navContainer"));}},createIFrameDialog:function(){var d=null,l=this.logonIFrameReference,c;var _=function(){if(l){l.remove();}return $('<iframe id="SAMLDialogFrame" src="" frameborder="0"></iframe>');};var a=function(){d.addStyleClass('samlDialogHidden');$('#sap-ui-blocklayer-popup').addClass('samlDialogHidden');};this.destroyIFrameDialog();var b=new sap.m.Button({text:sap.ushell.resources.i18n.getText("samlCloseBtn"),press:function(){sap.ushell.Container.cancelLogon();}});var h=new sap.ui.core.HTML("SAMLDialogFrame");this.logonIFrameReference=_();h.setContent(this.logonIFrameReference.prop('outerHTML'));d=new sap.m.Dialog({id:"SAMLDialog",title:sap.ushell.resources.i18n.getText("samlDialogTitle"),contentWidth:"50%",contentHeight:"50%",rightButton:b});c=sap.ushell.Container.getService("SupportTicket").isEnabled();if(c){jQuery.sap.require("sap.ushell.ui.footerbar.ContactSupportButton");var C=new sap.ushell.ui.footerbar.ContactSupportButton();C.setWidth('150px');C.setIcon('');d.setLeftButton(C);}d.addContent(h);d.open();a();this.logonIFrameReference=$('#SAMLDialogFrame');return this.logonIFrameReference[0];},destroyIFrameDialog:function(){var d=sap.ui.getCore().byId('SAMLDialog');if(d){d.destroy();}this.logonIFrameReference=null;},showIFrameDialog:function(){var d=sap.ui.getCore().byId('SAMLDialog');if(d){d.removeStyleClass('samlDialogHidden');$('#sap-ui-blocklayer-popup').removeClass('samlDialogHidden');}}});}());},"sap/ushell/renderers/fiori2/launchpad/DashboardManager.js":function(){(function(){"use strict";jQuery.sap.declare("sap.ushell.renderers.fiori2.launchpad.DashboardManager");jQuery.sap.require("sap.ushell.services.Message");var g=function(m,p){return p?sap.ushell.resources.i18n.getText(m,p):sap.ushell.resources.i18n.getText(m);},c=function(C){var a=this.oModel.getProperty('/catalogTiles'),b=a.filter(function(t){return t.catalog===C.title&&t.isTileIntentSupported===true;});return b.length;};sap.ui.base.EventProvider.extend("sap.ushell.renderers.fiori2.launchpad.DashboardManager",{metadata:{publicMethods:["getModel","getDashboardView","getGroupListView","isGroupListViewCreated","loadPersonalizedGroups","attachEvent","detachEvent","attachEventOnce"]},constructor:function(i,s){if(sap.ushell.renderers.fiori2.launchpad.getDashboardManager&&sap.ushell.renderers.fiori2.launchpad.getDashboardManager()){return sap.ushell.renderers.fiori2.launchpad.getDashboardManager();}sap.ushell.renderers.fiori2.launchpad.getDashboardManager=jQuery.sap.getter(this.getInterface());this.oPageBuilderService=sap.ushell.Container.getService("LaunchPage");this.oModel=s.model;this.oConfig=s.config;this.oDashboardView=sap.ui.view('dashboard',{type:sap.ui.core.mvc.ViewType.JS,viewName:"sap.ushell.renderers.fiori2.launchpad.dashboard.DashboardContent",viewData:{config:this.oConfig}});this.oDashboardView.setWidth('');this.oDashboardView.setDisplayBlock(true);this.oSortableDeferred=$.Deferred();this.oSortableDeferred.resolve();this.aRequestQueue=[];this.bRequestRunning=false;this.tagsPool=[];this.registerEvents();this.oTileCatalogToGroupsMap={};this.tileViewUpdateQueue=[];this.tileViewUpdateTimeoutID=0;this.oPopover=null;this.tileUuid=null;this.oGroupNotLockedFilter=new sap.ui.model.Filter("isGroupLocked",sap.ui.model.FilterOperator.EQ,false);},createMoveActionDialog:function(){var G=this.oGroupNotLockedFilter;this.moveDialog=new sap.m.SelectDialog("moveDialog",{title:sap.ushell.resources.i18n.getText('moveTileDialog_title'),rememberSelections:false,search:function(e){var v=e.getParameter("value"),f=new sap.ui.model.Filter("title",sap.ui.model.FilterOperator.Contains,v),b=e.getSource().getBinding("items");b.filter([f,G]);},contentWidth:'400px',confirm:function(e){var C=e.getParameter("selectedContexts"),E=sap.ui.getCore().getEventBus();if(C.length){E.publish("launchpad","moveTile",{sTileId:this.tileUuid,toGroupId:C[0].getObject().groupId,toIndex:C[0].getObject().tiles.length});E.publish("launchpad","scrollToGroup",{groupId:C[0].getObject().groupId,groupChanged:false,focus:false});}}.bind(this),items:{path:"/groups",filters:[G],template:new sap.m.StandardListItem({title:"{title}"})}});this.moveDialog.setModel(this.oModel);},registerEvents:function(){var e=sap.ui.getCore().getEventBus(),t=this;e.subscribe("launchpad","addBookmarkTile",this._createBookmark,this);e.subscribe("sap.ushell.services.Bookmark","bookmarkTileAdded",this._addBookmarkToModel,this);e.subscribe("sap.ushell.services.Bookmark","bookmarkTileDeleted",this.loadPersonalizedGroups,this);e.subscribe("launchpad","loadDashboardGroups",this.loadPersonalizedGroups,this);e.subscribe("launchpad","createGroupAt",this._createGroupAt,this);e.subscribe("launchpad","createGroup",this._createGroup,this);e.subscribe("launchpad","deleteGroup",this._deleteGroup,this);e.subscribe("launchpad","resetGroup",this._resetGroup,this);e.subscribe("launchpad","changeGroupTitle",this._changeGroupTitle,this);e.subscribe("launchpad","moveGroup",this._moveGroup,this);e.subscribe("launchpad","deleteTile",this._deleteTile,this);e.subscribe("launchpad","moveTile",this._moveTile,this);e.subscribe("launchpad","sortableStart",this._sortableStart,this);e.subscribe("launchpad","sortableStop",this._sortableStop,this);e.subscribe("showCatalog",this.loadAllCatalogs,this);this.oPageBuilderService.registerTileActionsProvider(function(T){jQuery.sap.require("sap.m.MessageBox");return[{text:"Remove",press:function(){t._deleteTile(null,null,{originalTileId:t.oPageBuilderService.getTileId(T)});}},{text:sap.ushell.resources.i18n.getText('moveTileDialog_action'),press:function(E){t.tileUuid=t.getModelTileById(t.oPageBuilderService.getTileId(T)).uuid;if(!t.moveDialog){t.createMoveActionDialog();}t.moveDialog.getBinding("items").filter([t.oGroupNotLockedFilter]);t.moveDialog.open();}}];});this.oDashboardView.addEventDelegate({onBeforeFirstShow:jQuery.proxy(function(a){try{this.loadPersonalizedGroups();}catch(b){window.console.log("DahsboardManager ; oDashboardView.addEventDelegate failed ; exception: "+b);}},this),onAfterHide:jQuery.proxy(function(a){try{sap.ushell.utils.setTilesNoVisibility();}catch(b){window.console.log("DahsboardManager ; Call to _sap.ushell.utils.setTilesNoVisibility failed ; exception: "+b);}},this)});},destroy:function(){var e=sap.ui.getCore().getEventBus();e.unsubscribe("launchpad","addBookmarkTile",this._createBookmark,this);e.unsubscribe("launchpad","loadDashboardGroups",this.loadPersonalizedGroups,this);e.unsubscribe("launchpad","createGroupAt",this._createGroupAt,this);e.unsubscribe("launchpad","createGroup",this._createGroup,this);e.unsubscribe("launchpad","deleteGroup",this._deleteGroup,this);e.unsubscribe("launchpad","resetGroup",this._resetGroup,this);e.unsubscribe("launchpad","changeGroupTitle",this._changeGroupTitle,this);e.unsubscribe("launchpad","moveGroup",this._moveGroup,this);e.unsubscribe("launchpad","deleteTile",this._deleteTile,this);e.unsubscribe("launchpad","moveTile",this._moveTile,this);e.unsubscribe("launchpad","sortableStart",this._sortableStart,this);e.unsubscribe("launchpad","sortableStop",this._sortableStop,this);e.unsubscribe("showCatalog",this.loadAllCatalogs,this);e.unsubscribe("sap.ushell.services.Bookmark","bookmarkTileAdded",this._addBookmarkToModel,this);e.unsubscribe("sap.ushell.services.Bookmark","bookmarkTileDeleted",this.loadPersonalizedGroups,this);this.oDashboardView.destroy();sap.ushell.renderers.fiori2.launchpad.getDashboardManager=undefined;},_refreshTiles:function(){var t=this,G=this.oModel.getProperty("/groups");jQuery.each(G,function(n,o){jQuery.each(o.tiles,function(n,T){t.oPageBuilderService.refreshTile(T.object);});});},_sortableStart:function(){this.oSortableDeferred=$.Deferred();},_createBookmark:function(C,e,d){var t=d.group?d.group.object:"";delete d.group;this._addRequest($.proxy(function(){var r=sap.ushell.Container.getService("Bookmark").addBookmark(d,t),R=sap.ushell.resources.i18n;r.always($.proxy(this._checkRequestQueue,this));r.done(function(){if(sap.ushell.Container){sap.ushell.Container.getService('Message').info(R.getText('tile_created_msg'));}});r.fail(function(m){jQuery.sap.log.error("Failed to add bookmark",m,"sap.ushell.ui.footerbar.AddBookmarkButton");if(sap.ushell.Container){sap.ushell.Container.getService('Message').error(R.getText('fail_to_add_tile_msg'));}});},this));},_addBookmarkToModel:function(C,e,d){var t=d.tile,G=d.group;if(!d||!t){this.loadPersonalizedGroups();return;}var i=G?G.isGroupLocked:false,n=this._getTileModel(t,i),a=G?this._getIndexOfGroupByObject(G):0,b=this.oModel.getProperty("/groups/"+a);b.tiles.push(n);this.oModel.setProperty("/groups/"+a,b);},_sortableStop:function(){this.oSortableDeferred.resolve();},_handleAfterSortable:function(f){return $.proxy(function(){var o=Array.prototype.slice.call(arguments);this.oSortableDeferred.done(function(){f.apply(null,o);});},this);},_addRequest:function(r){this.aRequestQueue.push(r);if(!this.bRequestRunning){this.bRequestRunning=true;this.aRequestQueue.shift()();}},_checkRequestQueue:function(){if(this.aRequestQueue.length===0){this.bRequestRunning=false;}else{this.aRequestQueue.shift()();}},_requestFailed:function(){this.aRequestQueue=[];this.bRequestRunning=false;},_createGroup:function(C,e,d){var G=this._getGroupModel(null),a=this.oModel.getProperty("/groups"),m=this.oModel;m.setProperty("/groupList-skipScrollToGroup",true);window.setTimeout(function(){m.setProperty("/groups/"+a.length,G);},500);window.setTimeout(function(){m.setProperty("/groupList-skipScrollToGroup",false);},1000);},_createGroupAt:function(C,e,d){var n=parseInt(d.location,10),G=this.oModel.getProperty("/groups"),o=this._getGroupModel(null,false,n===G.length),m=this.oModel,i;o.index=n;G.splice(n,0,o);for(i=0;i<G.length-1;i++){G[i].isLastGroup=false;}for(i=n+1;i<G.length;i++){G[i].index++;}m.setProperty("/groups",G);},_getIndexOfGroup:function(G){var n=null,a=this.oModel.getProperty("/groups");jQuery.each(a,function(b,o){if(o.groupId===G){n=b;return false;}});return n;},_getIndexOfGroupByObject:function(G){var n=null,a=this.oModel.getProperty("/groups"),s=this.oPageBuilderService.getGroupId(G);a.forEach(function(m,b){var C=this.oPageBuilderService.getGroupId(m.object);if(C===s){n=b;return false;}}.bind(this));return n;},_getPathOfGroup:function(G){return"/groups/"+this._getIndexOfGroup(G);},_getPathOfTile:function(t){var G=this.oModel.getProperty("/groups"),n=null,a=null;jQuery.each(G,function(b,o){jQuery.each(o.tiles,function(d,T){if(T.uuid===t){n=b;a=d;return false;}});if(n!==null){return false;}});return n!==null?"/groups/"+n+"/tiles/"+a:null;},_moveInArray:function(a,n,b){if(b>=a.length){var k=b-a.length;while((k--)+1){a.push(undefined);}}a.splice(b,0,a.splice(n,1)[0]);},_updateGroupIndices:function(a){var k;for(k=0;k<a.length;k++){a[k].index=k;}},_deleteGroup:function(C,e,d){var t=this,G=d.groupId,a=this.oModel.getProperty("/groups"),n=this._getIndexOfGroup(G),i=a.length-1===n,o=null,r,m,b,B;b=i?n-1:n;this._destroyGroupModel("/groups/"+n);o=a.splice(n,1)[0].object;if(i){this.oModel.setProperty("/groups/"+b+"/isLastGroup",i);}m=this.oModel;m.setProperty("/groupList-skipScrollToGroup",true);m.setProperty("/groups",a);this._updateGroupIndices(a);if(b>=0){B=sap.ui.getCore().getEventBus();window.setTimeout($.proxy(B.publish,B,"launchpad","scrollToGroup",{groupId:this.oModel.getProperty("/groups")[b].groupId}),200);}window.setTimeout(function(){m.setProperty("/groupList-skipScrollToGroup",false);},1000);this._addRequest($.proxy(function(){var f=sap.ushell.Container.getService("LaunchPage").getGroupTitle(o);try{r=this.oPageBuilderService.removeGroup(o);}catch(h){this._resetGroupsOnFailure("fail_to_delete_group_msg");return;}r.done($.proxy(this._showLocalizedMessage("group_deleted_msg",[f])));r.fail(this._handleAfterSortable(t._resetGroupsOnFailureHelper("fail_to_delete_group_msg")));r.always($.proxy(this._checkRequestQueue,this));},this));},_resetGroup:function(C,e,d){var t=this,G=d.groupId,n=this._getIndexOfGroup(G),o=this.oModel.getProperty("/groups/"+n),r;this.oModel.setProperty("/groups/"+n+"/sortable",false);this._addRequest($.proxy(function(){try{r=this.oPageBuilderService.resetGroup(o.object);}catch(a){this._resetGroupsOnFailure("fail_to_reset_group_msg");return;}r.done(this._handleAfterSortable($.proxy(function(G,o,R){var n=t._getIndexOfGroup(G);this._loadGroup(n,R||o.object);this._showLocalizedMessage("group_reset_msg",[o.title]);this.oModel.setProperty("/groups/"+n+"/sortable",true);var b=sap.ui.getCore().byId('dashboardGroups').getGroupControlByGroupId(G);if(b){b.rerender();}},this,G,o)));r.fail(this._handleAfterSortable(t._resetGroupsOnFailureHelper("fail_to_reset_group_msg")));r.always($.proxy(this._checkRequestQueue,this));},this));},_moveGroup:function(C,e,d){var f=d.fromIndex,t=d.toIndex,G=this.oModel.getProperty("/groups"),m=this.oModel,a=this.oModel.getProperty("/tileActionModeActive"),r;if(!a){f=this._adjustFromGroupIndex(f,G);}var o=G[f],s=o.groupId;if(!a){t=this._adjustToGroupIndex(t,G,s);}this._moveInArray(G,f,t);this._updateGroupIndices(G);m.setProperty("/groupList-skipScrollToGroup",true);for(var i=0;i<G.length-1;i++){G[i].isLastGroup=false;}G[G.length-1].isLastGroup=true;m.setProperty("/groups",G);window.setTimeout(function(){m.setProperty("/groupList-skipScrollToGroup",false);},1000);this._addRequest($.proxy(function(){var o=this.oModel.getProperty(this._getPathOfGroup(s));try{r=this.oPageBuilderService.moveGroup(o.object,t);}catch(b){this._resetGroupsOnFailure("fail_to_move_group_msg");return;}r.fail(this._handleAfterSortable(this._resetGroupsOnFailureHelper("fail_to_move_group_msg")));r.always($.proxy(this._checkRequestQueue,this));},this));},_adjustToGroupIndex:function(t,a,b){var v=0,I=false,i=0;for(i=0;i<a.length&&v<t;i++){if(a[i].isGroupVisible){if(a[i].groupId===b){I=true;}else{v++;}}}if(I){return i-1;}return i;},_adjustFromGroupIndex:function(a,b){var v=0,i;for(i=0;i<b.length;i++){if(b[i].isGroupVisible){v++;}if(v===a+1){return i;}}return a;},_changeGroupTitle:function(C,e,d){var n=d.newTitle,G=this.oModel.getProperty("/groups"),s=d.groupId,a=this._getIndexOfGroup(s),o=this.oModel.getProperty("/groups/"+a),r;this.oModel.setProperty("/groups/"+a+"/title",n);if(!o.object){this._addRequest($.proxy(function(){try{if(a===G.length-1){r=this.oPageBuilderService.addGroup(n,a);}else{r=this.oPageBuilderService.addGroupAt(n,a);}}catch(b){this._resetGroupsOnFailure("fail_to_create_group_msg");return;}r.done(this._handleAfterSortable($.proxy(function(s,N){var a=this._getIndexOfGroup(s);this._loadGroup(a,N);},this,s)));r.fail(this._handleAfterSortable(this._resetGroupsOnFailureHelper("fail_to_create_group_msg")));},this));}else{this._addRequest($.proxy(function(){try{r=this.oPageBuilderService.setGroupTitle(o.object,n);}catch(b){this._resetGroupsOnFailure("fail_to_rename_group_msg");return;}r.fail(this._handleAfterSortable($.proxy(function(s,O){var f=this._getPathOfGroup(s);this._showLocalizedError("fail_to_rename_group_msg");this.oModel.setProperty(f+"/title",O);this._requestFailed();},this,s)));},this));}r.always($.proxy(this._checkRequestQueue,this));},_createTile:function(d){var C=d.catalogTileContext,o=d.groupContext,G=this.oModel.getProperty(o.getPath()),s=G.groupId,r,a=jQuery.Deferred(),R={};var b=sap.ui.getCore().getEventBus();$.proxy(b.publish,b,"launchpad","addTile",{catalogTileContext:C,groupContext:o});if(!C){jQuery.sap.log.warning("DashboardManager: Did not receive catalog tile object. Abort.",this);return;}this._addRequest($.proxy(function(){try{r=this.oPageBuilderService.addTile(C.getProperty("src"),o.getProperty("object"));}catch(e){this._resetGroupsOnFailure("fail_to_add_tile_msg");return;}var t=this;r.done(this._handleAfterSortable($.proxy(function(s,T){var f=this._getPathOfGroup(s);this._addTileToGroup(f,T);R={group:G,status:1,action:'add'};a.resolve(R);},this,s))).fail(function(){R={group:G,status:0,action:'add'};a.resolve(R);}).always(function(){t._checkRequestQueue();});},this));return a.promise();},_createGroupAndSaveTile:function(d){var C=d.catalogTileContext,n=d.newGroupName,r,a=jQuery.Deferred(),R={};if(sap.ushell.utils.validHash(n)&&C){var G=this._getGroupModel(null,false,true),b=this.oModel.getProperty("/groups"),s=G.groupId;var i=b.length;b[i-1].isLastGroup=false;G.title=n;G.index=i;b.push(G);this.oModel.setProperty("/groups/",b);if(!C){jQuery.sap.log.warning("DashboardManager: Did not receive catalog tile object. Abort.",this);return;}this._addRequest($.proxy(function(){try{r=this.oPageBuilderService.addGroup(n);}catch(e){this._resetGroupsOnFailure("fail_to_create_group_msg");return;}r.done(this._handleAfterSortable($.proxy(function(s,N){var f=this._getIndexOfGroup(s);this._loadGroup(f,N);var o=new sap.ui.model.Context(this.oModel,"/groups/"+f);var p=this._createTile({catalogTileContext:C,groupContext:o});p.done(function(h){R={group:h.group,status:1,action:'addTileToNewGroup'};a.resolve(R);}).fail(function(h){R={group:h.group,status:0,action:'addTileToNewGroup'};a.resolve(R);});},this,s)));r.fail(function(f){this._handleAfterSortable(this._resetGroupsOnFailureHelper("fail_to_create_group_msg"));R={group:f.group,status:0,action:'createNewGroup'};a.resolve(R);});r.always($.proxy(this._checkRequestQueue,this));},this));}return a.promise();},_deleteTile:function(C,e,d){var t=this,T=d.tileId||d.originalTileId,G=this.oModel.getProperty("/groups");jQuery.each(G,function(n,o){var f=false;jQuery.each(o.tiles,function(a,b){if(b.uuid===T||b.originalTileId===T){t._destroyTileModel("/groups/"+n+"/tiles/"+a);var h=o.tiles.splice(a,1)[0],r;t.oModel.setProperty("/groups/"+n+"/tiles",o.tiles);t._addRequest(function(){try{r=t.oPageBuilderService.removeTile(o.object,h.object);}catch(i){this._resetGroupsOnFailure("fail_to_remove_tile_msg");return;}r.done(t._handleAfterSortable(function(){var s=sap.ushell.Container.getService("LaunchPage").getTileTitle(h.object);if(s){t._showLocalizedMessage("tile_deleted_msg",[s,o.title]);}else{t._showLocalizedMessage("tile_deleted_msg",[s,o.title]);}}));r.fail(t._handleAfterSortable(t._resetGroupsOnFailureHelper("fail_to_remove_tile_msg")));r.always($.proxy(t._checkRequestQueue,t));});sap.ushell.utils.handleTilesVisibility();f=true;return false;}});if(f){return false;}});},_sendDeleteTileRequest:function(G,t){var r,a=sap.ushell.Container.getService('LaunchPage');try{r=a.removeTile(G,t.object);}catch(e){jQuery.sap.log.error("_deleteCatalogTileFromGroup ; removeTile ; Exception occurred: "+e);}return r;},_deleteCatalogTileFromGroup:function(d){var t=this,D=decodeURIComponent(d.tileId),G=d.groupIndex,o=this.oModel.getProperty("/groups/"+G),s=sap.ushell.Container.getService("LaunchPage"),a=jQuery.Deferred(),b=[],t=this,f;f=o.tiles.filter(function(T){var e=s.getCatalogTileId(T.object);if(e!==D){return true;}else{var p=jQuery.Deferred(),h=t._sendDeleteTileRequest(o.object,T);h.done((function(a){return function(){a.resolve({status:true});};})(p));h.fail((function(a){return function(){a.resolve({status:false});};})(p));b.push(p);return false;}});o.tiles=f;jQuery.when.apply(jQuery,b).done(function(r){var S=true,i=0,p=b.length;for(i;i<p;i++){if(!r.status){S=false;break;}}if(S){t.oModel.setProperty("/groups/"+G,o);}a.resolve({group:o,status:S,action:'remove'});});return a.promise();},_moveTile:function(C,e,d){var t=this,n=d.toIndex,N=d.toGroupId,T=d.sTileId,o,a,O,b,f,h,G=this.oModel.getProperty("/groups");jQuery.each(G,function(j,k){var F=false;jQuery.each(k.tiles,function(l,m){if(m.uuid===T){o=m;a=l;O=k;b=j;F=true;return false;}});if(F){return false;}});jQuery.each(G,function(j,k){if(k.groupId===N){f=k;h=j;}});if(n&&n>f.tiles.length){n=f.tiles.length;}if(O.groupId===N){if(n===null||n===undefined){O.tiles.splice(a,1);n=O.tiles.length;O.tiles.push(o);}else{n=this._adjustTileIndex(n,o,O);this._moveInArray(O.tiles,a,n);}this.oModel.setProperty("/groups/"+b+"/tiles",O.tiles);}else{O.tiles.splice(a,1);this.oModel.setProperty("/groups/"+b+"/tiles",O.tiles);if(n===null||n===undefined){n=f.tiles.length;f.tiles.push(o);}else{n=this._adjustTileIndex(n,o,f);f.tiles.splice(n,0,o);}this.oModel.setProperty("/groups/"+h+"/tiles",f.tiles);}sap.ushell.utils.handleTilesVisibility();var s=this.oModel.getProperty("/groups/"+b).object,i=this.oModel.getProperty("/groups/"+h).object,r;this._addRequest($.proxy(function(){try{r=this.oPageBuilderService.moveTile(o.object,a,n,s,i);}catch(j){this._resetGroupsOnFailure("fail_to_move_tile_msg");return;}o.tileIsBeingMoved=true;r.done(this._handleAfterSortable($.proxy(function(T,k){var l=this._getPathOfTile(T);if(l){this.oModel.setProperty(l+"/object",k);this.oModel.setProperty(l+"/originalTileId",this.oPageBuilderService.getTileId(k));this.oPageBuilderService.getTileView(k).done(function(v){var m=this.oModel.getProperty(l+"/content");this.oModel.setProperty(l+"/content",[v]);if(m&&m[0]){m[0].destroy();}this.oModel.setProperty(l+"/tileIsBeingMoved",false);}.bind(this));}},this,T)));r.fail(this._handleAfterSortable(this._resetGroupsOnFailureHelper("fail_to_move_tile_msg")));r.always($.proxy(this._checkRequestQueue,this));},this));},_adjustTileIndex:function(n,t,a){var v=0,I=false,i=0;for(i=0;i<a.tiles.length&&v<n;i++){if(a.tiles[i].isTileIntentSupported){if(a.tiles[i]===t){I=true;}else{v++;}}}if(I){return i-1;}return i;},getModel:function(){return this.oModel;},getDashboardView:function(){if(!sap.ui.getCore().byId('dashboard')){this.oDashboardView=sap.ui.jsview("dashboard","sap.ushell.renderers.fiori2.launchpad.dashboard.DashboardContent");}return this.oDashboardView;},getGroupListView:function(){if(!sap.ui.getCore().byId('groupList')){this.oGroupListView=sap.ui.jsview("groupList","sap.ushell.renderers.fiori2.launchpad.group_list.GroupList");}return this.oGroupListView;},isGroupListViewCreated:function(){return this.oGroupListView!=undefined;},loadAllCatalogs:function(C,e,d){if(!this.oModel.getProperty("/catalogs")||!sap.ushell.Container.getService("LaunchPage").isCatalogsValid()){var t=this;if(!this.oModel.getProperty("/groups")||this.oModel.getProperty("/groups").length===0){this.loadPersonalizedGroups();}this.numOfLoadedCatalogs=0;this._destroyAllGroupModels("/catalogs");this._destroyAllTileModels("/catalogTiles");this.oModel.setProperty("/catalogs",[]);this.oModel.setProperty("/catalogTiles",[]);this.aPromises=[];sap.ushell.Container.getService("LaunchPage").getCatalogs().done(function(a){jQuery.when.apply(jQuery,this.aPromises).then(this.onDoneLoadingCatalogs(a));}.bind(this)).fail(t._showLocalizedErrorHelper("fail_to_load_catalog_msg")).progress(this.addCatalogToModel.bind(this));}var G=this.getModel().getProperty("/groups");if(G&&G.length!==0){this.mapCatalogTilesToGroups();this.updateCatalogTilesToGroupsMap();}},updateCatalogTilesToGroupsMap:function(){var a=this.getModel().getProperty("/catalogTiles"),t,i,b,d,G;var s=sap.ushell.Container.getService("LaunchPage");var e=this.getModel().getProperty("/catalogTiles");if(a){for(i=0;i<a.length;i++){t=a[i];b=encodeURIComponent(s.getCatalogTileId(t.src));d=this.getModel().getProperty("/catalogTiles/"+i+"/associatedGroups");G=this.oTileCatalogToGroupsMap[b];d=G?G:[];e[i].associatedGroups=d;}}this.getModel().setProperty("/catalogTiles",e);},addCatalogToModel:function(C){var a=this.oModel.getProperty('/catalogs'),s=sap.ushell.Container.getService("LaunchPage"),b=s.getCatalogId(C),d=s.getCatalogTitle(C),e=false;a.forEach(function(f){if(f.id===b){e=true;}});if(!e){var o={title:s.getCatalogTitle(C),id:s.getCatalogId(C),"static":false,tiles:[],numberOfTiles:0},p;p=s.getCatalogTiles(C);this.aPromises.push(p);p.done(function(t){if(!t.length){return;}var f={catalog:o.title,id:o.id,index:this.numOfLoadedCatalogs,numberOfExistingTiles:0};var u=function(){if(!this.oModel.getProperty('/isCatalogInUpdate')){this.oModel.setProperty('/isCatalogInUpdate',true);var E=this.searchModelCatalogByTitle(o.title);if(E.result){f.index=E.indexOfPreviousInstanceInPage;f.numberOfExistingTiles=E.numOfTilesInCatalog;this.setCatalogTiles("/catalogTiles",true,f,t);var h=this.oModel.getProperty('/catalogs');C=h[E.indexOfPreviousInstanceInModel];C.numIntentSupportedTiles=c.call(this,o);C.numberOfTiles=E.numOfTilesInCatalog+t.length;a[E.indexOfPreviousInstanceInModel]=C;}else{this.setCatalogTiles("/catalogTiles",true,f,t);o.numIntentSupportedTiles=c.call(this,o);o.numberOfTiles=t.length;a.push(o);this.numOfLoadedCatalogs++;}this.oModel.setProperty('/catalogs',a);this.oModel.setProperty('/isCatalogInUpdate',false);return;}setTimeout(u,50);}.bind(this);u();}.bind(this)).fail(this._showLocalizedErrorHelper("fail_to_load_catalog_tiles_msg"));}},searchModelCatalogByTitle:function(a){var b=this.oModel.getProperty('/catalogs'),d=false,i,n=0,G=false;$.each(b,function(e,t){if(t.title===sap.ushell.resources.i18n.getText('catalogsLoading')){G=true;}else if(a==t.title){i=e;n=t.numberOfTiles;d=true;return false;}});return{result:d,indexOfPreviousInstanceInModel:i,indexOfPreviousInstanceInPage:G?i-1:i,numOfTilesInCatalog:n};},getTagList:function(m){var i={},d=0,t=[],e,T,s;for(d=0;d<this.tagsPool.length;d++){T=this.tagsPool[d];if(i[T]){i[T]++;}else{i[T]=1;}}for(e in i){t.push({tag:e,occ:i[e]});}s=t.sort(function(a,b){return b.occ-a.occ;});if(s.length===0){this.oModel.setProperty("/tagFiltering",false);}if(m){this.oModel.setProperty("/tagList",s.slice(0,m));}else{this.oModel.setProperty("/tagList",s);}},onDoneLoadingCatalogs:function(C){var s=sap.ushell.Container.getService("LaunchPage");var l=C.filter(function(o){return!s.getCatalogError(o);});if(l.length!==C.length){this._showLocalizedError("partialCatalogFail");}if(this.oModel.getProperty("/tagFiltering")==true){this.getTagList();}var a=this.oModel.getProperty('/catalogs');if(a[0]&&a[0].title===sap.ushell.resources.i18n.getText('catalogsLoading')){a.splice(0,1);}a.splice(0,0,{title:g("catalogSelect_initial_selection"),"static":true,tiles:[],numIntentSupportedTiles:-1});this.oModel.setProperty('/catalogs',a);sap.ushell.utils.handleTilesVisibility();},setCatalogTiles:function(p,a,d,C){var s=sap.ushell.Container.getService("LaunchPage"),u=$.map(C,function(o,t){var b=encodeURIComponent(s.getCatalogTileId(o)),e=this.oTileCatalogToGroupsMap[b]||[],f=s.getCatalogTileTags(o)||[];if(f.length>0){this.tagsPool=this.tagsPool.concat(f);}return{associatedGroups:e,src:o,catalog:d.catalog,catalogIndex:this.calculateCatalogTileIndex(d.index,d.numberOfExistingTiles,t),catalogId:d.id,title:s.getCatalogTileTitle(o),tags:f,keywords:(s.getCatalogTileKeywords(o)||[]).join(','),id:b,size:s.getCatalogTileSize(o),content:[s.getCatalogTileView(o)],isTileIntentSupported:s.isTileIntentSupported(o)};}.bind(this));this.oModel.setProperty(p,$.merge((a&&this.oModel.getProperty(p))||[],u));},calculateCatalogTileIndex:function(a,n,t){var r=parseInt(a*100000);r+=(n!==undefined?n:0)+t;return r;},mapCatalogTilesToGroups:function(){this.oTileCatalogToGroupsMap={};var G=this.oModel.getProperty("/groups"),s=sap.ushell.Container.getService("LaunchPage"),i=0,o,t,T,a,b,d;for(i=0;i<G.length;i++){o=G[i];T=o.tiles;if(T){for(t=0;t<T.length;++t){a=encodeURIComponent(s.getCatalogTileId(T[t].object));b=this.oTileCatalogToGroupsMap[a]||[];d=s.getGroupId(o.object);if(b.indexOf(d)===-1&&(typeof(o.isGroupVisible)==='undefined'||o.isGroupVisible)&&!o.isGroupLocked){b.push(d);}this.oTileCatalogToGroupsMap[a]=b;}}}},_showLocalizedMessage:function(m,p,t){sap.ushell.Container.getService("Message").show(t||sap.ushell.services.Message.Type.INFO,g(m,p),p);},_showLocalizedError:function(m,p){this._showLocalizedMessage(m,p,sap.ushell.services.Message.Type.ERROR);},_showLocalizedErrorHelper:function(m,p){var t=this;return function(){t._showLocalizedError(m,p);};},_resetGroupsOnFailureHelper:function(m){var t=this;return function(G){t._showLocalizedError(m);setTimeout(function(){t.loadGroupsFromArray(G);});};},_resetGroupsOnFailure:function(m,p){this._requestFailed();this._showLocalizedError(m,p);this.loadPersonalizedGroups();this.oModel.updateBindings(true);},loadGroupsFromArray:function(G){var t=this;this.oPageBuilderService.getDefaultGroup().done(function(d){var i=0,l=[],b,a=G.indexOf(d),n=jQuery.grep(G,function(h){return t.oPageBuilderService.isGroupLocked(h);}).length,N,e=[];G.splice(a,1);while(i<G.length){var o=G[i],f=t.oPageBuilderService.isGroupLocked(o);if(f){l.push(o);G.splice(i,1);}else{i++;}}l.sort(function(x,y){var h=t.oPageBuilderService.getGroupTitle(x).toLowerCase(),j=t.oPageBuilderService.getGroupTitle(y).toLowerCase();return h<j?-1:1;});b=l;b.push(d);b.push.apply(b,G);G=b;t.oModel.setProperty("/groups/indexOfDefaultGroup",n);for(i=G.length;i<t.oModel.getProperty("/groups/length");++i){t._destroyGroupModel("/groups/"+i);}for(i=0;i<G.length;++i){N=t._getGroupModel(G[i],i===n,i===G.length-1);N.index=i;e.push(N);}t.oModel.setProperty('/groups',e);t.oModel.setProperty("/groups/length",G.length);if(t.oModel.getProperty('/currentState/stateName')==="catalog"){t.mapCatalogTilesToGroups();t.updateCatalogTilesToGroupsMap();}}).fail(t._resetGroupsOnFailureHelper("fail_to_get_default_group_msg"));},_loadGroup:function(n,G){var t=this,s="/groups/"+n,d=t.oModel.getProperty("/groups/indexOfDefaultGroup"),i=t.oModel.getProperty(s).isLastGroup;this._destroyGroupModel(s);var o=this.oModel.getProperty(s+"/groupId"),N=this._getGroupModel(G,n===d,i);if(o){N.groupId=o;}N.index=n;this.oModel.setProperty(s,N);},_getGroupModel:function(G,d,l){var s=this.oPageBuilderService,a=(G&&s.getGroupTiles(G))||[],m=[],i,b,S=sap.ui.getCore().byId("shell"),M,e,f;if(S){M=S.getModel();b=M.getProperty("/personalization");e=M.getProperty("/currentState").stateName;if(e){f=e==="home";}}var h=G&&s.isGroupLocked(G)?true:false;for(i=0;i<a.length;++i){m.push(this._getTileModel(a[i],h));}return{title:(d&&g("my_group"))||(G&&s.getGroupTitle(G))||"",object:G,groupId:jQuery.sap.uid(),tiles:m,isDefaultGroup:d||false,editMode:!G&&f,isGroupLocked:h,removable:!G||s.isGroupRemovable(G),sortable:b,isGroupVisible:!G||s.isGroupVisible(G),isEnabled:!d,isLastGroup:l||false};},_addTileToGroup:function(G,t){var T=G+"/tiles",n=this.oModel.getProperty(T).length;var i=this.oModel.getProperty(G+"/isGroupLocked");this.oModel.setProperty(T+"/"+n,this._getTileModel(t,i));},_updateModelWithTileView:function(t,T){var a=this;this.tileViewUpdateQueue.push({uuid:t,view:T});if(this.tileViewUpdateTimeoutID){clearTimeout(this.tileViewUpdateTimeoutID);}this.tileViewUpdateTimeoutID=setTimeout(function(){a.tileViewUpdateTimeoutID=undefined;a.oSortableDeferred.done(function(){a._updateModelWithTilesViews();});},50);},_updateModelWithTilesViews:function(){var G=this.oModel.getProperty("/groups"),t,T,u,s,b,l,r={};if(!G){return;}for(var i=0;i<G.length;i=i+1){t=G[i].tiles;for(var j=0;j<t.length;j=j+1){T=t[j];for(var q=0;q<this.tileViewUpdateQueue.length;q++){u=this.tileViewUpdateQueue[q];if(T.uuid==u.uuid){if(u.view){T.content[0].destroy();T.content=[u.view];s=this.oPageBuilderService.getTileSize(T.object);l=((s!==null)&&(s==="1x2"||s==="2x2"))||false;b=((s!==null)&&(s==="2x1"||s==="2x2"))||false;if(T['long']!==l||T.tall!==b){T['long']=l;T.tall=b;r[G[i].groupId]=true;}}else{T.content[0].setState("Failed");}break;}}}}this.tileViewUpdateQueue=[];this.oModel.setProperty("/groups",G);if(!jQuery.isEmptyObject(r)){var d=this.getDashboardView();var a=d.oDashboardGroupsBox.getGroups();for(var e in r){for(var i=0;i<a.length;i++){if(a[i].getGroupId()===e){sap.ushell.Layout.reRenderGroupLayout(a[i]);break;}}}}},getModelTileById:function(i){var G=this.oModel.getProperty('/groups'),m;G.forEach(function(o){o.tiles.forEach(function(t){if(t.uuid===i||t.originalTileId===i){m=t;return;}});});return m;},_getTileModel:function(t,i){var s=this.oPageBuilderService,S=s.getTileSize(t),T=jQuery.sap.uid(),o,u,a=this,d;s.setTileVisible(t,false);d=s.getTileView(t);d.done(function(v){o=v;if(u){u.apply(a,[T,o]);}});d.fail(function(){if(u){u.apply(a,[T]);}else{jQuery.sap.require('sap.ushell.ui.launchpad.TileState');o=new sap.ushell.ui.launchpad.TileState({state:"Failed"});}});if(!o){u=this._updateModelWithTileView;jQuery.sap.require('sap.ushell.ui.launchpad.TileState');o=new sap.ushell.ui.launchpad.TileState({state:"Loading"});}return{"object":t,"originalTileId":s.getTileId(t),"uuid":T,"tileCatalogId":encodeURIComponent(s.getCatalogTileId(t)),"content":[o],"long":((S!==null)&&(S==="1x2"||S==="2x2"))||false,"tall":((S!==null)&&(S==="2x1"||S==="2x2"))||false,"target":s.getTileTarget(t)||"","debugInfo":s.getTileDebugInfo(t),"isTileIntentSupported":s.isTileIntentSupported(t),"rgba":"","isLocked":i,"showActionsIcon":this.oModel.getProperty("/tileActionsIconEnabled")||false};},_destroyAllGroupModels:function(t){var G=(typeof t==="string")?this.oModel.getProperty(t):t,i;if(G){for(i=0;i<G.length;i=i+1){this._destroyGroupModel(G[i]);}}},_destroyGroupModel:function(t){var G=(typeof t==="string")?this.oModel.getProperty(t):t;if(G){this._destroyAllTileModels(G.tiles);}},_destroyAllTileModels:function(t){var T=(typeof t==="string")?this.oModel.getProperty(t):t,i;if(T){for(i=0;i<T.length;i=i+1){this._destroyTileModel(T[i]);}}},_destroyTileModel:function(t){var T=(typeof t==="string")?this.oModel.getProperty(t):t,i;if(T&&T.content){for(i=0;i<T.content.length;i=i+1){T.content[i].destroy();}}},loadPersonalizedGroups:function(){var t=this,G=this.oPageBuilderService.getGroups();G.done(function(a){t.loadGroupsFromArray(a);});G.fail(t._showLocalizedErrorHelper("fail_to_load_groups_msg"));}});}());},"sap/ushell/renderers/fiori2/launchpad/dashboard/DashboardContent.controller.js":function(){(function(){"use strict";jQuery.sap.require("sap.ushell.ui.launchpad.TileContainer");sap.ui.controller("sap.ushell.renderers.fiori2.launchpad.dashboard.DashboardContent",{onInit:function(){var e=sap.ui.getCore().getEventBus();e.subscribe('launchpad','actionModeInactive',this._handleExitActionMode,this);e.subscribe('launchpad','actionModeActive',this._enableGroupsUIActions,this.oView);this.sViewId="#"+this.oView.getId();if(sap.ui.Device.browser.mobile){e.subscribe("launchpad","contentRefresh",this._webkitMobileRenderFix,this);}this.isDesktop=(sap.ui.Device.system.desktop&&(navigator.userAgent.toLowerCase().indexOf('tablet')<0));},onExit:function(){sap.ui.getCore().getEventBus().unsubscribe("launchpad","contentRefresh",this._webkitMobileRenderFix,this);},onAfterRendering:function(){var e=sap.ui.getCore().getEventBus();e.unsubscribe("launchpad","scrollToGroup",this._scrollToGroup,this);e.subscribe("launchpad","scrollToGroup",this._scrollToGroup,this);e.unsubscribe("launchpad","scrollToFirstVisibleGroup",this._scrollToFirstVisibleGroup,this);e.subscribe("launchpad","scrollToFirstVisibleGroup",this._scrollToFirstVisibleGroup,this);if(sap.ui.Device.os.android){e.unsubscribe("launchpad","changeGroupTitle",this._changeGroupTitleHandler,this);e.subscribe("launchpad","changeGroupTitle",this._changeGroupTitleHandler,this);}jQuery("#__area0").appendTo("#shellPage");var t;jQuery(window).bind("resize",function(){clearTimeout(t);t=setTimeout(this._resizeHandler.bind(this),300);}.bind(this));jQuery("#dashboard").scroll(sap.ushell.utils.handleTilesVisibility);},_changeGroupTitleHandler:function(){this._forceBrowserRerenderElement(document.getElementById('groupList'));},_handleClick:function(){if(sap.ui.Device.system.desktop){jQuery('body').removeClass("sapUshellDisableUserSelect");}},_handleActionModeStartDrag:function(e,u){this.uiActions.disable();var t=jQuery(".sapUshellDashboardGroupsContainerItem-clone .sapUshellContainerTitle").height();if(!sap.ui.Device.system.phone){var a=jQuery(".sapUshellDashboardGroupsContainerItem-clone .sapUshellContainerTitle").width();jQuery(".sapUshellDashboardGroupsContainerItem.sapUshellDashboardGroupsContainerItem-clone .tileContainerEditMode").offset({top:this.uiEditModeActions.startY-t,left:this.uiEditModeActions.startX-(a/2)-16});jQuery(".sapUshellTileContainerBeforeContent").addClass("sapUshellTileContainerHidden");jQuery(".sapUshellDashboardGroupsContainerItem.sapUshellDashboardGroupsContainerItem-clone .sapUshellContainerTitle").css("width",a+"px");}else{jQuery(".sapUshellTilesContainer-sortable").addClass("sapUshellTileContainerRemoveContent");jQuery(".sapUshellTileContainerBeforeContent").addClass("sapUshellTileContainerRemoveContent");jQuery(".sapUshellContainerHeaderActions").addClass("sapUshellTileContainerHidden");}jQuery(u).find(".sapUshellContainerHeaderActions").addClass("sapUshellTileContainerHidden");sap.ui.getCore().byId("shell").getModel().setProperty('/isInDrag',true);jQuery(u).attr('startPos',jQuery(u).index());window.console.log('startPos - '+jQuery(u).index());setTimeout(function(){sap.ui.getCore().getEventBus().publish("launchpad","sortableStart");},0);var g=jQuery("#dashboardGroups").offset().top,b=jQuery(".sapUshellDashboardGroupsContainerItem-placeholder").offset().top,c=jQuery(".sapUshellDashboardGroupsContainerItem-clone").offset().top,s=b-g-c;jQuery('#dashboard').animate({scrollTop:s},0);},_handleActionModeUIStart:function(e,u){jQuery(u).find(".sapUshellTileContainerContent").css("outline-color","transparent");jQuery('body').addClass("sapUshellDisableUserSelect");},_handleActionModeDrop:function(e,u){if(sap.ui.Device.system.desktop){jQuery('body').removeClass("sapUshellDisableUserSelect");}var b=sap.ui.getCore().getEventBus(),q=jQuery(u),f=jQuery(q.children()[0]).attr("id"),g=sap.ui.getCore().byId(f),d=sap.ui.getCore().byId("dashboardGroups"),D={group:g,groupChanged:false,focus:false},n=q.index();q.startPos=window.parseInt(q.attr('startPos'),10);d.removeAggregation('groups',g,true);d.insertAggregation('groups',g,n,true);this.oController._handleActionModeGroupMove(e,{item:q});q.removeAttr('startPos');sap.ui.getCore().getEventBus().publish("launchpad","sortableStop");setTimeout(function(){jQuery(".sapUshellContainerHeaderActions").removeClass("sapUshellTileContainerHidden");jQuery(".sapUshellTileContainerBeforeContent").removeClass("sapUshellTileContainerHidden");jQuery(".sapUshellTileContainerBeforeContent").removeClass("sapUshellTileContainerRemoveContent");jQuery(".sapUshellTilesContainer-sortable").removeClass("sapUshellTileContainerRemoveContent");},0);window.setTimeout(jQuery.proxy(b.publish,b,"launchpad","scrollToGroup",D),1);this.uiActions.enable();},_handleActionModeGroupMove:function(e,u){var f=u.item.startPos,t=u.item.index();if(f!==t&&t!==-1){this._publishAsync("launchpad","moveGroup",{fromIndex:f,toIndex:t});setTimeout(function(){sap.ui.getCore().byId("shell").getModel().setProperty('/isInDrag',false);},300);}},_handleGroupDeletion:function(g){jQuery.sap.require('sap.m.MessageBox');var e=sap.ui.getCore().getEventBus(),G=g.getObject(),i=G.removable,s=G.title,a=G.groupId,r=sap.ushell.resources.i18n,m=sap.ushell.Container.getService("Message"),A=sap.m.MessageBox.Action,c=(i?A.DELETE:r.getText('ResetGroupBtn'));m.confirm(r.getText(i?'delete_group_msg':'reset_group_msg',s),function(o){if(o===c){e.publish("launchpad",i?'deleteGroup':'resetGroup',{groupId:a});}},r.getText(i?'delete_group':'reset_group'),[c,A.CANCEL]);},_enableGroupsUIActions:function(){this.uiEditModeActions.enable();},_handleExitActionMode:function(c){this.oView.uiEditModeActions.disable();},_forceBrowserRerenderElement:function(e){var a=window.requestAnimationFrame||window.webkitRequestAnimationFrame;if(a){a(function(){var d=e.style.display;e.style.display='none';e.offsetHeight;e.style.display=d;});}else{window.console.log('unsupported browser for animation frame');}},_webkitMobileRenderFix:function(){if(sap.ui.Device.browser.chrome||sap.ui.Device.os.android){this._forceBrowserRerenderElement(document.body);}},_resizeHandler:function(){var c=this.getView().getModel().getProperty("/currentState");this._addBottomSpace();sap.ushell.utils.handleTilesVisibility();if(sap.ushell.Layout&&c.stateName==="home"){sap.ushell.Layout.reRenderGroupsLayout(null,true);}},_addBottomSpace:function(){sap.ushell.utils.addBottomSpace();},_scrollToFirstVisibleGroup:function(c,e,d){var g,f=0,t=this;if(d.group){g=d.group.getGroupId();}else{g=d.groupId;}if(d.fromTop){f=d.fromTop-50;}jQuery.each(this.oView.oDashboardGroupsBox.getGroups(),function(n,G){if(G.getGroupId()===g){var y;y=-1*(document.getElementById('dashboardGroups').getBoundingClientRect().top)+document.getElementById(G.sId).getBoundingClientRect().top;jQuery('#dashboard').animate({scrollTop:y-f},0,t.fHandleScrollEnd);if(d.group&&d.focus){jQuery.sap.byId(G.sId).focus();}return false;}});sap.ushell.utils.addBottomSpace();},_scrollToGroup:function(c,e,d){var g,t=this;if(d.group){g=d.group.getGroupId();}else{g=d.groupId;}jQuery.each(this.oView.oDashboardGroupsBox.getGroups(),function(n,G){if(G.getGroupId()===g){var y;y=-1*(document.getElementById('dashboardGroups').getBoundingClientRect().top)+document.getElementById(G.sId).getBoundingClientRect().top;jQuery('#dashboard').animate({scrollTop:y},500,t.fHandleScrollEnd);if(d.group&&d.focus){jQuery.sap.byId(G.sId).focus();}if(d.groupId||d.groupChanged){t._addBottomSpace();}jQuery('#groupList li').removeClass('sapUshellSelected').eq(n).addClass('sapUshellSelected');sap.ushell.utils.handleTilesVisibility();return false;}});},fHandleScrollEnd:function(){var e=sap.ui.getCore().getEventBus();e.publish("grouplist","ScrollAnimationEnd");},_handleDrop:function(e,u){if(sap.ui.Device.system.desktop){jQuery('body').removeClass("sapUshellDisableUserSelect");}var t=sap.ushell.Layout.getLayoutEngine().layoutEndCallback();var E=sap.ui.getCore().getEventBus();if(!t.tileMovedFlag){return;}var n=true,a=true;if((t.srcGroup!==t.dstGroup)){n=a=false;}else if(t.tile!==t.dstGroup.getTiles()[t.dstTileIndex]){a=false;}t.srcGroup.removeAggregation('tiles',t.tile,n);t.dstGroup.insertAggregation('tiles',t.tile,t.dstTileIndex,a);E.publish("launchpad","moveTile",{sTileId:t.tile.getUuid(),toGroupId:t.dstGroup.getGroupId(),toIndex:t.dstTileIndex});E.publish("launchpad","sortableStop");},_publishAsync:function(c,e,d){var b=sap.ui.getCore().getEventBus();window.setTimeout(jQuery.proxy(b.publish,b,c,e,d),1);}});}());},"sap/ushell/renderers/fiori2/launchpad/dashboard/DashboardContent.view.js":function(){(function(){"use strict";jQuery.sap.require("sap.ushell.ui.launchpad.TileContainer");jQuery.sap.require("sap.ushell.ui.launchpad.Tile");jQuery.sap.require("sap.ushell.override");jQuery.sap.require("sap.ushell.resources");jQuery.sap.require("sap.ushell.Layout");sap.ui.jsview("sap.ushell.renderers.fiori2.launchpad.dashboard.DashboardContent",{createContent:function(c){this.bAnimate=false;this.isTouch=!sap.ui.Device.system.desktop;this.oDashboardGroupsBox=this._getDashboardGroupsBox(c);var f=new sap.m.Button('firstHiddenDashboardTabFocusHelper');f.addEventDelegate({onfocusin:function(){try{var s=sap.ui.getCore().byId('shell').getModel().getData();if(s.currentState.showPane){var g=sap.ui.getCore().byId('groupListPage');var a=g.getFooter();jQuery(a.getDomRef()).find("[tabindex=0]").last().focus();}else{sap.ui.getCore().byId('actionsBtn').focus();}}catch(e){}}});var l=new sap.m.Button('lastHiddenDashboardTabFocusHelper');l.addEventDelegate({onfocusin:function(){try{sap.ui.getCore().byId('floatingActionBtn').getDomRef().focus();}catch(e){}}});return[f,this.oDashboardGroupsBox,l];},_getDashboardGroupsBox:function(c){var t=this;var T=this._getTileContainerTemplate(c),v=this.getViewData(),C;if(v){C=v.config;}var E=function(){if(C&&C.enableLockedGroupsCompactLayout&&!t.getModel().getProperty('/tileActionModeActive')){return true;}return false;};var a=function(){if(!sap.ushell.Layout.isInited){sap.ushell.Layout.init({getGroups:this.getGroups.bind(this),isLockedGroupsCompactLayoutEnabled:E});sap.ui.Device.media.attachHandler(function(){var s=this.getModel().getProperty("/currentState");if(s.stateName==="home"){sap.ushell.Layout.reRenderGroupsLayout(null,true);}},this,sap.ui.Device.media.RANGESETS.SAP_STANDARD);}if(this.getGroups().length){if(this.getModel().getProperty("/personalization")){t._disableUIActions();t._disableEditModeUIActions();t.uiActions=new sap.ushell.UIActions({containerSelector:'#dashboardGroups',wrapperSelector:'#dashboard',draggableSelector:".sapUshellTile[role='link']",draggableSelectorExclude:".sapUshellPlusTile",rootSelector:"#shell-container",placeHolderClass:"sapUshellTile-placeholder",cloneClass:"sapUshellTile-clone",scrollContainerSelector:t.bAnimate?"#cloneArea":undefined,clickCallback:c._handleClick.bind(t),startCallback:t._handleTileUIStart.bind(t),endCallback:t._handleDrop.bind(t),dragCallback:t._handleStartDrag.bind(t),dragAndScrollCallback:t._handleDragMove.bind(t),moveTolerance:t.isTouch?10:3,switchModeDelay:1000,isLayoutEngine:true,isTouch:t.isTouch,debug:false,disabledDraggableSelector:'sapUshellLockedTile',onDragStartUIHandler:t.markDisableGroups.bind(t),onDragEndUIHandler:t.unmarkDisableGroups.bind(t)}).enable();t.uiEditModeActions=new sap.ushell.UIActions({containerSelector:'#dashboardGroups',wrapperSelector:'#dashboard',draggableSelector:".sapUshellDashboardGroupsContainerItem:not(.sapUshellDisableDragAndDrop)",draggableSelectorBlocker:".sapUshellTilesContainer-sortable, .sapUshellTileContainerBeforeContent, .sapUshellTileContainerAfterContent",rootSelector:"#shell-container",placeHolderClass:"sapUshellDashboardGroupsContainerItem-placeholder",cloneClass:"sapUshellDashboardGroupsContainerItem-clone",clickCallback:c._handleClick.bind(t),startCallback:c._handleActionModeUIStart.bind(t),endCallback:c._handleActionModeDrop.bind(t),dragCallback:c._handleActionModeStartDrag.bind(t),moveTolerance:t.isTouch?10:0.1,switchModeDelay:1000,isLayoutEngine:false,isTouch:t.isTouch,isVerticalDragOnly:true,debug:false});}if(this.getModel().getProperty("/tileActionModeActive")){t.uiEditModeActions.enable();}sap.ui.getCore().getEventBus().publish("launchpad","contentRendered");sap.ui.getCore().getEventBus().publish("launchpad","contentRefresh");var l=sap.ui.getCore().byId("loadingDialog");l.closeLoadingScreen();c._addBottomSpace();if(!C||C.enableTilesOpacity!==false){sap.ushell.utils.handleTilesOpacity();}}try{sap.ushell.utils.handleTilesVisibility();}catch(e){}};jQuery.sap.require("sap.ushell.ui.launchpad.DashboardGroupsContainer");var g=new sap.ushell.ui.launchpad.DashboardGroupsContainer("dashboardGroups",{accessibilityLabel:sap.ushell.resources.i18n.getText("DashboardGroups_label"),groups:{path:"/groups",template:T},afterRendering:a});g.addEventDelegate({onsapskipback:function(e){e.preventDefault();var j=jQuery(".sapUshellGroupLI:first:visible");if(!j.length){j=jQuery('#configBtn');}j.focus();},onsaptabnext:function(e){if(!(e.srcControl instanceof sap.ushell.ui.launchpad.TileContainer)){e.preventDefault();jQuery("#lastHiddenDashboardTabFocusHelper").focus();}},onsaptabprevious:function(e){var m=sap.ui.getCore().byId('shell').getModel(),i=m.getProperty('/tileActionModeActive');if(!i){if(!(e.srcControl instanceof sap.ushell.ui.launchpad.TileContainer)){e.preventDefault();jQuery("#firstHiddenDashboardTabFocusHelper").focus();}}}});return g;},markDisableGroups:function(){this.getModel().setProperty('/isInDrag',true);},unmarkDisableGroups:function(){this.getModel().setProperty('/isInDrag',false);},_getBeforeContent:function(c){var a=new sap.m.Button({icon:"sap-icon://add",text:"{i18n>add_group_at}",visible:{parts:["isGroupLocked","isDefaultGroup","/tileActionModeActive"],formatter:function(i,b,t){return(!i&&!b&&t);}},enabled:{parts:["/editTitle"],formatter:function(i){return!i;}},type:sap.m.ButtonType.Transparent,press:[function(d){var p=d.getSource().getBindingContext().getPath(),b=p.split("/");var i=b[b.length-1];this._publishAsync("launchpad","createGroupAt",{title:sap.ushell.resources.i18n.getText("new_group_name"),location:i});},c]}).addStyleClass("sapUshellAddGroupButton");return[a];},_getAfterContent:function(c){var a=new sap.m.Button({icon:"sap-icon://add",text:"{i18n>add_group_at}",visible:{parts:["isLastGroup","/tileActionModeActive","/isInDrag"],formatter:function(i,t,b){return(!b&&i&&t);}},type:sap.m.ButtonType.Transparent,press:[function(d){var p=d.getSource().getBindingContext().getPath(),b=p.split("/");var i=b[b.length-1];this._publishAsync("launchpad","createGroupAt",{title:sap.ushell.resources.i18n.getText("new_group_name"),location:window.parseInt(i,10)+1});},c]}).addStyleClass("sapUshellAddGroupButton");return[a];},_getTileContainerTemplate:function(){var f=new sap.ui.model.Filter("isTileIntentSupported",sap.ui.model.FilterOperator.EQ,true);jQuery.sap.require("sap.ushell.ui.launchpad.GroupHeaderActions");var g=new sap.ushell.ui.launchpad.GroupHeaderActions({content:this._getHeaderActions(),tileActionModeActive:{parts:['/tileActionModeActive','isDefaultGroup'],formatter:function(i,I){return i&&!I;}},isOverflow:'{/isPhoneWidth}'}).addStyleClass("sapUshellOverlayGroupActionPanel");var t=new sap.ushell.ui.launchpad.TileContainer({beforeContent:this._getBeforeContent(this.oController),afterContent:this._getAfterContent(this.oController),headerActions:g,headerText:"{title}",tooltip:"{title}",tileActionModeActive:'{/tileActionModeActive}',enableHelp:'{/enableHelp}',groupId:"{groupId}",defaultGroup:"{isDefaultGroup}",isLastGroup:"{isLastGroup}",isGroupLocked:"{isGroupLocked}",showHeader:true,editMode:"{editMode}",showBackground:"{/tileActionModeActive}",showDragIndicator:{parts:['/tileActionModeActive','/enableDragIndicator','isGroupLocked','isDefaultGroup'],formatter:function(i,d,I,b){return i&&d&&!I&&!b;}},showMobileActions:{parts:['/tileActionModeActive','isDefaultGroup'],formatter:function(i,I){return i&&!I;}},titleChange:function(e){sap.ui.getCore().getEventBus().publish("launchpad","changeGroupTitle",{groupId:e.getSource().getGroupId(),newTitle:e.getParameter("newTitle")});},showIcon:{parts:['/isInDrag','/tileActionModeActive','isGroupLocked','isDefaultGroup'],formatter:function(i,I,b,a){return(b&&(i||I))||(a&&I);}},deluminate:{parts:['/isInDrag','isGroupLocked'],formatter:function(i,I){return I&&i;}},showPlaceholder:{parts:['/tileActionModeActive','isGroupLocked',"tiles/length"],formatter:function(i,I,n){if(I){return false;}if(!this.groupHasVisibleTiles()){return true;}return i;}},visible:{parts:["/tileActionModeActive","isGroupVisible","/personalization","isGroupLocked","tiles/length","isDefaultGroup"],formatter:function(a,i,p,b,n,c){if(!this.groupHasVisibleTiles()&&(!p||(b&&!a)||(c&&!a))){return false;}return i||a;}},tiles:{path:"tiles",template:new sap.ushell.ui.launchpad.Tile({draggable:false,"long":"{long}","tall":"{tall}",uuid:"{uuid}",tileCatalogId:"{tileCatalogId}",target:"{target}",isLocked:"{isLocked}",tileActionModeActive:"{/tileActionModeActive}",showActionsIcon:"{showActionsIcon}",rgba:"{rgba}",animationRendered:false,debugInfo:"{debugInfo}",tileViews:{path:"content",factory:function(i,c){return c.getObject();}},coverDivPress:function(e){if(!e.oSource.getBindingContext().getObject().tileIsBeingMoved){sap.ushell.renderers.fiori2.ActionMode._openActionsMenu(e);}}}),filters:[f]},add:function(){sap.ushell.renderers.fiori2.Navigation.openCatalogByHash();},removable:"{removable}",afterRendering:function(e){if(sap.ushell.Layout.isInited){sap.ushell.Layout.reRenderGroupLayout(e.getSource());}}});return t;},_getHeaderActions:function(){return new sap.m.Button({text:{path:'removable',formatter:function(i){if(sap.ui.Device.system.phone){if(i){this.setIcon("sap-icon://delete");}else{this.setIcon("sap-icon://refresh");}}return sap.ushell.resources.i18n.getText(i?'DeleteGroupBtn':'ResetGroupBtn');}},type:sap.m.ButtonType.Transparent,visible:{parts:['/tileActionModeActive','isDefaultGroup'],formatter:function(i,I){return i&&!I;}},press:function(e){var s=e.getSource(),g=s.getBindingContext();this.oController._handleGroupDeletion(g);}.bind(this)}).addStyleClass("sapUshellHeaderActionButton");},_handleTileUIStart:function(e,u){if((sap.ui.Device.browser.msie)&&((navigator.msMaxTouchPoints>0)||(navigator.maxTouchPoints>0))){this.titleElement=u.querySelector("[title]");this.titleElement.setAttribute("data-title",this.titleElement.getAttribute("title"));this.titleElement.removeAttribute("title");}if(sap.ui.Device.system.desktop){jQuery('body').addClass("sapUshellDisableUserSelect");}},_handleStartDrag:function(e,t){this._hidePlusTiles();sap.ushell.Layout.getLayoutEngine().layoutStartCallback(t);jQuery(t).find("a").removeAttr('href');this.placeHolderElement=jQuery(".sapUshellTile-placeholder");sap.ui.getCore().getEventBus().publish("launchpad","sortableStart");if(this.bAnimate){this._startDragNDropAnimate(e,t);}},_handleDrop:function(e,t){this._showPlusTiles();if((sap.ui.Device.browser.msie)&&((navigator.msMaxTouchPoints>0)||(navigator.maxTouchPoints>0))){this.titleElement.setAttribute("title",this.titleElement.getAttribute("data-title"));}this.oController._handleDrop.call(this.oController,e,t);if(sap.ui.Device.desktop){jQuery('body').removeClass("sapUshellDisableUserSelect");}},_handleDragMove:function(c){if(!c.isScrolling){sap.ushell.Layout.getLayoutEngine().moveDraggable(c.moveX,c.moveY);}if(!c.isScrolling&&this.bAnimate){this._changeDragNDropAnimate(c.evt,c.clone);}},_hidePlusTiles:function(){var p=document.querySelectorAll(".sapUshellPlusTile");for(var i=0;i<p.length;i++){p[i].className+=" hidePlusTile";}},_showPlusTiles:function(){var p=document.querySelectorAll(".sapUshellPlusTile");for(var i=0;i<p.length;i++){p[i].className=p[i].className.split(' '+'hidePlusTile').join('');}},_getTileTopOffset:function(t,a,d){var T=0+d;T+=t.closest(".sapUshellDashboardGroupsContainerItem").position().top;T+=a.top;return T;},_startDragNDropAnimate:function(e,u){this.dragNDropData={};this.dragNDropData.jqCloneArea=jQuery("<div id='cloneArea' class='sapUshellCloneArea sapUshellDashboardGroupsContainerItem'></div>");var j=jQuery.sap.byId(this.oDashboardGroupsBox.getId());var t=j.find('.sapUshellTileContainer:visible:first');this.dragNDropData.jqDashboard=jQuery("#dashboard");var d=this.dragNDropData.jqDashboard.scrollTop();this.dragNDropData.containerLeftMargin=parseInt(t.css("margin-left"),10);var c=parseFloat(jQuery("#dashboardPage-scroll").offset().left);var a=j.offset().left;this.dragNDropData.jqCloneArea.css("left",a-c);this.dragNDropData.jqDraggableElements=jQuery(".sapUshellTile[role='link'],.sapUshellPlusTile",j);this.dragNDropData.jqGroupTitles=jQuery(".sapUshellContainerTitle:visible",j);var b,f,T,C,g,i;for(i=0;i<this.dragNDropData.jqDraggableElements.length;i++){b=this.dragNDropData.jqDraggableElements.eq(i);f=b[0];C=b.clone(true);f.tilePosition=b.position();f.tileOffset=b.offset();C.attr("id",C.attr("id")+'-clone');C.css("font-size",b.css("font-size"));C.addClass("sapUshellClonedTile");b.data("clone",C);T=parseInt(f.tilePosition.left,10)+this.dragNDropData.containerLeftMargin+"px";g=this._getTileTopOffset(b,f.tilePosition,d);C.css("left",T);C.css("top",g+"px");this.dragNDropData.jqCloneArea.append(C);b.css("visibility","hidden");}var h,k,G,o,l;for(i=0;i<this.dragNDropData.jqGroupTitles.length;i++){h=this.dragNDropData.jqGroupTitles.eq(i);k=h[0];o=h.clone(true);k.titlePosition=h.position();k.titleOffset=h.offset();o.attr("id",o.attr("id")+'-clone');o.css("font-size",h.css("font-size"));o.addClass("sapUshellClonedTile");h.data("clone",o);G=parseInt(k.titlePosition.left,10)+this.dragNDropData.containerLeftMargin+"px";l=this._getTileTopOffset(h,k.titlePosition,d);o.css("left",G);o.css("top",l+"px");this.dragNDropData.jqCloneArea.append(o);h.css("visibility","hidden");}this.dragNDropData.jqDashboard.append(this.dragNDropData.jqCloneArea);},_changeDragNDropAnimate:function(e,u){var d=this.dragNDropData.jqDashboard.scrollTop();var j,t,c,a,b,T,i,C;for(i=0;i<this.dragNDropData.jqDraggableElements.length;i++){j=this.dragNDropData.jqDraggableElements.eq(i);t=j[0];c=j.position();a=j.offset();if((a.left===t.tileOffset.left)&&(a.top===t.tileOffset.top)){continue;}t.tilePosition=c;t.tileOffset=a;C=j.data("clone");if(!C){continue;}b=t.tilePosition.left+this.dragNDropData.containerLeftMargin;T=this._getTileTopOffset(j,t.tilePosition,d);C.stop(true,false).animate({left:b,top:T},{duration:250},{easing:"swing"});}},_stopDragNDropAnimation:function(e,u){if(this.bAnimate){this.dragNDropData.jqDraggableElements.removeData("clone");this.dragNDropData.jqDraggableElements.css("visibility","visible");this.dragNDropData.jqGroupTitles.css("visibility","visible");this.dragNDropData.jqCloneArea.empty();this.dragNDropData.jqCloneArea.remove();}},_disableUIActions:function(){if(this.uiActions){this.uiActions.disable();this.uiActions=null;}},_disableEditModeUIActions:function(){if(this.uiEditModeActions){this.uiEditModeActions.disable();this.uiEditModeActions=null;}},getControllerName:function(){return"sap.ushell.renderers.fiori2.launchpad.dashboard.DashboardContent";}});}());},"sap/ushell/renderers/fiori2/search/SearchModel.js":function(){
/* the subsequent text seems not to contain a copyright or license statement */
(function(g){"use strict";jQuery.sap.require('sap.ushell.renderers.fiori2.search.SearchHelper');jQuery.sap.require('sap.ushell.renderers.fiori2.search.SearchResultListFormatter');jQuery.sap.require('sap.ushell.renderers.fiori2.search.INAV2SearchFacetsFormatter');jQuery.sap.require('sap.ushell.renderers.fiori2.search.FacetItem');jQuery.sap.require('sap.ushell.renderers.fiori2.search.Facet');jQuery.sap.require('sap.ui.thirdparty.hasher');jQuery.sap.require('sap.ushell.renderers.fiori2.search.SearchTabStripsFormatter');var s=g.sap;var S=s.ushell.renderers.fiori2.search.SearchHelper;var a=s.ushell.renderers.fiori2.search.SearchResultListFormatter;var T=s.ushell.renderers.fiori2.search.SearchTabStripsFormatter.Formatter;var c=g.console;s.ui.model.json.JSONModel.extend("sap.ushell.renderers.fiori2.search.SearchModel",{SUGGESTION_TYPE_APPS:'apps',SUGGESTION_TYPE_BO:'businessobject',SUGGESTION_TYPE_DATASOURCE:'datasource',constructor:function(p){var b=this;p=p||{};s.ui.model.json.JSONModel.prototype.constructor.apply(b,[]);b.urlParameters=b.parseUrlParameters();b.updateUrl=p.updateUrl!==undefined?p.updateUrl:true;b.setSizeLimit(200);b.sina=s.ushell.Container.getService("Search").getSina();b.query=b.sina.createPerspectiveQuery({templateFactsheet:true});b.suggestionQuery=b.sina.createSuggestionQuery();b.resetFilterConditions(false);b.createAllAndAppDataSource();b.doSuggestion=S.delayedExecution(b.doSuggestion,400);b.suggestionQuery.getResultSet=S.refuseOutdatedRequests(b.suggestionQuery.getResultSet,'suggestions');b.suggestApplications=S.refuseOutdatedRequests(b.suggestApplications,'suggestions');b.suggestDataSources=S.refuseOutdatedRequests(b.suggestDataSources,'suggestions');b.query.getResultSet=S.refuseOutdatedRequests(b.query.getResultSet,'search');b.searchApplications=S.refuseOutdatedRequests(b.searchApplications,'search');b.oFacetFormatter=new s.ushell.renderers.fiori2.search.INAV2SearchFacetsFormatter();b.tabStripFormatter=new T();b.appTopDefault=20;b.boTopDefault=10;b.setProperty('/searchBoxTerm','');b.setProperty('/lastSearchTerm',null);b.setProperty('/dataSource');b.setProperty('/lastDataSource',null);b.setProperty('/top',10);b.setProperty('/lastTop',10);b.setProperty('/skip',0);b.setProperty('/lastSkip',0);b.setProperty('/results',[]);b.setProperty('/appResults',[]);b.setProperty('/boResults',[]);b.setProperty('/count',0);b.setProperty('/boCount',0);b.setProperty('/appCount',0);b.setProperty('/facets',[]);b.setProperty('/filterConditions',[]);b.setProperty('/dataSources',[b.allDataSource,b.appDataSource]);b.setProperty('/recentDataSources',[]);b.setProperty('/businessObjSearchEnabled',true);b.setProperty('/resultsVisibility',true);b.setProperty('/appsVisibility',true);b.setProperty('/facetVisibility',false);b.setProperty('/lastFacetVisibility',false);b.resetDataSource(false);var d={desktop:{appSuggestion:3,normalSuggestion:7,singleAppSuggestion:7,dataSourceSuggestion:2},phone:{appSuggestion:3,normalSuggestion:5,singleAppSuggestion:5,dataSourceSuggestion:2}};b.deviceSuggestionLimits=jQuery.device.is.phone?d.phone:d.desktop;b.initBusinessObjSearch();},parseUrlParameters:function(){var u=s.ushell.Container.getService("URLParsing");var p=u.parseParameters(window.location.search);var n={};for(var k in p){var v=p[k];if(v.length!==1){continue;}v=v[0];if(typeof v!=='string'){continue;}n[k.toLowerCase()]=v.toLowerCase();}return n;},setProperty:function(n,v){var b=this;s.ui.model.json.JSONModel.prototype.setProperty.apply(this,arguments);switch(n){case'/boResults':case'/appResults':b.calculateResultList();break;case'/appCount':case'/boCount':b.setProperty('/count',b.getProperty('/appCount')+b.getProperty('/boCount'));break;}},calculateResultList:function(){var b=this;var r=[];var d=b.getProperty('/boResults');if(d&&d.length){r.push.apply(r,d);}var t=b.getProperty('/appResults');if(t&&t.length>0){var e={type:'appcontainer',tiles:t};if(r.length>0){if(r.length>3){r.splice(3,0,e);}else{r.splice(0,0,e);}}else{r=[e];}}s.ui.model.json.JSONModel.prototype.setProperty.apply(this,['/results',r]);},initBusinessObjSearch:function(){var b=this;if(!b.isBusinessObjSearchConfigured()){b.setProperty('/businessObjSearchEnabled',false);return;}b.sina.sinaSystem().getServerInfo().done(function(){b.loadDataSources();}).fail(function(){b.setProperty('/businessObjSearchEnabled',false);});},loadDataSources:function(){var b=this;b.getServerDataSources().done(function(d){if(!jQuery.isArray(d)){d=[];}d=d.slice();d.splice(0,0,b.appDataSource);d.splice(0,0,b.allDataSource);b.setProperty("/dataSources",d);b.updateDataSourceList(b.getDataSource());var e=b.getDataSource();b.setProperty("/dataSource",{});b.setProperty("/dataSource",e);});},getServerDataSources:function(){var b=this;if(b.getDataSourcesDeffered){return b.getDataSourcesDeffered;}b.getDataSourcesDeffered=b.sina.sinaSystem().getServerInfo().then(function(d){var e=d.rawServerInfo.ServerInfo.SystemId;var f=d.rawServerInfo.ServerInfo.Client;var h=e+f+"~ESH_CONNECTOR~";var i=b.sina.createDataSource({objectName:h,packageName:{label:"ABAP",value:"ABAP"},type:"Connector",label:""});var j=b.sina.createPerspectiveQuery();j.setDataSource(i);j.setSearchTerms("*");j.setTop(1000);j.setOrderBy({orderBy:'DESCRIPTION',sortOrder:'ASC'});return j.getResultSet();}).then(function(r){var e=r.searchresultset.getElements();var d=jQuery.map(e,function(f){return b.sina.createDataSource({objectName:{label:f.OBJECT_NAME.value,value:f.OBJECT_NAME.value},packageName:{label:"ABAP",value:"ABAP"},schemaName:"",type:{label:'View',value:'View'},label:f.DESCRIPTION.value===null?f.OBJECT_NAME.value:f.DESCRIPTION.value});});return b.removeDuplicateDataSources(d);});return b.getDataSourcesDeffered;},removeDuplicateDataSources:function(d){var f=[];var m={};for(var i=0;i<d.length;++i){var b=d[i];if(m[b.objectName.value]){continue;}m[b.objectName.value]=true;f.push(b);}return f;},isBusinessObjSearchConfigured:function(){try{var b=window['sap-ushell-config'].renderers.fiori2.componentData.config;return b.searchBusinessObjects!=='hidden';}catch(e){return true;}},isBusinessObjSearchEnabled:function(){return this.getProperty('/businessObjSearchEnabled');},isFacetSearchEnabled:function(){if(this.urlParameters.eshfacets==='true'){return true;}return false;},searchApplications:function(b,t,d){return s.ushell.Container.getService("Search").queryApplications({searchTerm:b,searchInKeywords:true,top:t,skip:d});},suggestApplications:function(b){return s.ushell.Container.getService("Search").queryApplications({searchTerm:b});},suggestDataSources:function(b,l){var d=this;var e=[];return d.getServerDataSources().then(function(f){if($.inArray(d.appDataSource,f)<0){f.unshift(d.appDataSource);}if($.inArray(d.allDataSource,f)<0){f.unshift(d.allDataSource);}var t=new S.Tester(b);var o;var h;for(var i=0;i<f.length;++i){var j=f[i];if(j.objectName.value===d.getDataSource().objectName.value){continue;}o=t.test(j.label);if(o.bMatch===true){h={};h.label='<i>'+s.ushell.resources.i18n.getText("searchInPlaceholder",o.sHighlightedText)+'</i>';h.labelRaw='';h.dataSource=j;h.type=d.SUGGESTION_TYPE_DATASOURCE;e.push(h);if(e.length===l){break;}}}return e;});},createAllAndAppDataSource:function(){this.allDataSource=this.sina.getRootDataSource();this.allDataSource.label=s.ushell.resources.i18n.getText("label_all");this.appDataSource=this.sina.createDataSource({objectName:{label:"Apps",value:"$$APP$$"},packageName:{label:"ABAP",value:"ABAP"},type:"Category",label:s.ushell.resources.i18n.getText("label_apps")});},isAllCategory:function(){var d=this.getProperty("/dataSource");if((d&&d.objectName&&d.objectName.value&&d.objectName.value.toLowerCase()==="$$all$$")||(d&&d.objectName&&d.objectName.toLowerCase&&d.objectName.toLowerCase()==="$$all$$")){return true;}return false;},isAppCategory:function(){var d=this.getProperty("/dataSource");if(d&&d.objectName&&d.objectName.value==="$$APP$$"){return true;}return false;},abortSuggestions:function(){this.setProperty("/suggestions",[]);this.doSuggestion.abort();S.abortRequests('suggestions');},doSuggestion:function(){var b=this;var d=b.getProperty("/searchBoxTerm");if(d.length===0){return;}b.setProperty("/suggestions",[]);S.abortRequests('suggestions');if(b.isBusinessObjSearchEnabled()){if(d.length>=3||!b.isAllCategory()){b.doNormalSuggestions(d);}}if(b.isAllCategory()||b.isAppCategory()){b.doAppSuggestions(d);}if(b.isBusinessObjSearchEnabled()){b.doDataSourceSuggestions(d);}},doAppSuggestions:function(b){var d=this;var e=d.suggestApplications(b).done(function(r){var f=r.getElements();jQuery.each(f,function(j,k){k.type=d.SUGGESTION_TYPE_APPS;k.dataSource=d.appDataSource;});var h;if(d.isBusinessObjSearchEnabled()&&d.isAllCategory()){h=d.deviceSuggestionLimits.appSuggestion;}else{h=d.deviceSuggestionLimits.singleAppSuggestion;}f=f.slice(0,h);var i=d.getProperty("/suggestions");i.unshift.apply(i,f);d.setProperty("/suggestions",i);});},doNormalSuggestions:function(b){var d=this;d.suggestionQuery.setSuggestionTerm(b);d.suggestionQuery.setDataSource(d.getProperty("/dataSource"));d.suggestionQuery.getResultSet().done(function(r){var n=d.assembleNormalSuggestionItems(r,b);for(var i=0;i<n.length;i++){var e=n[i];if(d.isAllCategory()&&e.dataSourceLabel){e.label=e.label+" <i>in "+e.dataSourceLabel+"</i>";}}var f=d.getProperty("/suggestions");f.push.apply(f,n);d.setProperty("/suggestions",f);});},assembleNormalSuggestionItems:function(r,b){var d=this;var e=r.getElements();var f=[];for(var i=0;i<e.length;i++){var h=e[i];var j;if(i===0){j=h.labelRaw;}if(h.attribute.value!=="$$AllAttributes$$"){continue;}h.dataSource.label=h.dataSource.objectName.label;h.dataSource.objectName.label=h.dataSource.objectName.value;h.dataSource.type.label='View';h.dataSource.type.value='View';h.dataSource.packageName.label='ABAP';h.dataSource.packageName.value='ABAP';if(d.isAllCategory()){if(h.dataSource.getObjectName().value==="$$AllDataSources$$"){h.dataSource=d.allDataSource;}else{if(j===h.labelRaw){h.dataSourceLabel=h.dataSource.getLabel();}else{continue;}}}else{if(h.dataSource.getObjectName().value==="$$AllDataSources$$"){h.dataSource=d.getProperty("/dataSource");h.dataSourceLabel=h.dataSource.getLabel();}else{continue;}}if(jQuery.type(h.label)==="string"&&h.label.length<1){h.label=h.labelRaw;}h.type=d.SUGGESTION_TYPE_BO;f.push(h);if(d.deviceSuggestionLimits.normalSuggestion===f.length){break;}}return f;},doDataSourceSuggestions:function(b){var d=this;var e=function(f){for(var i=0;i<f.length;++i){var h=f[i];if(h.type===d.SUGGESTION_TYPE_APPS){continue;}return i;}return f.length;};d.suggestDataSources(b,d.deviceSuggestionLimits.dataSourceSuggestion).done(function(f){var h=d.getProperty("/suggestions");var i=[];i.push(e(h));i.push(0);i.push.apply(i,f);h.splice.apply(h,i);d.setProperty("/suggestions",h);});},addFilterCondition:function(f,b){var d=this,e=f.filterCondition;function h(f){var n=d.getProperty("/filterConditions");n.push(f);d.setProperty("/filterConditions",n);}if(e.attribute||e.conditions){if(!d.query.getFilter().hasFilterCondition(e)){d.query.addFilterCondition(e);h(f);}if(!d.suggestionQuery.getFilter().hasFilterCondition(e)){d.suggestionQuery.addFilterCondition(e);}d.filterChanged=true;}else{d.setDataSource(e,false,{source:"facets"});}if(b||b===undefined){d._searchFireQuery();}},removeFilterCondition:function(f,b){var d=this,e=f.filterCondition;function r(f){var n=d.getProperty("/filterConditions");var i=d.getProperty("/filterConditions").length;while(i--){var h=d.getProperty("/filterConditions")[i].filterCondition;if(h.equals(f.filterCondition)){n.splice(i,1);break;}}d.setProperty("/filterConditions",n);}if(e.attribute){r(f);d.query.removeFilterCondition(e.attribute,e.operator,e.value);d.suggestionQuery.removeFilterCondition(e.attribute,e.operator,e.value);}else if(e.conditions){r(f);d.query.getFilter().removeFilterConditionGroup(e);d.suggestionQuery.getFilter().removeFilterConditionGroup(e);}else{d.setDataSource(e,false);}d.filterChanged=true;if(b||b===undefined){d._searchFireQuery();}},hasFilterCondition:function(f){return this.query.getFilter().hasFilterCondition(f);},resetFilterConditions:function(f){var b=this;b.query.resetFilterConditions();b.suggestionQuery.resetFilterConditions();b.setProperty("/filterConditions",[]);b.query.addFilterCondition('$$RenderingTemplatePlatform$$','=','html');b.query.addFilterCondition('$$RenderingTemplateTechnology$$','=','Tempo');b.query.addFilterCondition('$$RenderingTemplateVariant$$','=','');b.query.addFilterCondition('$$RenderingTemplateType$$','=','ItemDetails');b.query.addFilterCondition('$$RenderingTemplateType$$','=','ResultItem');if(f||f===undefined){b._searchFireQuery();}},getFacets:function(){var b=this;return b.getProperty('/facets');},getTop:function(){return this.getProperty('/top');},setTop:function(t,f){this.setProperty('/top',t);if(f||f===undefined){this._searchFireQuery();}},getSkip:function(){return this.getProperty('/skip');},setSkip:function(b,f){this.setProperty('/skip',b);if(f||f===undefined){this._searchFireQuery();}},calculatePlaceholder:function(){var b=this;if(b.isAllCategory()){return s.ushell.resources.i18n.getText("search");}else{return s.ushell.resources.i18n.getText("searchInPlaceholder",b.getDataSource().label);}},setFacetVisibility:function(v,f){var b=this;if(v===this.getProperty('/facetVisibility')){return;}if(!v||b.getDataSource().getType().value==='Category'||b.isAppCategory()){b.setProperty('/lastFacetVisibility',v);}this.setProperty('/facetVisibility',v);if(f||f===undefined){this._searchFireQuery();}},getFacetVisibility:function(){return this.getProperty('/facetVisibility');},getDataSource:function(){var b=this;return b.getProperty("/dataSource");},setDataSource:function(d,f,e){var b=this;e=e||{source:""};var o=b.getProperty('/dataSource');var h=false;var r=b.getProperty("/recentDataSources");if(true||e.source==="facets"){for(var i=0,l=r.length;i<l;i++){var j=r[i];if(d.equals(j)){h=true;r.splice(i,Number.MAX_VALUE);b.setProperty("/recentDataSources",r);break;}}if(!h){if(o&&!this.allDataSource.equals(o)&&!this.appDataSource.equals(o)){if(this.tabStripFormatter.tree.hasChild(o,d)){r.push(o);}else{b.setProperty("/recentDataSources",[]);}}}if(this.allDataSource.equals(d)){b.setProperty("/recentDataSources",[]);}}b.resetFilterConditions(false);b.updateDataSourceList(d);b.setProperty("/dataSource",d);b.setProperty("/searchTermPlaceholder",b.calculatePlaceholder());b.setSkip(0,false);if(b.isAppCategory()){b.setTop(b.appTopDefault,false);}else{b.setTop(b.boTopDefault,false);}if(f||f===undefined){b._searchFireQuery();}},updateDataSourceList:function(n){if(n.equals(this.allDataSource)||n.equals(this.appDataSource)){return;}if(n&&n.objectName&&n.objectName.value){if(n.objectName.value.indexOf('~')>=0){return;}}var d=this.getProperty('/dataSources');for(var i=0;i<d.length;++i){var b=d[i];if(b.equals(n)){return;}}d.unshift(n);this.setProperty('/dataSources',d);},resetDataSource:function(f){this.setDataSource(this.allDataSource,f);},getDataSourceJson:function(){var b=this;var d=b.getProperty("/dataSource");var j={"label":d.label,"SchemaName":{"label":d.getSchemaName().label,"value":d.getSchemaName().value},"PackageName":{"label":d.getPackageName().label,"value":d.getPackageName().value},"ObjectName":{"label":d.getObjectName().label,"value":d.getObjectName().value}};if(d.getType().value){j.Type=d.getType().value;}return j;},setDataSourceJson:function(d,f){var b=this.sina.createDataSource(d);this.setDataSource(b,f);},getSearchBoxTerm:function(){var b=this;return b.getProperty("/searchBoxTerm");},setSearchBoxTerm:function(b,f){var d=this;var e=b.replace(/^\s+/,"");d.setProperty("/searchBoxTerm",e);if(e.length===0){return;}if(f||f===undefined){d._searchFireQuery();}},_searchFireQuery:function(){var b=this;if(b.getProperty('/lastSearchTerm')===b.getProperty('/searchBoxTerm')&&b.getProperty('/lastDataSource')===b.getProperty('/dataSource')&&b.getProperty('/lastTop')===b.getProperty('/top')&&b.getProperty('/lastSkip')===b.getProperty('/skip')&&b.getProperty('/lastFacetVisibility')===b.getProperty('/facetVisibility')&&(!b.filterChanged)){return;}if(b.getProperty('/searchBoxTerm').length===0&&b.getProperty('/lastSearchTerm').length!==0){b.setProperty('/searchBoxTerm',b.getProperty('/lastSearchTerm'));}if(b.getProperty('/lastSearchTerm')||b.getProperty('/lastDataSource')){if(b.getProperty('/lastSearchTerm')!==b.getProperty('/searchBoxTerm')||b.getProperty('/lastDataSource')!==b.getProperty('/dataSource')||b.filterChanged){b.setProperty('/skip',0);if(b.isAppCategory()){b.setProperty('/top',b.appTopDefault);}else{b.setProperty('/top',b.boTopDefault);}}}if(b.getProperty('/lastSearchTerm')!==b.getProperty('/searchBoxTerm')){b.tabStripFormatter.markNotSorted();}b.setProperty('/lastSearchTerm',b.getProperty('/searchBoxTerm'));b.setProperty('/lastDataSource',b.getProperty('/dataSource'));b.setProperty('/lastTop',b.getProperty('/top'));b.setProperty('/lastSkip',b.getProperty('/skip'));b.setProperty('/lastFacetVisibility',b.getProperty('/facetVisibility'));b.filterChanged=false;s.ui.getCore().getEventBus().publish("allSearchStarted");b.abortSuggestions();S.abortRequests('search');b.calculateVisibility();this.updateSearchURLSilently();var d=b.getDataSource();jQuery.when.apply(null,[b.normalSearch(),b.appSearch()]).done(function(){b.setProperty('/tabStrips',b.tabStripFormatter.format(d,b.perspective,b));b.setProperty('/facets',b.oFacetFormatter.getFacets(d,b.perspective,b));}).always(function(){s.ui.getCore().getEventBus().publish("allSearchFinished");});},autoStartApp:function(){var b=this;if(b.getProperty("/appCount")&&b.getProperty("/appCount")===1&&b.getProperty("/count")&&b.getProperty("/count")===1){var A=b.getProperty("/appResults");if(A&&A.length>0&&A[0]&&A[0].url&&b.getProperty('/searchBoxTerm')&&A[0].tooltip&&b.getProperty('/searchBoxTerm').toLowerCase().trim()===A[0].tooltip.toLowerCase().trim()){if(A[0].url[0]==='#'){window.location.href=A[0].url;}else{window.open(A[0].url,'_blank');}}}},calculateVisibility:function(){var b=this;if(b.isAppCategory()){b.setProperty('/resultsVisibility',false);b.setProperty('/appsVisibility',true);}else{b.setProperty('/resultsVisibility',true);b.setProperty('/appsVisibility',false);}},appSearch:function(){var b=this;if(b.getSkip()===0){b.setProperty("/appResults",[]);b.setProperty("/appCount",0);}if(b.isAllCategory()||b.isAppCategory()){var t=b.calculateTopAndSkip(b.getTop(),b.getSkip(),b.getProperty('/appResults'));return b.searchApplications(b.getProperty('/searchBoxTerm'),t.top,t.skip).then(function(r){b.setProperty("/appCount",r.totalResults);if(b.getSkip()>0){var d=b.getProperty("/appResults").slice();d.push.apply(d,r.getElements());b.setProperty("/appResults",d);}else{b.setProperty("/appResults",r.getElements());}s.ui.getCore().getEventBus().publish("appSearchFinished",r);},function(){s.ui.getCore().getEventBus().publish("appSearchFinished");return jQuery.when(true);});}else{b.setProperty("/appResults",[]);b.setProperty("/appCount",0);s.ui.getCore().getEventBus().publish("appSearchFinished");}},normalSearch:function(){var b=this;if(b.getSkip()===0){b.setProperty("/boResults",[]);b.setProperty("/boCount",0);}if(b.isBusinessObjSearchEnabled()&&!b.isAppCategory()){b.query.setSearchTerms(b.getSearchBoxTerm());b.query.setDataSource(b.getDataSource());var t=b.calculateTopAndSkip(b.getTop(),b.getSkip(),b.getProperty('/boResults'));b.query.setTop(t.top);b.query.setSkip(t.skip);if((b.getFacetVisibility()&&b.isFacetSearchEnabled())||b.getDataSource().getType().value==='Category'){b.query.setExpand(['Grid','Items','ResultsetFacets','TotalCount']);}else{b.query.setExpand(['Grid','Items','TotalCount']);}return b.query.getResultSet().then(function(p){b.perspective=p;b._afterSearchPrepareResultList(b.perspective,b.getSkip()>0);s.ui.getCore().getEventBus().publish("normalSearchFinished",{append:b.getSkip()>0,resultset:b.perspective});},function(e){s.ui.getCore().getEventBus().publish("normalSearchFinished",{append:b.getSkip()>0,resultset:null});b.normalSearchErrorHandling(e);b.perspective=null;return jQuery.when(true);});}else{b.setProperty("/boResults",[]);b.setProperty("/boCount",0);s.ui.getCore().getEventBus().publish("normalSearchFinished",{append:b.getSkip()>0,resultset:null});}},calculateTopAndSkip:function(t,b,r){var d=r.length;if(r.length>0){var l=r[r.length-1];if(l.type==='footer'){d-=1;}}return{top:b+t-d,skip:d};},normalSearchErrorHandling:function(e){var b=["ESH_FED_MSG016"];if(e){if(e.responseText){var d=true;var f=jQuery.parseJSON(e.responseText);var h='';var j='';if(f.Error){if(f.Error.Message){h+=''+f.Error.Message;}if(f.Error.Code){h+=' (Code '+f.Error.Code+').';}}if(f.ErrorDetails){j+='';for(var i=0;i<f.ErrorDetails.length;i++){j+=f.ErrorDetails[i].Message+' (Code '+f.ErrorDetails[i].Code+')';if(b.indexOf(f.ErrorDetails[i].Code)!==-1){d=false;}}}jQuery.sap.log.error(h+' Details: '+j);if(d){jQuery.sap.require("sap.m.MessageBox");s.m.MessageBox.alert(j,{title:"Search Error: "+h,icon:s.m.MessageBox.Icon.ERROR});}}else{var m='Search error:'+e.toString();jQuery.sap.log.error(m);jQuery.sap.require("sap.m.MessageBox");s.m.MessageBox.alert(m,{title:'Search Error',icon:s.m.MessageBox.Icon.ERROR});}}},_afterSearchPrepareResultList:function(p,b){var d=this;var o=d.getProperty("/boResults");if(b){o.pop();}var f=new a();var r=f.format(p.getSearchResultSet(),this.query.filter.searchTerms);var n=o.concat(r);if(n.length<p.getSearchResultSet().totalcount){var e={};e.type="footer";n.push(e);}d.setProperty("/resultListHeading",s.ushell.resources.i18n.getText("searchResults"));d.setProperty("/boCount",p.getSearchResultSet().totalcount);d.setProperty("/boResults",n);},createSearchURL:function(){var h="#Action-search";h+="&/searchterm="+encodeURIComponent(this.getProperty('/searchBoxTerm'));h+="&datasource="+encodeURIComponent(JSON.stringify(this.getDataSourceJson()));h+="&top="+this.getTop();h+="&skip="+this.getSkip();if(this.getProperty("/filterConditions").length>0){h+="&filter="+encodeURIComponent(JSON.stringify(this.getProperty("/filterConditions")));}return h;},updateSearchURLSilently:function(h){if(!this.updateUrl){return;}h=h||this.createSearchURL();S.hasher.setHash(h);},hashChanged:function(p,f){var P={};jQuery.each(p,function(i,v){P[i.toLowerCase()]=v[0];});if(!P.searchterm){return;}var b=P.searchterm;this.setSearchBoxTerm(b,false);var d;if(P.datasource){var e=JSON.parse(P.datasource);d=this.sina.createDataSource(e);this.setDataSource(d,false);}else{this.resetDataSource(false);}if(P.top){var t=parseInt(P.top);this.setTop(t,false);}if(P.skip){var h=parseInt(P.skip);this.setSkip(h,false);}this.resetFilterConditions(false);if(P.filter){var j=JSON.parse(P.filter);for(var i=0,l=j.length;i<l;i++){var k=new s.ushell.renderers.fiori2.search.FacetItem(j[i]);this.addFilterCondition(k,false);}}if(f||f===undefined){this._searchFireQuery();}},navigateToSearchApp:function(){if(this.getProperty('/searchBoxTerm')===""){return;}var h=this.createSearchURL();window.location.hash=h;}});})(window);},"sap/ushell/resources.js":function(){
// Copyright (c) 2009-2014 SAP SE, All Rights Reserved
(function(){"use strict";jQuery.sap.declare("sap.ushell.resources");jQuery.sap.require("sap.ui.model.resource.ResourceModel");sap.ushell.resources={};sap.ushell.resources.getTranslationModel=function(l){var t=new sap.ui.model.resource.ResourceModel({bundleUrl:jQuery.sap.getModulePath("sap.ushell.renderers.fiori2.resources.resources",".properties"),bundleLocale:l});return t;};sap.ushell.resources.i18nModel=sap.ushell.resources.getTranslationModel(sap.ui.getCore().getConfiguration().getLanguage());sap.ushell.resources.i18n=sap.ushell.resources.i18nModel.getResourceBundle();}());},"sap/ushell/services/AppConfiguration.js":function(){(function(){"use strict";jQuery.sap.declare("sap.ushell.services.AppConfiguration");function A(){var m={},c=null;this.getCurrentAppliction=function(a){return c;};this.getMetadata=function(a){if(!a){a=c;}if(a){var k=this.getApplicationUrl(a);if(!(m.hasOwnProperty(k))){this.addMetadata(a);}return m[k]||{};}return{};};this.setCurrentApplication=function(a){c=a;};this.addApplicationSettingsButtons=function(b){var M=sap.ui.getCore().byId('shell')&&sap.ui.getCore().byId('shell').getModel(),i,j,C,B,a;if(!M){jQuery.sap.log.error("shell does not exist");return;}a=M.getProperty('/currentState/shellActions');B=M.getProperty('/currentState/actions');B.length=0;for(i=0;i<b.length;i=i+1){C=b[i];C.setIcon(C.getIcon()||sap.ui.core.IconPool.getIconURI('action-settings'));B.push(C.getId());}for(j=0;j<a.length;j=j+1){B.push(a[j]);}M.setProperty('/currentState/actions',B);};this.setWindowTitle=function(t){window.document.title=t;};this.setIcons=function(i){jQuery.sap.setIcons(i);};this.getSettingsControl=function(){jQuery.sap.require("sap.ushell.ui.footerbar.SettingsButton");return new sap.ushell.ui.footerbar.SettingsButton();};this.getApplicationName=function(a){var M,s=(a&&a.additionalInformation)||null;if(s){M=/^SAPUI5\.Component=(.+)$/i.exec(s);if(M){return M[1];}}return null;};this.getApplicationUrl=function(a){var u=(a&&a.url)||null,i;if(u){i=u.indexOf("?");if(i>=0){u=u.slice(0,i);}if(u.slice(-1)!=='/'){u+='/';}}return u;};this.addMetadata=function(a){try{var C=this.getApplicationName(a),u=this.getApplicationUrl(a),s,o,r,R,l,b,i,p,v,P=["libraryName","version","fullWidth","title","icon","favIcon","homeScreenIconPhone","homeScreenIconPhone@2","homeScreenIconTablet","homeScreenIconTablet@2","startupImage320x460","startupImage640x920","startupImage640x1096","startupImage768x1004","startupImage748x1024","startupImage1536x2008","startupImage1496x2048"],d,e,f;if(u&&!(m.hasOwnProperty(u))){m[u]={};o=sap.ui.component.load({url:u,name:C});l=o.getMetadata();if(l){b=l&&l.getConfig();if(b){R=b.resourceBundle||"";if(R){if(R.slice(0,1)!=='/'){R=u+R;}r=jQuery.sap.resources({url:R,locale:sap.ui.getCore().getConfiguration().getLanguage()});}}for(i=0;i<P.length;i=i+1){p=P[i];if(r&&b.hasOwnProperty(p+"Resource")){v=r.getText(b[p+"Resource"]);}else if(b.hasOwnProperty(p)){v=b[p];}else{v=l["_s"+p.substring(0,1).toUpperCase()+p.slice(1)];}m[u][p]=v;}}d=["favIcon","homeScreenIconPhone","homeScreenIconPhone@2","homeScreenIconTablet","homeScreenIconTablet@2","startupImage320x460","startupImage640x920","startupImage640x1096","startupImage768x1004","startupImage748x1024","startupImage1536x2008","startupImage1496x2048"];e=(u&&u[u.length-1]==='/')?u.substring(0,u.length-1):u;f=function(u){if(u.match(/^https?:\/\/.*/)){return false;}return u&&u[0]!=='/';};d.forEach(function(h){var O=m[u][h],F=null;if(O){F=f(O)?e+"/"+O:O;}m[u][h]=F;});}}catch(g){jQuery.sap.log.warning("Application configuration could not be parsed");}};}sap.ushell.services.AppConfiguration=new A();}());},"sap/ushell/services/Container.js":function(){(function(){"use strict";jQuery.sap.declare("sap.ushell.services.Container");jQuery.sap.require("sap.ushell.utils");jQuery.sap.require("sap.ushell.System");var c,d="sap.ushell.Container.dirtyState.",p;sap.ushell.utils.testPublishAt(sap.ushell.services);function a(){close();}sap.ushell.utils.testPublishAt(sap.ushell.services);function r(){document.location="about:blank";}sap.ushell.utils.testPublishAt(sap.ushell.services);function g(){return localStorage;}function b(P){if(p&&p[P]){return p[P];}return"sap.ushell.adapters."+P;}function f(s){return(c.services&&c.services[s])||{};}function h(n,s,P){var A=f(n).adapter||{},e=A.module||b(s.getPlatform())+"."+n+"Adapter";jQuery.sap.require(e);return new(jQuery.sap.getObject(e))(s,P,{config:A.config||{}});}function j(c){var B=c.bootstrapPlugins,m;if(B){Object.keys(B).forEach(function(P){m=B[P].module;try{jQuery.sap.require(m);}catch(e){jQuery.sap.log.error(e,"Error when loading bootstrap plugin: "+P);}});}}function C(A){var l=new sap.ui.base.EventProvider(),k=false,R="sap.ushell.Container."+A.getSystem().getPlatform()+".remoteSystem.",m={},G,s,L=g(),S=new sap.ushell.utils.Map(),n="sap.ushell.Container."+A.getSystem().getPlatform()+".sessionTermination",t=this;this.cancelLogon=function(){if(this.oFrameLogonManager){this.oFrameLogonManager.cancelLogon();}};this.createRenderer=function(e){var i,u,v,w;e=e||c.defaultRenderer;if(!e){throw new Error("Missing renderer name");}w=(c.renderers&&c.renderers[e])||{};u=w.module||(e.indexOf(".")<0?"sap.ushell.renderers."+e+".Renderer":e);jQuery.sap.require(u);if(w.componentData&&w.componentData.config){i={config:w.componentData.config};}v=new(jQuery.sap.getObject(u))({componentData:i});if(v instanceof sap.ui.core.UIComponent){v=new sap.ui.core.ComponentContainer({component:v,height:"100%",width:"100%"});}if(!(v instanceof sap.ui.core.Control)){throw new Error("Unsupported renderer type for name "+e);}return v;};this.DirtyState={CLEAN:"CLEAN",DIRTY:"DIRTY",MAYBE_DIRTY:"MAYBE_DIRTY",PENDING:"PENDING",INITIAL:"INITIAL"};this.getGlobalDirty=function(){var i,D=new jQuery.Deferred(),u=jQuery.sap.uid(),v,P=0,w=this.DirtyState.CLEAN;function x(){if(P===0||w===t.DirtyState.DIRTY){D.resolve(w);jQuery.sap.log.debug("getGlobalDirty() Resolving: "+w,null,"sap.ushell.Container");}}function y(z){if(z.key.indexOf(d)===0&&z.newValue!==t.DirtyState.INITIAL&&z.newValue!==t.DirtyState.PENDING){jQuery.sap.log.debug("getGlobalDirty() Receiving event key: "+z.key+" value: "+z.newValue,null,"sap.ushell.Container");if(z.newValue===t.DirtyState.DIRTY||z.newValue===t.DirtyState.MAYBE_DIRTY){w=z.newValue;}P-=1;x();}}if(sap.ui.Device.browser.msie){return D.resolve(this.DirtyState.MAYBE_DIRTY).promise();}try{L.setItem(u,"CHECK");L.removeItem(u);}catch(e){jQuery.sap.log.warning("Error calling localStorage.setItem(): "+e,null,"sap.ushell.Container");return D.resolve(this.DirtyState.MAYBE_DIRTY).promise();}if(G){throw new Error("getGlobalDirty already called!");}G=D;window.addEventListener('storage',y);D.always(function(){window.removeEventListener('storage',y);G=undefined;});for(i=L.length-1;i>=0;i-=1){v=L.key(i);if(v.indexOf(d)===0){if(L.getItem(v)==='PENDING'){L.removeItem(v);jQuery.sap.log.debug("getGlobalDirty() Cleanup of unresolved 'PENDINGS':"+v,null,"sap.ushell.Container");}else{P+=1;sap.ushell.utils.localStorageSetItem(v,this.DirtyState.PENDING,true);jQuery.sap.log.debug("getGlobalDirty() Requesting status for: "+v,null,"sap.ushell.Container");}}}x();setTimeout(function(){if(D.state()!=="resolved"){D.resolve('MAYBE_DIRTY');jQuery.sap.log.debug("getGlobalDirty() Timeout reached, - resolved 'MAYBE_DIRTY'",null,"sap.ushell.Container");}},P*2000);return D.promise();};this.getLogonSystem=function(){return A.getSystem();};this.getUser=function(){return A.getUser();};this.getDirtyFlag=function(){return k;};this.setDirtyFlag=function(i){k=i;};this.getService=function(e,P){var i={},M,K,u,v,w,x,y;function z(B){var D=new jQuery.Deferred();if(!B){throw new Error("Missing system");}D.resolve(h(e,B,P));sap.ushell.Container.addRemoteSystem(B);return D.promise();}if(!e){throw new Error("Missing service name");}if(e.indexOf(".")>=0){throw new Error("Unsupported service name");}x=f(e);M=x.module||"sap.ushell.services."+e;K=M+"/"+(P||"");y={config:x.config||{}};if(!S.containsKey(K)){jQuery.sap.require(M);u=jQuery.sap.getObject(M);if(u.hasNoAdapter===true){v=new u(i,P,y);}else{w=h(e,A.getSystem(),P);i.createAdapter=z;v=new u(w,i,P,y);}S.put(K,v);return v;}return S.get(K);};sap.ushell.utils.testPublishAt(t);function o(){var u,v,i,K;for(i=L.length-1;i>=0;i-=1){K=L.key(i);if(K.indexOf(R)===0){try{u=K.substring(R.length);v=JSON.parse(L.getItem(K));m[u]=new sap.ushell.System(v);}catch(e){L.removeItem(K);}}}return m;}sap.ushell.utils.testPublishAt(t,"suppressOData");function q(){function e(E,i,F){jQuery.sap.log.warning(E,null,"sap.ushell.Container");if(F){setTimeout(F.bind(null,E),5000);}return{abort:function(){return;}};}OData.read=function(i,u,F){return e("OData.read('"+(i&&i.Uri?i.requestUri:i)+"') disabled during logout processing",u,F);};OData.request=function(i,u,F){return e("OData.request('"+(i?i.requestUri:"")+"') disabled during logout processing",u,F);};}this.addRemoteSystem=function(e){var i=e.getAlias(),O=m[i];if(O){if(O.toString()===e.toString()){return;}jQuery.sap.log.warning("Replacing "+O+" by "+e,null,"sap.ushell.Container");}else{jQuery.sap.log.debug("Added "+e,null,"sap.ushell.Container");}m[i]=e;sap.ushell.utils.localStorageSetItem(R+i,e);};this.addRemoteSystemForServiceUrl=function(e){var M,i={baseUrl:";o="};if(!e||e.charAt(0)!=='/'||e.indexOf('//')===0){return;}M=/^[^?]*;o=([^\/;?]*)/.exec(e);if(M&&M.length>=2){i.alias=M[1];}e=e.replace(/;[^\/?]*/g,"");if(/^\/sap\/(bi|hana|hba)\//.test(e)){i.platform="hana";i.alias=i.alias||"hana";}else if(/^\/sap\/opu\//.test(e)){i.platform="abap";}if(i.alias&&i.platform){this.addRemoteSystem(new sap.ushell.System(i));}};this.attachLogoutEvent=function(F){l.attachEvent("Logout",F);};this.detachLogoutEvent=function(F,e){l.detachEvent("Logout",F);};this.logout=function(){var D=new jQuery.Deferred();function i(){A.logout(true).always(function(){L.removeItem(n);D.resolve();});}function u(){if(l.fireEvent("Logout",true)){i();}else{setTimeout(i,1000);}}function v(){var m,w=[];if(s){window.removeEventListener('storage',s);}sap.ushell.utils.localStorageSetItem(n,"pending");q();m=o();Object.keys(m).forEach(function(x){try{w.push(h("Container",m[x]).logout(false));}catch(e){jQuery.sap.log.warning("Could not create adapter for "+x,e.toString(),"sap.ushell.Container");}L.removeItem(R+x);});jQuery.when.apply(jQuery,w).done(u);}if(typeof A.addFurtherRemoteSystems==='function'){A.addFurtherRemoteSystems().always(v);}else{v();}return D.promise();};this.setLogonFrameProvider=function(e){if(this.oFrameLogonManager){this.oFrameLogonManager.setLogonFrameProvider(e);}};sap.ui.getCore().getEventBus().subscribe("sap.ushell.Container","addRemoteSystemForServiceUrl",function(e,E,D){t.addRemoteSystemForServiceUrl(D);});if(typeof A.logoutRedirect==='function'){s=function(e){function i(){a();r();}if(sap.ushell.Container!==t){return;}if(e.key.indexOf(R)===0&&e.newValue&&e.newValue!==L.getItem(e.key)){sap.ushell.utils.localStorageSetItem(e.key,e.newValue);}if(e.key===n){if(e.newValue==="pending"){q();if(l.fireEvent("Logout",true)){i();}else{setTimeout(i,1000);}}}};window.addEventListener('storage',s);}}sap.ushell.bootstrap=function(P,A){var o;if(sap.ushell.Container!==undefined){throw new Error("Cannot initialize twice");}sap.ushell.Container=null;c=JSON.parse(JSON.stringify(window["sap-ushell-config"]||{}));p=A;if(typeof window["sap.ushell.bootstrap.callback"]==="function"){setTimeout(window["sap.ushell.bootstrap.callback"]);}if(c.modulePaths){Object.keys(c.modulePaths).forEach(function(m){jQuery.sap.registerModulePath(m,c.modulePaths[m]);});}o=h("Container",new sap.ushell.System({alias:"",platform:c.platform||P}));return o.load().done(function(){sap.ushell.Container=new C(o);j(c);});};}());},"sap/ushell/services/EndUserFeedback.js":function(){(function(){"use strict";jQuery.sap.declare("sap.ushell.services.EndUserFeedback");function g(p,o){return jQuery.sap.getObject(p,undefined,o)||"";}sap.ushell.services.EndUserFeedback=function(a,c,p,s){var S=(s&&s.config)||{};this.sendFeedback=function(e){var u,n,A,b,E,f,U,d;u=g("clientContext.navigationData.applicationInformation.url",e);n=g("clientContext.navigationData.navigationHash",e);A=g("clientContext.navigationData.applicationInformation.additionalInformation",e);b=g("clientContext.navigationData.applicationInformation.applicationType",e);f=g("clientContext.navigationData.formFactor",e);U=g("clientContext.userDetails.userId",e);d=g("clientContext.userDetails.eMail",e);E={feedbackText:e.feedbackText||"",ratings:e.ratings||{},additionalInformation:A,applicationType:b,url:u?u.replace(/\?.*$/,''):"",navigationIntent:n.replace(/\?.*$/,''),formFactor:f,isAnonymous:e.isAnonymous||false,userId:e.isAnonymous?"":U,eMail:e.isAnonymous?"":d};return a.sendFeedback(E);};this.getLegalText=function(){return a.getLegalText();};this.isEnabled=function(){var d=new jQuery.Deferred();if(S.enabled===false){setTimeout(function(){d.reject();},0);return d.promise();}a.isEnabled().done(function(l){d.resolve();}).fail(function(e){d.reject();});return d.promise();};};}());},"sap/ushell/services/LaunchPage.js":function(){(function(){"use strict";jQuery.sap.declare("sap.ushell.services.LaunchPage");sap.ushell.services.LaunchPage=function(a,c){var t=this,T=[];this.getGroups=function(){var p=a.getGroups();p.fail(function(){jQuery.sap.log.error("getGroups failed");});return p;};this.getDefaultGroup=function(){var p=a.getDefaultGroup();p.fail(function(){jQuery.sap.log.error("getDefaultGroup failed");});return p;};this.getGroupTitle=function(g){return a.getGroupTitle(g);};this.getGroupId=function(g){return a.getGroupId(g);};this.getGroupTiles=function(g){return a.getGroupTiles(g);};this.addGroupAt=function(s,i){var p,b=i;if(a.addGroupAt){p=a.addGroupAt(s,iIndexe);p.fail(function(){jQuery.sap.log.error("addGroup "+s+" failed");});}else{var d=new jQuery.Deferred();p=a.addGroup(s);p.done(function(n,g){var m=this.moveGroup(n,b),e=n;m.done(function(){d.resolve(e);});m.fail(function(){d.reject();});}.bind(this));p.fail(function(){jQuery.sap.log.error("addGroup "+s+" failed");d.reject();});return d.promise();}return p;};this.addGroup=function(s){var p=a.addGroup(s);p.fail(function(){jQuery.sap.log.error("addGroup "+s+" failed");});return p;};this.removeGroup=function(g,i){var p=a.removeGroup(g,i);p.fail(function(){jQuery.sap.log.error("Fail to removeGroup "+t.getGroupTitle(g));});return p;};this.resetGroup=function(g,i){var p=a.resetGroup(g,i);p.fail(function(){jQuery.sap.log.error("Fail to resetGroup "+t.getGroupTitle(g));});return p;};this.isGroupRemovable=function(g){return a.isGroupRemovable(g);};this.isGroupLocked=function(g){if(typeof a.isGroupLocked==="function"){return a.isGroupLocked(g);}return false;};this.moveGroup=function(g,n){var p=a.moveGroup(g,n);p.fail(function(){jQuery.sap.log.error("Fail to moveGroup "+t.getGroupTitle(g));});return p;};this.setGroupTitle=function(g,s){var p=a.setGroupTitle(g,s);p.fail(function(){jQuery.sap.log.error("Fail to set Group title: "+t.getGroupTitle(g));});return p;};this.hideGroups=function(h){var d=jQuery.Deferred();if(typeof a.hideGroups!=="function"){d.reject('hideGroups() is not implemented in the Adapter.');}else{a.hideGroups(h).done(function(){d.resolve();}).fail(function(m){jQuery.sap.log.error("Fail to store groups visibility."+m);d.reject();});}return d.promise();};this.isGroupVisible=function(g){if(typeof a.isGroupVisible==="function"){return a.isGroupVisible(g);}return true;};this.addTile=function(C,g){var p=a.addTile(C,g);p.fail(function(){jQuery.sap.log.error("Fail to add Tile: "+t.getCatalogTileId(C));});return p;};this.removeTile=function(g,o,i){var p=a.removeTile(g,o,i);p.fail(function(){jQuery.sap.log.error("Fail to remove Tile: "+t.getTileId(o));});return p;};this.moveTile=function(o,s,i,S,b){var p=a.moveTile(o,s,i,S,b);p.fail(function(){jQuery.sap.log.error("Fail to move Tile: "+t.getTileId(o));});return p;};this.getTileId=function(o){return a.getTileId(o);};this.getTileTitle=function(o){return a.getTileTitle(o);};this.getTileView=function(o){var d=a.getTileView(o);if(!jQuery.isFunction(d.promise)){d=jQuery.Deferred().resolve(d).promise();}return d;};this.getTileSize=function(o){return a.getTileSize(o);};this.getTileTarget=function(o){return a.getTileTarget(o);};this.getTileDebugInfo=function(o){if(typeof a.getTileDebugInfo==="function"){return a.getTileDebugInfo(o);}return undefined;};this.isTileIntentSupported=function(o){if(typeof a.isTileIntentSupported==="function"){return a.isTileIntentSupported(o);}return true;};this.refreshTile=function(o){a.refreshTile(o);};this.setTileVisible=function(o,n){return a.setTileVisible(o,n);};this.registerTileActionsProvider=function(p){if(typeof p!=='function'){throw new Error("Tile actions Provider is not a function");}T.push(p);};this.getTileActions=function(o){var b=[];var A;if(typeof a.getTileActions==='function'){A=a.getTileActions(o);if(A&&A.length&&A.length>0){b.push.apply(b,A);}}for(var i=0;i<T.length;i++){A=T[i](o);if(A&&A.length&&A.length>0){b.push.apply(b,A);}}return b;};this.getCatalogs=function(){return a.getCatalogs();};this.isCatalogsValid=function(){return a.isCatalogsValid();};this.getCatalogData=function(C){if(typeof a.getCatalogData!=="function"){jQuery.sap.log.warning("getCatalogData not implemented in adapter",null,"sap.ushell.services.LaunchPage");return{id:this.getCatalogId(C)};}return a.getCatalogData(C);};this.getCatalogError=function(C){return a.getCatalogError(C);};this.getCatalogId=function(C){return a.getCatalogId(C);};this.getCatalogTitle=function(C){return a.getCatalogTitle(C);};this.getCatalogTiles=function(C){var p=a.getCatalogTiles(C);p.fail(function(){jQuery.sap.log.error("Fail to get Tiles of Catalog: "+t.getCatalogTitle(C));});return p;};this.getCatalogTileId=function(o){return a.getCatalogTileId(o);};this.getCatalogTileTitle=function(C){return a.getCatalogTileTitle(C);};this.getCatalogTileSize=function(C){return a.getCatalogTileSize(C);};this.getCatalogTileView=function(C){return a.getCatalogTileView(C);};this.getCatalogTileTargetURL=function(C){return a.getCatalogTileTargetURL(C);};this.getCatalogTileTags=function(C){if(typeof a.getCatalogTileTags==="function"){return a.getCatalogTileTags(C);}return[];};this.getCatalogTileKeywords=function(C){return a.getCatalogTileKeywords(C);};this.getCatalogTilePreviewTitle=function(C){return a.getCatalogTilePreviewTitle(C);};this.getCatalogTilePreviewIcon=function(C){return a.getCatalogTilePreviewIcon(C);};this.addBookmark=function(p,g){var P,d,m;if(!p.title){jQuery.sap.log.error("Add Bookmark - Missing title");throw new Error("Title missing in bookmark configuration");}if(!p.url){jQuery.sap.log.error("Add Bookmark - Missing URL");throw new Error("URL missing in bookmark configuration");}if(g&&this.isGroupLocked(g)){d=new jQuery.Deferred();P=d.promise();m='Tile cannot be added, target group ('+this.getGroupTitle(g)+')is locked!';d.reject(m);jQuery.sap.log.error(m);}else{P=a.addBookmark(p,g);P.fail(function(){jQuery.sap.log.error("Fail to add bookmark for URL: "+p.url+" and Title: "+p.title);});}return P;};this.countBookmarks=function(u){if(!u||typeof u!=="string"){jQuery.sap.log.error("Fail to count bookmarks. No valid URL");throw new Error("Missing URL");}var p=a.countBookmarks(u);p.fail(function(){jQuery.sap.log.error("Fail to count bookmarks");});return p;};this.deleteBookmarks=function(u){if(!u||typeof u!=="string"){throw new Error("Missing URL");}var p=a.deleteBookmarks(u);p.fail(function(){jQuery.sap.log.error("Fail to delete bookmark for: "+u);});return p;};this.updateBookmarks=function(u,p){if(!u||typeof u!=="string"){jQuery.sap.log.error("Fail to update bookmark. No valid URL");throw new Error("Missing URL");}if(!p||typeof p!=="object"){jQuery.sap.log.error("Fail to update bookmark. No valid parameters, URL is: "+u);throw new Error("Missing parameters");}var P=a.updateBookmarks(u,p);P.fail(function(){jQuery.sap.log.error("Fail to update bookmark for: "+u);});return P;};this.onCatalogTileAdded=function(s){return a.onCatalogTileAdded(s);};};}());},"sap/ushell/services/Message.js":function(){(function(){"use strict";jQuery.sap.declare("sap.ushell.services.Message");sap.ushell.services.Message=function(){var s=null;this.init=function(S){s=S;return this;};this.show=function(t,m,p){if(!m){jQuery.sap.log.error("Message must not be empty.");}else{if(s){s(t,m,p||{});}else{jQuery.sap.log.error("MessageService not initialized. [Message: '"+m+"']");}}};this.info=function(m,d){this.show(sap.ushell.services.Message.Type.INFO,m,{duration:d||3000});};this.error=function(m,t){m=(t!==undefined)?t+" , "+m:m;jQuery.sap.log.error(m);this.show(sap.ushell.services.Message.Type.ERROR,m,{title:t});};this.confirm=function(m,c,t,a){this.show(sap.ushell.services.Message.Type.CONFIRM,m,{title:t,callback:c,actions:a});};};sap.ushell.services.Message.hasNoAdapter=true;sap.ushell.services.Message.Type={INFO:0,ERROR:1,CONFIRM:2};}());},"sap/ushell/services/NavTargetResolution.js":function(){(function(){"use strict";jQuery.sap.declare("sap.ushell.services.NavTargetResolution");sap.ushell.services.NavTargetResolution=function(A,c,p,s){var S=s&&s.config,l,r=[{name:"DefaultAdapter",isApplicable:function(){return true;},resolveHashFragment:A.resolveHashFragment.bind(A)}],C;this._nextResolveHashFragment=function(a,h){var R,f;R=a.pop();if(R.isApplicable(h)){jQuery.sap.log.info("NavTargetResolution: custom resolver "+R.name+" resolves "+h);f=this._nextResolveHashFragment.bind(this,a);return R.resolveHashFragment(h,f);}return this._nextResolveHashFragment(a,h);};this.expandCompactHash=function(h){var u=sap.ushell.Container.getService("URLParsing"),o,d=new jQuery.Deferred(),t=this;o=u.parseShellHash(h);if(o&&o.params&&o.params["sap-intent-param"]){sap.ushell.Container.getService("AppState").getAppState(o.params["sap-intent-param"][0]).done(function(a){var v=a.getData("sap-intent-param"),H=h;if(v){H=sap.ushell.Container.getService("URLShortening").expandParamGivenRetrievalFunction(h,"sap-intent-param",function(){return v;});}d.resolve(H);}).fail(function(){d.resolve(h);});}else{d.resolve(h);}return d.promise();};this.resolveHashFragment=function(h){var u=sap.ushell.Container.getService("URLParsing"),o,d=new jQuery.Deferred(),t=this;this.expandCompactHash(h).done(function(H){t._invokeResolveHashChain(H).done(function(R){d.resolve(R);}).fail(function(m){d.reject(m);});}).fail(function(m){d.reject(m);});return d.promise();};this._invokeResolveHashChain=function(h){var o=r.map(function(a){return a;});return this._nextResolveHashFragment(o,h).done(function(R){C=R;});};this.baseResolveHashFragment=function(h){return A.resolveHashFragment(h);};this.getSemanticObjectLinks=function(a,P,i,o,b){var d,e,f,R;if(/\?/.test(a)){throw new Error("Parameter must not be part of semantic object");}d=(P===undefined)?undefined:JSON.parse(JSON.stringify(P));if(b){d=d||{};d["sap-xapp-state"]=encodeURIComponent(b);}e={target:{semanticObject:a,action:"dummyAction"},params:d};f=jQuery.Deferred();sap.ushell.Container.getService("ShellNavigation").hrefForExternal(e,true,o,true).done(function(R){d=R.params||d;if(A.getSemanticObjectLinks){A.getSemanticObjectLinks(a,d,i).done(function(g){f.resolve(g);}).fail(function(m){f.reject(m);});}else{f.resolve([]);}}).fail(function(m){f.reject(m);});return f.promise();};this.isIntentSupported=function(i){var R={};if(A.isIntentSupported){return A.isIntentSupported(i);}i.forEach(function(I){R[I]={supported:undefined};});return(new jQuery.Deferred()).resolve(R).promise();};this.registerCustomResolver=function(o){if(typeof o.name!=="string"){jQuery.sap.log.error("NavTargetResolution: Custom Resolver must have name {string} member");return false;}if(typeof o.isApplicable!=="function"){jQuery.sap.log.error("NavTargetResolution: Custom Resolver must have isApplicable member");return false;}if(typeof o.resolveHashFragment!=="function"){jQuery.sap.log.error("NavTargetResolution: Custom Resolver must have \"resolveHashFragment\" member");return false;}r.push(o);return true;};if(S&&jQuery.isArray(S.resolveLocal)){l=S.resolveLocal.map(function(a){return a.linkId;});this.registerCustomResolver({name:"localResolveNavigationResolver",cleanHash:function(h){if(h===""){return"#";}var a=sap.ushell.Container.getService("URLParsing").parseShellHash(h.substring(1));if(!a){return"#";}h="#"+a.semanticObject+"-"+a.action;return h;},_getIndex:function(o){var h=this.cleanHash(o);return l.indexOf(h.substring(1));},isApplicable:function(o){return this._getIndex(o)>=0;},resolveHashFragment:function(h){var d,i=this._getIndex(h),R,o,a,n;d=new jQuery.Deferred();R=JSON.parse(JSON.stringify(S.resolveLocal[i].resolveTo));o=sap.ushell.Container.getService("URLParsing").parseShellHash(h);if(o&&o.params){n=sap.ushell.Container.getService("URLParsing").paramsToString(o.params);a=R.url.indexOf('?')>=0;R.url=R.url+(a?"":"?")+n;}d.resolve(R);return d.promise();}});}this.registerCustomResolver({name:"StandaloneLocalResolver",aElement:undefined,cleanHash:function(h){if(h===""){return undefined;}var a=sap.ushell.Container.getService("URLParsing").parseShellHash(h.substring(1));if(!a){return undefined;}h="#"+a.semanticObject+"-"+a.action;return h;},isRunStandaloneHash:function(h){return typeof h==="string"&&h.indexOf("#Shell-runStandaloneApp")===0;},isApplicable:function(h){h=this.cleanHash(h);if(!h){return false;}return h==="#Test-url"||h==="#Test-local1"||h==="#Test-local2"||h==="#Test-config"||h==="#Test-clear"||this.isRunStandaloneHash(h);},parseUrl:function(u){if(!this.aElement){this.aElement=window.document.createElement('a');}this.aElement.href=u;return this.aElement;},resolveHashFragment:function(h){var d=new jQuery.Deferred(),b=null,t=this,e,P,L,f,g,n,i,o,F=h,u;h=this.cleanHash(h);if(!h){return false;}b={"#Test-config":{applicationType:"URL",url:"/sap/bc/ui5_ui5/ui2/ushell/test-resources/sap/ushell/demoapps/FioriSandboxConfigApp",additionalInformation:"SAPUI5.Component=sap.ushell.demoapps.FioriSandboxConfigApp"},"none":{applicationType:"URL",url:"",additionalInformation:""}};function j(K){if(localStorage){return localStorage[K];}return undefined;}function k(o,K){var e={},a;for(a in o){if(o.hasOwnProperty(a)){if(a!==K){e[a]=o[a];}}}return e;}function m(U){if(t.parseUrl(U).origin!==window.location.origin){return undefined;}var a=t.parseUrl(U).pathname,x=jQuery.sap.getObject("runStandaloneAppFolderWhitelist",0,S),y;if(!x){return undefined;}for(y in x){if(x.hasOwnProperty(y)){if(x[y]){if(y==="*"||a.indexOf(t.parseUrl(y).pathname)===0){return U;}}}}return undefined;}function q(K){return jQuery.sap.getUriParameters().get(K);}function v(a,K){return(a.params&&a.params[K]&&a.params[K][0])||q(K);}function w(K,V){if(localStorage){localStorage[K]=V;}}if(b[h]){e=b[h];}else if(h==="#Test-clear"){w("sap.ushell.#Test-local1",undefined);w("sap.ushell.#Test-local2",undefined);jQuery.sap.log.info("NavTargetResolution: Local storage keys for #Test have been cleared");e=b["#Test-config"];}else if(this.isRunStandaloneHash(h)){L={applicationType:"URL"};P=sap.ushell.Container.getService("URLParsing").parseShellHash(F);f=(v(P,"sap-ushell-SAPUI5.Component")&&"SAPUI5.Component="+v(P,"sap-ushell-SAPUI5.Component"))||(v(P,"sap-ushell-additionalInformation"));u=v(P,"sap-ushell-url")||"";o=k(P.params,"sap-ushell-SAPUI5.Component");o=k(o,"sap-ushell-additionalInformation");o=k(o,"sap-ushell-url");n=sap.ushell.Container.getService("URLParsing").paramsToString(o);i=u.indexOf('?')>=0;if(n){u=u+(i?(((u[u.length-1]!=="&")&&"&")||""):"?")+n;}L.url=m(u);L.additionalInformation=f;e=L;}else if(h==="#Test-local1"||h==="#Test-local2"||h==="#Test-url"){e=j("sap.ushell."+h);if(!e||e==="undefined"){L={applicationType:"URL"};}else{L=JSON.parse(e);}if((window.location.hostname==="localhost")||S.allowTestUrlComponentConfig){g="sap-ushell-test-"+h.substring(6);f=q(g+"-additionalInformation");if(f){L.additionalInformation=f;}u=q(g+"-url");if(u){L.url=m(u);}}if(!L.url){jQuery.sap.log.info("NavTargetResolution: No configured app for "+h+" found ( local storage or url params sap-ushell-test-local1-url  sap-ushell-test-local1-additionalInfo  not supplied? ");jQuery.sap.log.info("NavTargetResolution: Defaulting to config app ...\n");d.reject("URL is not resolvable");return d.promise();}L.url=m(L.url);e=L;}if(e.url===undefined){d.reject("URL is not resolvable");return d.promise();}jQuery.sap.log.info("NavTargetResolution: As URL:  http://localhost:8080/sap/bc/ui5_ui5/ui2/ushell/shells/abap/FioriLaunchpad.html?sap-ushell-test-local1-url="+encodeURIComponent((e&&e.url)||"")+"&sap-ushell-test-local1-additionalInformation="+encodeURIComponent((e&&e.additionalInfo)||"")+"#Test-local1");jQuery.sap.log.info("NavTargetResolution: Resolving "+h+" to "+JSON.stringify(e));d.resolve(e);return d.promise();}});this.getCurrentResolution=function(){return C;};};}());},"sap/ushell/services/PageBuilding.js":function(){(function(){"use strict";jQuery.sap.declare("sap.ushell.services.PageBuilding");jQuery.sap.require("sap.ui2.srvc.factory");jQuery.sap.require("sap.ui2.srvc.page");sap.ushell.services.PageBuilding=function(a,c){this.getFactory=function(){return a.getFactory();};this.getPage=function(p){return a.getFactory().createPage(p);};this.getPageSet=function(i){var d=new jQuery.Deferred();a.getFactory().createPageSet(i,d.resolve.bind(d),d.reject.bind(d));return d.promise();};};}());},"sap/ushell/services/Personalization.js":function(){(function(){"use strict";jQuery.sap.declare("sap.ushell.services.Personalization");jQuery.sap.require("sap.ushell.utils");jQuery.sap.require("sap.ui.core.format.DateFormat");var c="sap.ushell.personalization#",I="ITEM#",v="VARIANTSET#",A="yyyyMMddHHmmss",d="ADMIN#",f="sap-ushell-container-scope",g="sap-ushell-container-storageUTCTimestamp",h="sap-ushell-container-expireUTCTimestamp";function j(C){return c+C;}sap.ushell.services.Personalization=function(a,C,p,b){this._oConfig=b;this._sSeed=jQuery.sap.getObject("config.seed",undefined,b)||"ABC";this._oAdapterWithBackendAdapter=new sap.ushell.services.Personalization.WindowAdapter(this,a);this._oAdapterWindowOnly=new sap.ushell.services.Personalization.WindowAdapter(this,undefined);this._supportsGetWithoutSubsequentLoad=(a&&a.supportsGetWithoutSubsequentLoad===true);this._oContainerMap=new sap.ushell.utils.Map();this._oPendingOperationsMap=new sap.ushell.utils.Map();};sap.ushell.services.Personalization.prototype.SAVE_DEFERRED_DROPPED="Deferred save dropped (OK) - Data superseeded by subsequent save";sap.ushell.services.Personalization.prototype.constants={keyCategory:{"FIXED_KEY":"FIXED_KEY","GENERATED_KEY":"GENERATED_KEY"},writeFrequency:{"HIGH":"HIGH","LOW":"LOW"}};sap.ushell.services.Personalization.prototype.getGeneratedKey=function(){var C="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",D=new Date().getTime().toString(),R="",s,a=0,i;while(this._sSeed.length<40){this._sSeed=this._sSeed+Math.random().toString().substring(2);}for(i=0;i<3;i=i+1){a=this._sSeed.charCodeAt(i)+31*a;a=a&a;R=R+C[Math.abs(a%36)];}s=Math.random().toString().substring(2)+D+Math.random().toString().substring(2)+D+"1234523413542345698772";for(i=0;i<37;i=i+1){a=this._sSeed.charCodeAt(i)+parseInt(s[i],10)+31*a;a=a&a;R=R+C[Math.abs(a%36)];}return R.substring(0,40);};sap.ushell.services.Personalization.prototype.getPersonalizer=function(p,s,C){return new sap.ushell.services.Personalizer(this,this._oAdapterWithBackendAdapter,p,s,C);};sap.ushell.services.Personalization.prototype.getTransientPersonalizer=function(){return new sap.ushell.services.TransientPersonalizer();};function k(e,p){var a;for(a in p){if(typeof p[a]!=='function'){if(p.hasOwnProperty(a)){if(a===e){return true;}}}}return false;}sap.ushell.utils.testPublishAt(sap.ushell.services.Personalization);function r(s){var C=sap.ushell.services.Personalization.prototype.constants,D={validity:Infinity,keyCategory:C.keyCategory.GENERATED_KEY,writeFrequency:C.writeFrequency.HIGH,clientStorageAllowed:false};if(!s){return D;}D.validity=s&&s.validity;if(D.validity===null||D.validity===undefined||typeof D.validity!=="number"){D.validity=Infinity;}if(!(typeof D.validity==="number"&&((D.validity>=0&&D.validity<1000)||D.validity===Infinity))){D.liftime=Infinity;}D.keyCategory=k(s.keyCategory,C.keyCategory)?s.keyCategory:D.keyCategory;D.writeFrequency=k(s.writeFrequency,C.writeFrequency)?s.writeFrequency:D.writeFrequency;if(typeof s.clientStorageAllowed==='boolean'&&(s.clientStorageAllowed===true||s.clientStorageAllowed===false)){D.clientStorageAllowed=s.clientStorageAllowed;}return D;}sap.ushell.utils.testPublishAt(sap.ushell.services.Personalization);function l(C,s,_,a){var p="",L,b;if(typeof C!=="string"){throw new sap.ushell.utils.Error("sContainerKey is not a string: sap.ushell.services.Personalization");}if(C.length>40){jQuery.sap.log.error("Personalization Service container key (\""+C+"\") should be less than 40 characters [current :"+C.length+"]");}s=r(s);p=j(C);L=window["sap-ushell-config"]&&window["sap-ushell-config"].services&&window["sap-ushell-config"].services.ShellNavigation&&window["sap-ushell-config"].services.ShellNavigation.config&&window["sap-ushell-config"].services.ShellNavigation.config.reload;b=_;if(s&&s.validity===0){if(L){s.validity=1440;}else{b=a;}}return{oAdapterForScope:b,oScope:s,sPrefixedContainerKey:p};}sap.ushell.services.Personalization.prototype.getContainer=function(C,s,a){return this._createContainer(C,s,false,a);};sap.ushell.services.Personalization.prototype.createEmptyContainer=function(C,s,a){return this._createContainer(C,s,true,a);};sap.ushell.services.Personalization.prototype._createContainer=function(C,s,b,a){var D=new jQuery.Deferred(),e,L,i;e=l(C,s,this._oAdapterWithBackendAdapter,this._oAdapterWindowOnly);i=new sap.ushell.services.Personalization.ContextContainer(this,e.oAdapterForScope,e.sPrefixedContainerKey,e.oScope,a);if(b&&this._supportsGetWithoutSubsequentLoad){L=new jQuery.Deferred();L.resolve(i);}else{L=i.load();}L.fail(function(){D.reject();}).done(function(){if(b||i._isExpired()){i.clear();}D.resolve(i);});return D.promise();};sap.ushell.services.Personalization.prototype.delContainer=function(C,s){var a={},D={},p,b,P="",t=this;s=r(s);P=j(C);D=new jQuery.Deferred();p=t._pendingContainerOperations_cancelAddNext(C,null);p.always(function(){t.getContainer(C,s).fail(function(){t._pendingContainerOperations_cancelAddNext(C,D);D.reject();}).done(function(a){var e;t._pendingContainerOperations_cancelAddNext(C,D);if(s.validity===0){e=t._oAdapterWindowOnly;}else{e=t._oAdapterWithBackendAdapter;}e.delAdapterContainer(P,s).fail(function(){D.reject();}).done(function(){D.resolve();});});});return D.promise();};sap.ushell.services.Personalization.prototype._pendingContainerOperations_flushAddNext=function(C,D){var p,s;p=this._oPendingOperationsMap.get(C);if(!p){p=new jQuery.Deferred();p.resolve();}if(D!==null){this._oPendingOperationsMap.put(C,D);}if(!p||p.state()!=="pending"){return p;}clearTimeout(p._sapTimeoutId);p._sapTimeoutId=undefined;if(typeof p._sapFnSave==="function"){s=p._sapFnSave;p._sapFnSave=undefined;s();}return p;};sap.ushell.services.Personalization.prototype._pendingContainerOperations_cancelAddNext=function(C,D){var p,s;p=this._oPendingOperationsMap.get(C);if(!p){p=new jQuery.Deferred();p.resolve();}if(D!==null){this._oPendingOperationsMap.put(C,D);}if(!p||p.state()!=="pending"){return p;}if(p._sapTimeoutId){clearTimeout(p._sapTimeoutId);p._sapTimeoutId=undefined;p.resolve(sap.ushell.services.Personalization.prototype.SAVE_DEFERRED_DROPPED);}return p;};sap.ushell.services.Personalization.prototype.getPersonalizationContainer=function(C){var p="",a={},P={},D={},t=this;if(typeof C!=="string"){throw new sap.ushell.utils.Error("sContainerKey is not a string: sap.ushell.services.Personalization");}p=j(C);if(this._oContainerMap.containsKey(p)){return this._oContainerMap.get(p).promise();}D=new jQuery.Deferred();P=new sap.ushell.services.PersonalizationContainer(this._oAdapterWithBackendAdapter,p);P.done(function(a){D.resolve(a);}).fail(function(a){D.reject(a);});this._oContainerMap.put(p,D);return D.promise();};sap.ushell.services.Personalization.prototype.delPersonalizationContainer=function(C){var a={},D={},p="",t=this;p=j(C);D=new jQuery.Deferred();this.getPersonalizationContainer(C).fail(function(){D.reject();}).done(function(a){t._oAdapterWithBackendAdapter.delAdapterContainer(p).fail(function(){D.reject();}).done(function(){t._oContainerMap.remove(p);D.resolve();});});return D.promise();};sap.ushell.services.Personalizer=function(s,a,p,S,C){var b="sap.ushell.personalization#";this._sPersContainer="";this._sPersItem="";this._sPersVariant=null;this._oAdapter=a;this._oService=s;this._oScope=S;this._oComponent=C;if(!p||!p.container||!p.item||typeof p.container!=="string"||typeof p.item!=="string"){throw new sap.ushell.utils.Error("Invalid input for oPersId: sap.ushell.services.Personalization");}this._sPersContainer=p.container;this._sPersItem=p.item;};sap.ushell.services.Personalizer.prototype._getContainer=function(p){if(!this._oGetContainerPromise){this._oGetContainerPromise=this._oService.getContainer(p,this._oScope,this._oComponent);}return this._oGetContainerPromise;};sap.ushell.services.Personalizer.prototype.getPersData=function(){var D={},t=this;D=new jQuery.Deferred();this._getContainer(this._sPersContainer).fail(function(){D.reject();}).done(function(C){D.resolve(C.getItemValue(t._sPersItem));});D.fail(function(){jQuery.sap.log.error("Fail to get Personalization data for Personalizer container: "+t._sPersContainer);});return D.promise();};sap.ushell.services.Personalizer.prototype.setPersData=function(V){var D={},t=this;D=new jQuery.Deferred();this._getContainer(this._sPersContainer).fail(function(){D.reject();}).done(function(C){C.setItemValue(t._sPersItem,V);C.save().fail(function(){D.reject();}).done(function(){D.resolve();});});D.fail(function(){jQuery.sap.log.error("Fail to set Personalization data for Personalizer container: "+t._sPersContainer);});return D.promise();};sap.ushell.services.Personalizer.prototype.delPersData=function(){var D={},t=this,M;D=new jQuery.Deferred();this._oService.getPersonalizationContainer(this._sPersContainer).fail(function(){D.reject();}).done(function(C){C.delItem(t._sPersItem);C.save().fail(function(){D.reject();}).done(function(){D.resolve();});});M=D.promise();M.fail(function(){jQuery.sap.log.error("Fail to delete Personalization data for Personalizer container: "+this._sPersContainer);});return M;};sap.ushell.services.TransientPersonalizer=function(){this._oValue=undefined;};sap.ushell.services.TransientPersonalizer.prototype.getPersData=function(){var D;D=new jQuery.Deferred();D.resolve(this._oValue);return D.promise();};sap.ushell.services.TransientPersonalizer.prototype.setPersData=function(V){var D;D=new jQuery.Deferred();this._oValue=V;D.resolve();return D.promise();};sap.ushell.services.TransientPersonalizer.prototype.delPersData=function(){var D;D=new jQuery.Deferred();this._oValue=undefined;D.resolve();return D.promise();};sap.ushell.services.TransientPersonalizer.prototype.setValue=function(V){this._oValue=V;};sap.ushell.services.TransientPersonalizer.prototype.getValue=function(){return this._oValue;};sap.ushell.services.PersonalizationContainer=function(a,C){this._sContainerKey=C;this._oAdapterContainer={};this._aLoadedVariantSetKeys=[];this._aLoadedItemKeys=[];var D={},t=this;this._init();D=new jQuery.Deferred();if(!this._sContainerKey||typeof this._sContainerKey!=="string"){throw new sap.ushell.utils.Error("Invalid container key: sap.ushell.services.Personalization");}this._oAdapterContainer=a.getAdapterContainer(this._sContainerKey);this.load().fail(function(){D.reject();}).done(function(){D.resolve(t);});return D.promise();};sap.ushell.services.PersonalizationContainer.prototype._init=function(){this._oVariantSetMap={};this._oItemMap={};this._aLoadedVariantSetKeys=[];this._aLoadedItemKeys=[];this._oVariantSetMap=new sap.ushell.utils.Map();this._oItemMap=new sap.ushell.utils.Map();};function m(O){if(O===undefined){return undefined;}try{return JSON.parse(JSON.stringify(O));}catch(e){return undefined;}}function n(O){if(O===undefined){return undefined;}try{return JSON.parse(O);}catch(e){return undefined;}}sap.ushell.services.PersonalizationContainer.prototype.load=function(){var D={},i=[],V=[],a=[],M=[],t=this;function b(a){var N=[],p=[],R=[];N=a.filter(function(s){return s.indexOf(I)!==0;});if(N.length===0){return a;}p=a.filter(function(s){return s.indexOf(I)===0;});N.forEach(function(s){var e={},P="";P=I+s;e=m(t._oAdapterContainer.getItemValue(s));t._oAdapterContainer.setItemValue(P,e);t._oAdapterContainer.delItem(s);if(jQuery.inArray(P,p)===-1){p.push(P);}});return p;}D=new jQuery.Deferred();if(!this._sContainerKey){throw new sap.ushell.utils.Error("Invalid container key: sap.ushell.services.Personalization");}this._init();this._oAdapterContainer.load().fail(function(){D.reject();}).done(function(){i=t._oAdapterContainer.getItemKeys().splice(0);V=i.filter(function(s){return s.indexOf(v)===0;});V.forEach(function(s){var e={};e=new sap.ushell.services.PersonalizationContainerVariantSet(s,t._oAdapterContainer);t._oVariantSetMap.put(s,e);});a=i.filter(function(s){return s.indexOf(v)!==0;});M=b(a);M.forEach(function(s){t._oItemMap.put(s,m(t._oAdapterContainer.getItemValue(s)));});t._aLoadedVariantSetKeys=t._oVariantSetMap.keys().splice(0);t._aLoadedItemKeys=t._oItemMap.keys().splice(0);D.resolve();});return D.promise();};sap.ushell.services.PersonalizationContainer.prototype.save=function(){var s,i;this._serializeVariantSets();this._serializeItems();s=new jQuery.Deferred();function S(){s.resolve();}function a(){s.reject();}try{i=this._oAdapterContainer.save();i.fail(a);i.done(S);}catch(e){s.reject();}return s.promise();};sap.ushell.services.PersonalizationContainer.prototype.getItemKeys=function(){return this._oItemMap.keys().map(function(e){return e.replace(I,"","");});};sap.ushell.services.PersonalizationContainer.prototype.getItemValue=function(i){if(typeof i!=="string"){return undefined;}return this._oItemMap.get(I+i);};sap.ushell.services.PersonalizationContainer.prototype.containsItem=function(i){if(typeof i!=="string"){return undefined;}return this._oItemMap.containsKey(I+i);};sap.ushell.services.PersonalizationContainer.prototype.setItemValue=function(i,a){if(typeof i!=="string"){throw new sap.ushell.utils.Error("Parameter value of sItemKey is not a string: sap.ushell.services.Personalization");}this._oItemMap.put(I+i,a);};sap.ushell.services.PersonalizationContainer.prototype.delItem=function(i){if(typeof i!=="string"){return undefined;}if(this.containsItem(i)){this._oItemMap.remove(I+i);}};sap.ushell.services.PersonalizationContainer.prototype._serializeItems=function(){var i=[],D=[],t=this;i=this._oItemMap.keys();i.forEach(function(s){t._oAdapterContainer.setItemValue(s,m(t._oItemMap.get(s)));});D=this._aLoadedItemKeys.filter(function(s){return!(i.indexOf(s)>-1);});D.forEach(function(s){t._oAdapterContainer.delItem(s);});};sap.ushell.services.PersonalizationContainer.prototype.getVariantSetKeys=function(){var a=[],V=[],p=[],t=this;p=this._oVariantSetMap.keys();V=p.map(function(e){return e.replace(v,"","");});return V;};sap.ushell.services.PersonalizationContainer.prototype.containsVariantSet=function(V){return this._oVariantSetMap.containsKey(v+V);};sap.ushell.services.PersonalizationContainer.prototype.getVariantSet=function(V){var p,a={},M={};p=v+V;a=this._oVariantSetMap.get(p);return a;};sap.ushell.services.PersonalizationContainer.prototype.addVariantSet=function(V){var e={},a={},p="";if(this.containsVariantSet(V)){throw new sap.ushell.utils.Error("Container already contains a variant set with key '"+V+"': sap.ushell.services.Personalization");}p=v+V;e={currentVariant:null,variants:{}};this._oAdapterContainer.setItemValue(p,e);a=new sap.ushell.services.PersonalizationContainerVariantSet(p,this._oAdapterContainer);this._oVariantSetMap.put(p,a);return a;};sap.ushell.services.PersonalizationContainer.prototype._serializeVariantSets=function(){var V=[],s="",D=[],t=this;V=this._oVariantSetMap.keys();V.forEach(function(s){var a={},b={};a=t._oVariantSetMap.get(s);b=a._serialize();t._oAdapterContainer.setItemValue(s,m(b));});D=this._aLoadedVariantSetKeys.filter(function(s){return!(V.indexOf(s)>-1);});D.forEach(function(s){t._oAdapterContainer.delItem(s);});};sap.ushell.services.PersonalizationContainer.prototype.delVariantSet=function(V){var p="";p=v+V;this._oVariantSetMap.remove(p);return this._oAdapterContainer.delItem(p);};sap.ushell.services.Personalization.ContextContainer=function(s,a,C,S,b){this._oService=s;this._sContainerKey=C;this._oAdapterContainer={};this._oScope=S||r(S);this._aLoadedKeys=[];this._oUnmodifiableContainer=undefined;var D={},e,t=this;if(!(b instanceof sap.ui.core.UIComponent)&&b!==undefined){throw new Error("oComponent passed must be a UI5 Component or must be undefined");}if(b&&b.getMetadata&&b.getMetadata().getLibraryName){e=b.getMetadata().getLibraryName();}this.clear();if(!this._sContainerKey||typeof this._sContainerKey!=="string"){throw new sap.ushell.utils.Error("Invalid container key: sap.ushell.services.Personalization");}this._oAdapterContainer=a.getAdapterContainer(this._sContainerKey,this._oScope,e);return this;};sap.ushell.services.Personalization.ContextContainer.prototype.getValidity=function(){return this._oScope.validity;};sap.ushell.services.Personalization.ContextContainer.prototype.clear=function(){this._oItemMap={};this._aLoadedItemKeys=[];this._clear=true;this._oItemMap=new sap.ushell.utils.Map();};sap.ushell.services.Personalization.ContextContainer.prototype.load=function(){var D={},a=[],p,t=this;D=new jQuery.Deferred();if(!this._sContainerKey){throw new sap.ushell.utils.Error("Invalid container key: sap.ushell.services.Personalization");}this.clear();p=this._oService._pendingContainerOperations_flushAddNext(this._sContainerKey,D);p.always(function(){t._oAdapterContainer.load().fail(function(){D.reject();}).done(function(){t._copyFromAdapter();if(t._isExpired()){t.clear();}D.resolve();});});return D.promise();};sap.ushell.services.Personalization.ContextContainer.prototype._copyFromAdapter=function(){var t=this,a;a=t._oAdapterContainer.getItemKeys().splice(0);a.forEach(function(i){t._oItemMap.put(i,JSON.stringify(t._oAdapterContainer.getItemValue(i)));});this._aLoadedItemKeys=t._oItemMap.keys().splice(0);};sap.ushell.services.Personalization.ContextContainer.prototype._isExpired=function(){var t=this,F,T,s;if(this.getValidity()===Infinity||this.getValidity()===0){return false;}T=this._getItemValueInternal(d,h);F=sap.ui.core.format.DateFormat.getDateInstance({pattern:A});s=F.format(this._getNow(),true);return T&&s>T;};sap.ushell.services.Personalization.ContextContainer.prototype._getNow=function(){return new Date();};sap.ushell.services.Personalization.ContextContainer.prototype._copyToAdapterUpdatingValidity=function(){var i=[],D=[],t=this,N,F,T,s;if(this._clear){i=this._oAdapterContainer.getItemKeys().splice(0);i.forEach(function(a){t._oAdapterContainer.delItem(a);});this._clear=false;}if(this.getValidity()===Infinity||this.getValidity()===0){this._delItemInternal(d,f);this._delItemInternal(d,h);this._delItemInternal(d,g);}else{F=sap.ui.core.format.DateFormat.getDateInstance({pattern:A});N=this._getNow();s=F.format(N,true);T=F.format(new Date(N.getTime()+this.getValidity()*60000),true);this._setItemValueInternal(d,f,this._oScope);this._setItemValueInternal(d,h,T);this._setItemValueInternal(d,g,s);}i=this._oItemMap.keys();i.forEach(function(a){t._oAdapterContainer.setItemValue(a,n(t._oItemMap.get(a)));});D=this._aLoadedItemKeys.filter(function(a){return!(i.indexOf(a)>-1);});D.forEach(function(a){t._oAdapterContainer.delItem(a);});};sap.ushell.services.Personalization.ContextContainer.prototype.save=function(){var s,i,p,t=this;this._copyToAdapterUpdatingValidity();s=new jQuery.Deferred();p=this._oService._pendingContainerOperations_cancelAddNext(this._sContainerKey,s);p.always(function(){try{i=t._oAdapterContainer.save().fail(function(){s.reject();}).done(function(){s.resolve();});}catch(e){s.reject();}});return s.promise();};sap.ushell.services.Personalization.ContextContainer.prototype.saveDeferred=function(a){var s,i,p,t=this;this._copyToAdapterUpdatingValidity();s=new jQuery.Deferred();p=this._oService._pendingContainerOperations_cancelAddNext(this._sContainerKey,s);function D(){p.always(function(){try{i=t._oAdapterContainer.save().fail(function(){s.reject();}).done(function(){s.resolve();});}catch(e){s.reject();}});}s._sapFnSave=D;s._sapTimeoutId=setTimeout(D,a);return s.promise();};sap.ushell.services.Personalization.ContextContainer.prototype.flush=function(){var s,i,p,t=this;this._copyToAdapterUpdatingValidity();s=new jQuery.Deferred();p=this._oService._pendingContainerOperations_flushAddNext(this._sContainerKey,s);p.fail(function(){s.reject();}).done(function(){s.resolve();});return s.promise();};sap.ushell.services.Personalization.ContextContainer.prototype.getItemKeys=function(){var F=this._oItemMap.keys().filter(function(s){return s.indexOf(I)===0;});return F.map(function(e){return e.replace(I,"","");});};sap.ushell.services.Personalization.ContextContainer.prototype._getInternalKeys=function(){return this._oItemMap.keys().splice(0);};sap.ushell.services.Personalization.ContextContainer.prototype.getItemValue=function(i){return this._getItemValueInternal(I,i);};sap.ushell.services.Personalization.ContextContainer.prototype._getItemValueInternal=function(p,i){if(typeof i!=="string"||typeof p!=="string"){return undefined;}return n(this._oItemMap.get(p+i));};sap.ushell.services.Personalization.ContextContainer.prototype.containsItem=function(i){if(typeof i!=="string"){return undefined;}return this._oItemMap.containsKey(I+i);};sap.ushell.services.Personalization.ContextContainer.prototype.setItemValue=function(i,a){this._setItemValueInternal(I,i,a);};sap.ushell.services.Personalization.ContextContainer.prototype._setItemValueInternal=function(i,s,a){if(typeof s!=="string"||typeof i!=="string"){throw new sap.ushell.utils.Error("Parameter value of sItemKey or sItemValue is not a string: sap.ushell.services.Personalization");}if(s.length>40){jQuery.sap.log.error("Personalization Service item key/variant set name (\""+s+"\") should be less than 40 characters [current :"+s.length+"]");}this._oItemMap.put(i+s,JSON.stringify(a));};sap.ushell.services.Personalization.ContextContainer.prototype.delItem=function(i){this._delItemInternal(I,i);};sap.ushell.services.Personalization.ContextContainer.prototype._delItemInternal=function(p,i){if(typeof i!=="string"){return undefined;}if(typeof p!=="string"){return undefined;}this._oItemMap.remove(p+i);};sap.ushell.services.Personalization.ContextContainer.prototype.getKey=function(){return this._sContainerKey.substring(c.length);};sap.ushell.services.Personalization.ContextContainer.prototype.getUnmodifiableContainer=function(){var C=this;if(!this._oUnmodifiableContainer){this._oUnmodifiableContainer=(function(){var u={};["clear","delItem","flush","load","save","saveDeferred","setItemValue"].forEach(function(F){u[F]=function(N){throw new sap.ushell.utils.Error("Function "+N+" can't be called on unmodifiable container","sap.ushell.services.Personalization.ContextContainer");}.bind(undefined,F);});["containsItem","getItemKeys","getItemValue","getUnmodifiableContainer","getValidity"].forEach(function(F){if(C[F]){u[F]=C[F].bind(C);}});return u;}());}return this._oUnmodifiableContainer;};sap.ushell.services.Personalization.VariantSetAdapter=function(C){this._oContextContainer=C;};sap.ushell.services.Personalization.VariantSetAdapter.prototype.save=function(){return this._oContextContainer.save();};sap.ushell.services.Personalization.VariantSetAdapter.prototype.getVariantSetKeys=function(){var p=this._oContextContainer._getInternalKeys(),V=[];V=p.map(function(e){return e.replace(v,"","");});return V;};sap.ushell.services.Personalization.VariantSetAdapter.prototype.containsVariantSet=function(V){return this.getVariantSetKeys().indexOf(V)>=0;};sap.ushell.services.Personalization.VariantSetAdapter.prototype.getVariantSet=function(V){var a=this._oContextContainer._getItemValueInternal(v,V);if(!a){return undefined;}return new sap.ushell.services.Personalization.VariantSet(V,this._oContextContainer);};sap.ushell.services.Personalization.VariantSetAdapter.prototype.addVariantSet=function(V){var e={},a={},p="";if(this.containsVariantSet(V)){throw new sap.ushell.utils.Error("Container already contains a variant set with key '"+V+"': sap.ushell.services.Personalization");}e={currentVariant:null,variants:{}};this._oContextContainer._setItemValueInternal(v,V,e);a=new sap.ushell.services.Personalization.VariantSet(V,this._oContextContainer);return a;};sap.ushell.services.Personalization.VariantSetAdapter.prototype.delVariantSet=function(V){this._oContextContainer._delItemInternal(v,V);};sap.ushell.services.Personalization.VariantSet=function(V,C){var s,a,b,e=new sap.ushell.utils.Map(),i=new sap.ushell.utils.Map(),p,q,t;this._oContextContainer=C;this._sVariantSetKey=V;this._oVariantSetData=this._oContextContainer._getItemValueInternal(v,this._sVariantSetKey);if(Object.prototype.hasOwnProperty.call(this._oVariantSetData,"currentVariant")){b=this._oVariantSetData.currentVariant;}else{throw new sap.ushell.utils.Error("Corrupt variant set data: sap.ushell.services.Personalization");}if(Object.prototype.hasOwnProperty.call(this._oVariantSetData,"variants")){for(s in this._oVariantSetData.variants){if(Object.prototype.hasOwnProperty.call(this._oVariantSetData.variants,s)){a=this._oVariantSetData.variants[s].name;p=this._oVariantSetData.variants[s].variantData;if(e.containsKey(a)){throw new sap.ushell.utils.Error("Variant name already exists: sap.ushell.services.Personalization");}else{e.put(a,s);q=new sap.ushell.services.PersonalizationContainerVariant(s,a,p);i.put(s,q);}}}}else{throw new sap.ushell.utils.Error("Corrupt variant set data: sap.ushell.services.Personalization");}return this;};sap.ushell.services.Personalization.VariantSet.prototype._getVariantSet=function(){return this._oVariantSetData;};sap.ushell.services.Personalization.VariantSet.prototype._serialize=function(){this._oContextContainer._setItemValueInternal(v,this._sVariantSetKey,this._oVariantSetData);};sap.ushell.services.Personalization.VariantSet.prototype.getCurrentVariantKey=function(){return this._getVariantSet().currentVariant;};sap.ushell.services.Personalization.VariantSet.prototype.setCurrentVariantKey=function(V){this._getVariantSet().currentVariant=V;this._serialize();};sap.ushell.services.Personalization.VariantSet.prototype.getVariantKeys=function(){var V=new sap.ushell.utils.Map(),a=this._getVariantSet(this._sVariantSetKey),s;if(Object.prototype.hasOwnProperty.call(a,"variants")){for(s in a.variants){if(Object.prototype.hasOwnProperty.call(a.variants,s)){V.put(s,"dummy");}}}else{throw new sap.ushell.utils.Error("Corrupt variant set data: sap.ushell.services.Personalization");}return V.keys();};sap.ushell.services.Personalization.VariantSet.prototype.getVariantNamesAndKeys=function(){var V=new sap.ushell.utils.Map(),a=new sap.ushell.utils.Map(),b=this._getVariantSet(this._sVariantSetKey),s,e,i;if(Object.prototype.hasOwnProperty.call(b,"variants")){for(s in b.variants){if(Object.prototype.hasOwnProperty.call(b.variants,s)){e=b.variants[s].name;i=b.variants[s].variantData;if(V.containsKey(e)){throw new sap.ushell.utils.Error("Variant name already exists: sap.ushell.services.Personalization");}else{V.put(e,s);}a.put(s,"dummy");}}}else{throw new sap.ushell.utils.Error("Corrupt variant set data: sap.ushell.services.Personalization");}return V.entries;};sap.ushell.services.Personalization.VariantSet.prototype.getVariant=function(V){if(typeof V!=="string"){return undefined;}var a=this._getVariantSet(this._sVariantSetKey),s,b,e;if(Object.prototype.hasOwnProperty.call(a,"variants")&&Object.prototype.hasOwnProperty.call(a.variants,V)){s=a.variants[V].name;e=a.variants[V].variantData;b=new sap.ushell.services.Personalization.Variant(this,V,s,e);return b;}return undefined;};sap.ushell.services.Personalization.VariantSet.prototype.getVariantKeyByName=function(V){if(typeof V!=="string"){return undefined;}var a=this._getVariantSet(this._sVariantSetKey),s;if(Object.prototype.hasOwnProperty.call(a,"variants")){for(s in a.variants){if(Object.prototype.hasOwnProperty.call(a.variants,s)){if(V===a.variants[s].name){return s;}}}}else{throw new sap.ushell.utils.Error("Corrupt variant set data: sap.ushell.services.Personalization");}return undefined;};sap.ushell.services.Personalization.VariantSet.prototype.containsVariant=function(V){var a=this._getVariantSet();if(typeof V!=="string"){return undefined;}return Object.prototype.hasOwnProperty.call(a,"variants")&&Object.prototype.hasOwnProperty.call(a.variants,V);};sap.ushell.services.Personalization.VariantSet.prototype.addVariant=function(V){var K=[],M=0,s="",e={};K=this.getVariantKeys();M=parseInt(K.sort(function(a,b){return a-b;}).reverse()[0],10);s=isNaN(M)?"0":(M+1).toString();if(K.indexOf(s)>=0){throw new sap.ushell.utils.Error("Variant key '"+s+"' already exists in variant set"+this._sVariantSetKey+"': sap.ushell.services.Personalization");}if(typeof V!=="string"){throw new sap.ushell.utils.Error("Parameter value of sVariantName is not a string: sap.ushell.services.Personalization");}if(this.getVariantKeyByName(V)!==undefined){throw new sap.ushell.utils.Error("Variant name '"+V+"' already exists in variant set '"+this._sVariantSetKey+"' (Old key: '"+this.getVariantKeyByName(V)+"' New key: '"+s+"') ': sap.ushell.services.Personalization");}e=new sap.ushell.services.Personalization.Variant(this,s,V);this._getVariantSet(this._sVariantSetKey).variants[s]={name:V,variantData:{}};this._serialize();return e;};sap.ushell.services.Personalization.VariantSet.prototype.delVariant=function(V){var a;if(typeof V!=="string"){return undefined;}a=this._getVariantSet();if(a&&a.variants){delete this._oVariantSetData.variants[V];}this._serialize();};sap.ushell.services.PersonalizationContainerVariantSet=function(V,a){var b,s,e,i,p,q;this._sVariantSetKey=V;this._oAdapterContainer=a;this._oVariantNameMap=new sap.ushell.utils.Map();this._oVariantMap=new sap.ushell.utils.Map();b=m(this._oAdapterContainer.getItemValue(V));if(b.hasOwnProperty("currentVariant")){this._sCurrentVariantKey=b.currentVariant;}else{throw new sap.ushell.utils.Error("Corrupt variant set data: sap.ushell.services.Personalization");}if(b.hasOwnProperty("variants")){for(s in b.variants){if(b.variants.hasOwnProperty(s)){e=b.variants[s].name;i=b.variants[s].variantData;if(this._oVariantNameMap.containsKey(e)){throw new sap.ushell.utils.Error("Variant name already exists: sap.ushell.services.Personalization");}else{this._oVariantNameMap.put(e,s);p=new sap.ushell.services.PersonalizationContainerVariant(s,e,i);this._oVariantMap.put(s,p);}}}}else{throw new sap.ushell.utils.Error("Corrupt variant set data: sap.ushell.services.Personalization");}return this;};sap.ushell.services.PersonalizationContainerVariantSet.prototype.getCurrentVariantKey=function(){return this._sCurrentVariantKey;};sap.ushell.services.PersonalizationContainerVariantSet.prototype.setCurrentVariantKey=function(V){this._sCurrentVariantKey=V;};sap.ushell.services.PersonalizationContainerVariantSet.prototype.getVariantKeys=function(){return this._oVariantMap.keys();};sap.ushell.services.PersonalizationContainerVariantSet.prototype.getVariantNamesAndKeys=function(){return JSON.parse(JSON.stringify(this._oVariantNameMap.entries));};sap.ushell.services.PersonalizationContainerVariantSet.prototype.getVariant=function(V){if(typeof V!=="string"){return undefined;}return this._oVariantMap.get(V);};sap.ushell.services.PersonalizationContainerVariantSet.prototype.getVariantKeyByName=function(V){if(typeof V!=="string"){return undefined;}return this._oVariantNameMap.get(V);};sap.ushell.services.PersonalizationContainerVariantSet.prototype.containsVariant=function(V){if(typeof V!=="string"){return undefined;}return this._oVariantMap.containsKey(V);};sap.ushell.services.PersonalizationContainerVariantSet.prototype.addVariant=function(V){var K=[],M=0,s="",e={};K=this._oVariantMap.keys();M=parseInt(this._oVariantMap.keys().sort(function(a,b){return a-b;}).reverse()[0],10);s=isNaN(M)?"0":(M+1).toString();if(this._oVariantMap.containsKey(s)){throw new sap.ushell.utils.Error("Variant key '"+s+"' already exists in variant set"+this._sVariantSetKey+"': sap.ushell.services.Personalization");}if(typeof V!=="string"){throw new sap.ushell.utils.Error("Parameter value of sVariantName is not a string: sap.ushell.services.Personalization");}if(this._oVariantNameMap.containsKey(V)){throw new sap.ushell.utils.Error("Variant name '"+V+"' already exists in variant set '"+this._sVariantSetKey+"' (Old key: '"+this._oVariantNameMap.get(V)+"' New key: '"+s+"') ': sap.ushell.services.Personalization");}e=new sap.ushell.services.PersonalizationContainerVariant(s,V);this._oVariantMap.put(s,e);this._oVariantNameMap.put(V,s);return e;};sap.ushell.services.PersonalizationContainerVariantSet.prototype._serialize=function(){var V={},a=[],b={},e={},t=this;b.currentVariant=this._sCurrentVariantKey;a=this.getVariantKeys();a.forEach(function(s){var V={};V=t._oVariantMap.get(s);e[s]=V._serialize();});b.variants=e;return b;};sap.ushell.services.PersonalizationContainerVariantSet.prototype.delVariant=function(V){var a=this._oVariantMap.get(V);if(a){this._oVariantNameMap.remove(a.getVariantName());this._oVariantMap.remove(V);}};sap.ushell.services.Personalization.Variant=function(V,s,a){if(typeof s!=="string"){throw new sap.ushell.utils.Error("Parameter value of sVariantKey is not a string: sap.ushell.services.Personalization");}if(typeof a!=="string"){throw new sap.ushell.utils.Error("Parameter value of sVariantName is not a string: sap.ushell.services.Personalization");}this._oVariantSet=V;this._sVariantKey=s;this._sVariantName=a;};sap.ushell.services.Personalization.Variant.prototype.getVariantKey=function(){return this._sVariantKey;};sap.ushell.services.Personalization.Variant.prototype.getVariantName=function(){return this._sVariantName;};sap.ushell.services.Personalization.Variant.prototype.setVariantName=function(V){var a=this._oVariantSet._getVariantSet(),b;if(typeof V!=="string"){throw new sap.ushell.utils.Error("Parameter value of sVariantName is not a string: sap.ushell.services.Personalization");}if(this._oVariantSet.getVariantKeyByName(V)!==undefined){throw new sap.ushell.utils.Error("Variant with name '"+V+"' already exists in variant set '"+this._oVariantSet._sVariantSetKey+"': sap.ushell.services.Personalization");}if(Object.prototype.hasOwnProperty.call(a,"variants")&&Object.prototype.hasOwnProperty.call(a.variants,this._sVariantKey)){b=a.variants[this._sVariantKey];b.name=V;this._sVariantName=V;this._oVariantSet._serialize();}else{throw new sap.ushell.utils.Error("Variant does not longer exist");}};sap.ushell.services.Personalization.Variant.prototype.getItemValue=function(i){if(typeof i!=="string"){return undefined;}var a=this._oVariantSet._getVariantSet().variants[this._sVariantKey].variantData;return Object.prototype.hasOwnProperty.call(a,i)&&m(a[i]);};sap.ushell.services.Personalization.Variant.prototype.setItemValue=function(i,a){if(typeof i!=="string"){throw new sap.ushell.utils.Error("Parameter value of sItemKey is not a string: sap.ushell.services.Personalization");}var b,e=this._oVariantSet._getVariantSet().variants&&this._oVariantSet._getVariantSet().variants[this._sVariantKey];if(!e){throw new sap.ushell.utils.Error("Variant does not longer exist");}if(!e.variantData){e.variantData={};}b=e.variantData;b[i]=m(a);this._oVariantSet._serialize();};sap.ushell.services.Personalization.Variant.prototype.containsItem=function(i){if(typeof i!=="string"){return undefined;}var a=this.oAccess.variantSet._getVariantSet().variants[this._sVariantKey].variantData;return Object.prototype.hasOwnProperty.call(a,i);};sap.ushell.services.Personalization.Variant.prototype.getItemKeys=function(){var a=this._oVariantSet._getVariantSet().variants[this._sVariantKey].variantData,i,b=[];for(i in a){if(Object.prototype.hasOwnProperty.call(a,i)){b.push(i);}}b.sort();return b;};sap.ushell.services.Personalization.Variant.prototype.delItem=function(i){if(typeof i!=="string"){return undefined;}var a=this.oVariantSet._getVariantSet().variants[this._sVariantKey].variantData;delete a[i];this.oVariantSet._serialize();};sap.ushell.services.PersonalizationContainerVariant=function(V,s,a){if(typeof V!=="string"){throw new sap.ushell.utils.Error("Parameter value of sVariantKey is not a string: sap.ushell.services.Personalization");}if(typeof s!=="string"){throw new sap.ushell.utils.Error("Parameter value of sVariantName is not a string: sap.ushell.services.Personalization");}if(a&&typeof a!=="object"){throw new sap.ushell.utils.Error("Parameter value of sVariantName is not a string: sap.ushell.services.Personalization");}this._oVariantKey=V;this._oVariantName=s;this._oItemMap=new sap.ushell.utils.Map();this._oItemMap.entries=a||{};};sap.ushell.services.PersonalizationContainerVariant.prototype.getVariantKey=function(){return this._oVariantKey;};sap.ushell.services.PersonalizationContainerVariant.prototype.getVariantName=function(){return this._oVariantName;};sap.ushell.services.PersonalizationContainerVariant.prototype.getItemValue=function(i){if(typeof i!=="string"){return undefined;}return this._oItemMap.get(i);};sap.ushell.services.PersonalizationContainerVariant.prototype.setItemValue=function(i,a){if(typeof i!=="string"){throw new sap.ushell.utils.Error("Parameter value of sItemKey is not a string: sap.ushell.services.Personalization");}return this._oItemMap.put(i,a);};sap.ushell.services.PersonalizationContainerVariant.prototype.containsItem=function(i){if(typeof i!=="string"){return undefined;}return this._oItemMap.containsKey(i);};sap.ushell.services.PersonalizationContainerVariant.prototype.getItemKeys=function(){return this._oItemMap.keys();};sap.ushell.services.PersonalizationContainerVariant.prototype.delItem=function(i){if(typeof i!=="string"){return undefined;}return this._oItemMap.remove(i);};sap.ushell.services.PersonalizationContainerVariant.prototype._serialize=function(){var i=[],V={},a={},t=this;V.name=this.getVariantName();i=this._oItemMap.keys();i.forEach(function(s){a[s]=t.getItemValue(s);});V.variantData=a;return V;};sap.ushell.services.Personalization.WindowAdapter=function(s,b){this._oBackendAdapter=b;if(!sap.ushell.services.Personalization.WindowAdapter.prototype.data){sap.ushell.services.Personalization.WindowAdapter.prototype.data={};}};sap.ushell.services.Personalization.WindowAdapter.prototype.getAdapterContainer=function(C,s,a){var b=this._oBackendAdapter&&this._oBackendAdapter.getAdapterContainer(C,s,a);return new sap.ushell.services.Personalization.WindowAdapterContainer(C,s,b);};sap.ushell.services.Personalization.WindowAdapter.prototype.delAdapterContainer=function(C,s){var D=new jQuery.Deferred();delete sap.ushell.services.Personalization.WindowAdapter.prototype.data[C];if(this._oBackendAdapter){this._oBackendAdapter.delAdapterContainer(C,s).done(function(){D.resolve();}).fail(function(M){D.reject(M);});}else{D.resolve();}return D.promise();};sap.ushell.services.Personalization.WindowAdapterContainer=function(C,s,b){this._oBackendContainer=b;this._oItemMap=new sap.ushell.utils.Map();this._sContainerKey=C;};function o(C){var i,a=C.getItemKeys();for(i=0;i<a.length;i=i+1){C.delItem(a[i]);}}sap.ushell.services.Personalization.WindowAdapterContainer.prototype.load=function(){var D=new jQuery.Deferred(),i,a,b,t=this;if(sap.ushell.services.Personalization.WindowAdapter.prototype.data[this._sContainerKey]){this._oItemMap.entries=m(sap.ushell.services.Personalization.WindowAdapter.prototype.data[this._sContainerKey]);if(this._oBackendContainer){o(this._oBackendContainer);a=this.getItemKeys();for(i=0;i<a.length;i=i+1){this._oBackendContainer.setItemValue(a[i],this._oItemMap.get(a[i]));}}D.resolve();}else{if(this._oBackendContainer){this._oBackendContainer.load().done(function(){a=t._oBackendContainer.getItemKeys();for(i=0;i<a.length;i=i+1){t.setItemValue(a[i],t._oBackendContainer.getItemValue(a[i]));}sap.ushell.services.Personalization.WindowAdapter.prototype.data[t._sContainerKey]=m(t._oItemMap.entries);D.resolve();}).fail(function(M){D.reject(M);});}else{sap.ushell.services.Personalization.WindowAdapter.prototype.data[this._sContainerKey]={};D.resolve();}}return D.promise();};sap.ushell.services.Personalization.WindowAdapterContainer.prototype.save=function(){var D=new jQuery.Deferred();sap.ushell.services.Personalization.WindowAdapter.prototype.data[this._sContainerKey]=m(this._oItemMap.entries);if(this._oBackendContainer){this._oBackendContainer.save().done(function(){D.resolve();}).fail(function(M){D.reject(M);});}else{D.resolve();}return D.promise();};sap.ushell.services.Personalization.WindowAdapterContainer.prototype.getItemKeys=function(){return this._oItemMap.keys();};sap.ushell.services.Personalization.WindowAdapterContainer.prototype.containsItem=function(i){this._oItemMap.containsKey(i);};sap.ushell.services.Personalization.WindowAdapterContainer.prototype.getItemValue=function(i){return this._oItemMap.get(i);};sap.ushell.services.Personalization.WindowAdapterContainer.prototype.setItemValue=function(i,a){this._oItemMap.put(i,a);if(this._oBackendContainer){this._oBackendContainer.setItemValue(i,a);}};sap.ushell.services.Personalization.WindowAdapterContainer.prototype.delItem=function(i){this._oItemMap.remove(i);if(this._oBackendContainer){this._oBackendContainer.delItem(i);}};}());},"sap/ushell/services/Search.js":function(){(function(){"use strict";jQuery.sap.declare("sap.ushell.services.Search");jQuery.sap.require('sap.ushell.renderers.fiori2.search.SearchHelper');var s=sap.ushell.renderers.fiori2.search.SearchHelper;sap.ushell.services.Search=function(a,c){this.init.apply(this,arguments);};sap.ushell.services.Search.prototype={init:function(a,c){this.oAdapter=a;this.oContainerInterface=c;this.oLpdService=sap.ushell.Container.getService("LaunchPage");},isSearchAvailable:function(){return this.oAdapter.isSearchAvailable();},getSina:function(){return this.oAdapter.getSina();},_getCatalogTiles:function(){var c=this;if(c.allTilesDeferred){return c.allTilesDeferred;}var C=[];c.allTilesDeferred=c.oLpdService.getCatalogs().then(function(d){var D=[];var o=c._getPersonalizedGroupTiles(new jQuery.Deferred());D.push(o);for(var i=0;i<d.length;i++){D.push(c.oLpdService.getCatalogTiles(d[i]));}return jQuery.when.apply(jQuery,D).then(function(){var t=arguments;for(var i=0;i<t.length;i++){var T=t[i];for(var j=0;j<T.length;j++){try{var f=T[j],g=c.oLpdService.getCatalogTileView(f),k=c.oLpdService.getCatalogTileKeywords(f),h=c.oLpdService.getCatalogTileTargetURL(f),l=c.oLpdService.getCatalogTilePreviewTitle(f)||c.oLpdService.getCatalogTileTitle(f),S=c.oLpdService.getCatalogTileSize(f),I=c.oLpdService.getCatalogTilePreviewIcon(f)||"sap-icon://business-objects-experience";C.push({tile:f,keywords:k,url:h,title:l||'',icon:I,size:S});g.destroy();}catch(e){jQuery.sap.log.error(e);}}}C=c._removeDuplicateTiles(C);C.sort(function(a,b){if(a.title.toUpperCase()<b.title.toUpperCase()){return-1;}if(a.title.toUpperCase()>b.title.toUpperCase()){return 1;}return 0;});return C;});});return c.allTilesDeferred;},_getPersonalizedGroupTiles:function(d){var a=this;a.oLpdService.getGroups().then(function(g){var D=[];var G;for(var j=0;j<g.length;j++){G=a.oLpdService.getGroupTiles(g[j])||[];D=D.concat(G);}d.resolve(D);});return d.promise();},_removeDuplicateTiles:function(t){var I={},k,u=[];for(var i=0;i<t.length;++i){var T=t[i];if(!T.url){continue;}var f=new RegExp('DisplayFactSheet','i');if(f.test(T.url)){continue;}k=T.title+T.url;if(I[k]===undefined){I[k]=T;u.push(T);}}return u;},_searchTiles:function(p){var S=p.searchTerm;var c=p.aCatalogTiles;var t=p.top||10;var i=p.skip||0;var m=0;var b=p.searchInKeywords||false;var f=[],T;var a=function(T,h){m+=1;if(m<=i){return;}if(m>(i+t)){return;}var r=jQuery.extend({},T);r.tooltip=r.title;if(h.length>0){r.label=h;r.title=h;}else{r.label=T.title;}f.push(r);};var o=new s.Tester(S);var d,C;for(var j=0;j<c.length;j++){T=c[j];d=o.test(T.title);if(d.bMatch===true){a(T,d.sHighlightedText);continue;}if(b&&T.keywords&&Array.isArray(T.keywords)){d=o.test(T.keywords.join(' '));if(d.bMatch===true){a(T,"");}}}return{totalResults:m,searchTerm:S,getElements:function(){return f;}};},queryApplications:function(p){var a=this,o=p.searchTerm;return this._getCatalogTiles().then(function(c){p.aCatalogTiles=c;return a._searchTiles(p);});},queryApplicationsByTarget:function(S,r){this._getCatalogTiles().done(function(c){var R=[];for(var j=0,l=S&&S.length||0;j<l;j++){var o=S[j],u=sap.ushell.Container.getService("URLParsing");for(var i=0;i<c.length;i++){var t=u.parseShellHash(c[i].url);if(t&&(t.semanticObject===o.semanticObject)&&(t.action===o.action)){R.push(c[i]);break;}}}r(R);});}};}());},"sap/ushell/services/ShellNavigation.js":function(){(function(){"use strict";jQuery.sap.require("sap.ui.thirdparty.signals");jQuery.sap.require("sap.ui.thirdparty.hasher");jQuery.sap.require("sap.ui.core.routing.HashChanger");jQuery.sap.declare("sap.ushell.services.ShellNavigation");sap.ui.core.routing.HashChanger.extend("sap.ushell.services.ShellNavigationHashChanger",{constructor:function(c){var u;this.oServiceConfig=c;if(jQuery.sap.getUriParameters().get("sap-ushell-reload")){if(jQuery.sap.getUriParameters().get("sap-ushell-reload")==="X"||jQuery.sap.getUriParameters().get("sap-ushell-reload")==="true"){u=true;}else{u=false;}}if(u!==undefined){if(typeof this.oServiceConfig!=="object"){this.oServiceConfig={};}this.oServiceConfig.reload=u;}sap.ui.core.routing.HashChanger.apply(this);this.priv_initializedByShellNav=false;this.oURLShortening=sap.ushell.Container.getService("URLShortening");this.privfnShellCallback=null;this.privappHashPrefix="&/";this.privhashPrefix="#";this.aNavigationFilters=[];this.NavigationFilterStatus={Continue:"Continue",Custom:"Custom",Abandon:"Abandon"};this.privgetCurrentShellHash=function(){var r=this.privsplitHash(hasher.getHash());return{hash:"#"+((r&&r.shellPart)?r.shellPart:"")};};this.privconstructHash=function(A){var o=this.privgetCurrentShellHash();o.hash=o.hash+A;return o;};this.privconstructShellHash=function(s){return sap.ushell.Container.getService("URLParsing").constructShellHash(s);};this.privsplitHash=function(h){var s,A;if(h===undefined||h===null||h===""){return{shellPart:null,appSpecificRoute:null};}s=sap.ushell.Container.getService("URLParsing").parseShellHash(h);if(s===undefined||s===null){return null;}A=s.appSpecificRoute;s.appSpecificRoute=undefined;return{shellPart:(s&&this.privstripLeadingHash(this.privconstructShellHash(s)))||null,appSpecificRoute:(s&&A)||null};};this.privsetHash=function(f,A,w){hasher.prependHash="";f=this.privstripLeadingHash(f);A=A||"";if(w===undefined){w=true;}if(w){this.fireEvent("hashSet",{sHash:A});hasher.setHash(f);}else{this.fireEvent("hashReplaced",{sHash:A});hasher.replaceHash(f);}};this.privstripLeadingHash=function(h){if(h[0]==='#'){return h.substring(1);}return h;};this.registerNavigationFilter=function(f){if(typeof f!=="function"){throw new Error("fnFilter must be a function");}this.aNavigationFilters.push(f);};function a(C){this.oAppState=undefined;this.oPromise=(new jQuery.Deferred()).resolve();this.getNextKey=function(){this.oAppState=sap.ushell.Container.getService("AppState").createEmptyAppState(C);return this.oAppState.getKey();};this.store=function(v){var n;this.oAppState.setData(v);n=this.oAppState.save();this.oPromise=jQuery.when(this.oPromise,n);};this.getPromise=function(){return this.oPromise;};}this.hrefForExternal=function(A,v,C,b){var t,p,d,s=new a(C),r;t=this.privhrefForExternalNoEnc(A,s);if(v===true){r={hash:encodeURI(t.hash),params:t.params,skippedParams:t.skippedParams};}else{r=encodeURI(t.hash);}if(!b){return r;}p=s.getPromise();d=new jQuery.Deferred();p.done(function(){d.resolve(r);}).fail(function(m){d.reject(m);});return d;};this.privhrefForExternalNoEnc=function(A,s){var r;if(A===undefined){return this.privgetCurrentShellHash();}if(A&&A.target&&(typeof A.target.semanticObject==="string"||typeof A.target.shellHash==="string")){r="#"+this.privconstructShellHash(A);return this.oURLShortening.compactHash(r,undefined,s);}return this.privgetCurrentShellHash();};this.privgetAppHash=function(A){var s,o;if(A&&A.target&&(typeof A.target.shellHash==="string")){o=sap.ushell.Container.getService("URLParsing").parseShellHash(A.target.shellHash);s=o&&o.appSpecificRoute;s=s&&s.substring(2);}return s;};this.hrefForAppSpecificHash=function(A){return encodeURI(this.privconstructHash(this.privappHashPrefix+A).hash);};this.toExternal=function(A,C){var h,s=new a(C),b;h=this.privhrefForExternalNoEnc(A,s).hash;b=this.privgetAppHash(A);this.privsetHash(h,b);};this.toAppHash=function(A,w){var h=this.privconstructHash(this.privappHashPrefix+A).hash;this.privsetHash(h,A,w);};}});sap.ushell.services.ShellNavigationHashChanger.prototype.initShellNavigation=function(s){if(this.priv_initializedByShellNav){jQuery.sap.log.info("initShellNavigation already called on this ShellNavigationHashChanger instance.");return false;}this.privfnShellCallback=s;hasher.changed.add(this.treatHashChanged,this);if(!hasher.isActive()){hasher.initialized.addOnce(this.treatHashChanged,this);hasher.init();}else{this.treatHashChanged(hasher.getHash());}this.priv_initializedByShellNav=true;return true;};sap.ushell.services.ShellNavigationHashChanger.prototype.init=function(){if(this.priv_initialized){jQuery.sap.log.info("init already called on this ShellNavigationHashChanger instance.");return false;}var n=this.privsplitHash(hasher.getHash()),a=n&&(n.appSpecificRoute||"  ").substring(2);this.fireEvent("hashChanged",{newHash:a});this.priv_initialized=true;return true;};sap.ushell.services.ShellNavigationHashChanger.prototype.treatHashChanged=function(n,o){if(this.inAbandonFlow){return;}var a,O,N,b,E,i,f;n=this.oURLShortening.expandHash(n);o=this.oURLShortening.expandHash(o);N=this.privsplitHash(n);b=this.privsplitHash(o);if(!N){E=new Error("Illegal new hash - cannot be parsed: '"+n+"'");this.fireEvent("shellHashChanged",{newShellHash:n,newAppSpecificRoute:null,oldShellHash:(b?b.shellPart:o),error:E});this.privfnShellCallback(n,null,(b?b.shellPart:o),(b?b.appSpecificRoute:null),E);return;}if(!b){b={shellPart:o,appSpecificRoute:null};}for(i=0;i<this.aNavigationFilters.length;i=i+1){try{f=this.aNavigationFilters[i].call(undefined,n,o);if(f===this.NavigationFilterStatus.Custom){return;}if(f===this.NavigationFilterStatus.Abandon){this.inAbandonFlow=true;hasher.replaceHash(o);this.inAbandonFlow=false;return;}}catch(e){jQuery.sap.log.error("Error while calling Navigation filter! ignoring filter...",e.message,"sap.ushell.services.ShellNavigation");}}if(N.shellPart===b.shellPart&&(o!==undefined)){a=(N.appSpecificRoute||"  ").substring(2);O=(b.appSpecificRoute||"  ").substring(2);this.fireEvent("hashChanged",{newHash:a,oldHash:O});return;}function r(h){window.location.hash='#'+encodeURI(h);window.location.reload();}if(o!==undefined){if(this.oServiceConfig&&this.oServiceConfig.reload){r(n);}}this.fireEvent("shellHashChanged",{newShellHash:N.shellPart,newAppSpecificRoute:N.appSpecificRoute,oldShellHash:b.shellPart,oldAppSpecificRoute:b.appSpecificRoute});this.privfnShellCallback(N.shellPart,N.appSpecificRoute,b.shellPart,b.appSpecificRoute);};sap.ushell.services.ShellNavigationHashChanger.prototype.setHash=function(h){this.toAppHash(h,true);};sap.ushell.services.ShellNavigationHashChanger.prototype.replaceHash=function(h){this.toAppHash(h,false);};sap.ushell.services.ShellNavigationHashChanger.prototype.getHash=function(){return this.getAppHash();};sap.ushell.services.ShellNavigationHashChanger.prototype.getAppHash=function(){var n=this.privsplitHash(hasher.getHash()),a=n&&(n.appSpecificRoute||"  ").substring(2);return a;};sap.ushell.services.ShellNavigationHashChanger.prototype.destroy=function(){hasher.changed.remove(this.treatHashChanged,this);sap.ui.core.routing.HashChanger.prototype.destroy.apply(this,arguments);};function S(c,p,s){var o=s&&s.config;this.hashChanger=new sap.ushell.services.ShellNavigationHashChanger(o);this.hrefForExternal=function(a,v,C,A){return this.hashChanger.hrefForExternal(a,v,C,A);};this.hrefForAppSpecificHash=function(a){return this.hashChanger.hrefForAppSpecificHash(a);};this.toExternal=function(a,C){this.hashChanger.toExternal(a,C);};this.toAppHash=function(a,w){this.hashChanger.toAppHash(a,w);};this.init=function(f){hasher.prependHash="";sap.ui.core.routing.HashChanger.replaceHashChanger(this.hashChanger);this.hashChanger.initShellNavigation(f);return this;};this.NavigationFilterStatus=this.hashChanger.NavigationFilterStatus;this.registerNavigationFilter=function(f){this.hashChanger.registerNavigationFilter(f);};}sap.ushell.services.ShellNavigation=S;sap.ushell.services.ShellNavigation.hasNoAdapter=true;}());},"sap/ushell/services/SupportTicket.js":function(){(function(){"use strict";jQuery.sap.declare("sap.ushell.services.SupportTicket");sap.ushell.services.SupportTicket=function(a,c,p,s){var S=(s&&s.config)||{};this.createTicket=function(o){return a.createTicket(o);};this.isEnabled=function(){return S.enabled===true;};};}());},"sap/ushell/services/URLParsing.js":function(){(function(){"use strict";jQuery.sap.declare("sap.ushell.services.URLParsing");sap.ushell.services.URLParsing=function(){var r=/^(([A-Za-z0-9_\/]+)-([A-Za-z0-9_\/\-]+)(~([A-Z0-9a-z=+\/]+))?)?([?]([^&]|(&[^\/]))*&?)?$/;this.getShellHash=function(u){var a=/[^#]*#(([^&]|&[^\/])*)(&\/.*)?/,m=a.exec(u);if(m){return m[1];}return undefined;};this.getHash=function(u){var a=/[^#]#(.*)/,m=a.exec(u);if(m){return m[1];}return undefined;};this.parseParameters=function(p){if(!p){return{};}return jQuery.sap.getUriParameters(p).mParams||{};};this.paramsToString=function(p){var f,a,k,i,l,s="";f="";a=null;l=[];for(a in p){if(p.hasOwnProperty(a)){l.push(a);}}l.sort();for(k=0;k<l.length;k=k+1){a=l[k];if(jQuery.isArray(p[a])){for(i=0;i<p[a].length;i=i+1){s+=f+encodeURIComponent(a)+"="+encodeURIComponent(p[a][i]);f="&";}}else{s+=f+encodeURIComponent(a)+"="+encodeURIComponent(p[a]);f="&";}}return s;};this.parseShellHash=function(h){var c=r,s,S,A,C,p,m,d,e,a;if(!h){return undefined;}s=this.splitHash(h);m=c.exec(s.shellPart);if(m){S=m[2];A=m[3];C=m[5];p=m[6];d=this.parseParameters(p);return{semanticObject:S,action:A,contextRaw:C,params:d,appSpecificRoute:s.appSpecificRoute};}if(s.appSpecificRoute){return{semanticObject:undefined,action:undefined,contextRaw:undefined,params:{},appSpecificRoute:s.appSpecificRoute};}return undefined;};this.privstripLeadingHash=function(h){if(h[0]==='#'){return h.substring(1);}return h;};this.splitHash=function(h){var a=/^(?:#|)([\S\s]*?)(&\/[\S\s]*)?$/,m,s,A;if(h===undefined||h===null||h===""){return{};}m=a.exec(h);s=m[1];if(s!==""&&!r.test(s)){return{};}A=m[2];if(s||A){return{shellPart:s,appSpecificRoute:A};}return{};};function b(u,a){if(a){return u+a;}return u;}this.constructShellHash=function(s){var c,p,d,i=null,k,l=[],f="?",a=null;if(!s){return"";}if(!s.target){s.target={};s.target.semanticObject=s.semanticObject;s.target.action=s.action;s.target.contextRaw=s.contextRaw;}if(s.target.shellHash||s.target.shellHash===""){d=this.privstripLeadingHash(s.target.shellHash);return b(d,s.appSpecificRoute);}if(s.target.semanticObject&&s.target.action){c=s.target.semanticObject+"-"+s.target.action;}else{return b("",s.appSpecificRoute);}if(s.target.contextRaw){c+="~"+s.target.contextRaw;}f="?";a=null;l=[];for(a in s.params){if(s.params.hasOwnProperty(a)){l.push(a);}}p=(s.params&&JSON.parse(JSON.stringify(s.params)))||{};if(s.appStateKey){l.push("sap-xapp-state");p["sap-xapp-state"]=s.appStateKey;}l.sort();for(k=0;k<l.length;k=k+1){a=l[k];if(jQuery.isArray(p[a])){if(p[a].length>1){jQuery.sap.log.error("Array startup parameters violate the designed intent of the Unified Shell Intent, use only single-valued parameters!");}for(i=0;i<p[a].length;i=i+1){c+=f+encodeURIComponent(a)+"="+encodeURIComponent(p[a][i]);f="&";}}else{c+=f+encodeURIComponent(a)+"="+encodeURIComponent(p[a]);f="&";}}return b(c,s.appSpecificRoute);};this.addSystemToServiceUrl=function(s,S){var R;if(!s||s.indexOf('/')!==0||s.indexOf('//')===0){throw new sap.ui2.srvc.Error("Invalid URL: "+s,"sap.ushell.services.URLParsing");}R=sap.ushell.Container.getService("NavTargetResolution").getCurrentResolution();if(!S&&R&&R.url){S=jQuery.sap.getUriParameters(R.url).get("sap-system");}if(/^[^?]*(;o=([\/;?]|$))/.test(s)){s=s.replace(/;o=([\/;?]|$)/,(S?";o="+S:"")+"$1");}else if(!/^[^?]*;o=/.test(s)&&S){s=s.replace(/(\/[^?]*?)(\/$|$|(\/?\?.*))/,"$1;o="+S+"$2");}sap.ushell.Container.addRemoteSystemForServiceUrl(s);return s;};};sap.ushell.services.URLParsing.hasNoAdapter=true;}());},"sap/ushell/services/URLShortening.js":function(){(function(){"use strict";jQuery.sap.declare("sap.ushell.services.URLShortening");jQuery.sap.require("jquery.sap.storage");sap.ushell.services.URLShortening=function(){var t=this;this.ABBREV_PARAM_NAME="sap-intent-param";this.URL_LENGTH_LIMIT=1023;this.URL_PARAMS_LENGTH_LIMIT=512;this._replaceSapXAppStateRawWithKeyIfRequired=function(v,s){var V,k;if(typeof v!=="string"||/^[A-Z0-9]{40}$/.test(v)){return v;}try{V=JSON.parse(v);}catch(e){jQuery.sap.log.error("This cannot happen: sap-xapp-state parameter value is neither key nor JSON parseable");return v;}k=s&&s.getNextKey();this._storeValue(k,V,s);return k;};this.compactHash=function(u,r,s){var S,k,R,p,U,a,b=[this.ABBREV_PARAM_NAME,"sap-xapp-state"];if(r){r.forEach(function(A){b.push(A);});}U=sap.ushell.Container.getService("URLParsing");S=U.parseShellHash(u);if(!S){jQuery.sap.log.error("the URL is not compliant and may break in a future version "+u);}p='';if(u.charAt(0)==='#'){p='#';}var v=S&&S.params&&S.params["sap-xapp-state"]&&S.params["sap-xapp-state"][0];if(v){S.params["sap-xapp-state"]=[this._replaceSapXAppStateRawWithKeyIfRequired(v,s)];u=p+U.constructShellHash({target:{semanticObject:S.semanticObject,action:S.action,contextRaw:S.contextRaw},params:S.params,appSpecificRoute:S.appSpecificRoute});}if(typeof u!=="string"||u.length<t.URL_LENGTH_LIMIT){return{hash:u};}if(S&&S.params&&S.params[t.ABBREV_PARAM_NAME]){return{hash:u};}k=s&&s.getNextKey();R=this._splitParameters(S.params,b,k);if(!R.key){return{hash:u};}a=U.paramsToString(R.tailParams);this._storeValue(R.key,a,s);return{hash:p+U.constructShellHash({target:{semanticObject:S.semanticObject,action:S.action,contextRaw:S.contextRaw},params:R.headParams,appSpecificRoute:S.appSpecificRoute}),params:R.headParams,skippedParams:R.tailParams};};this.checkHashLength=function(u){var s,r,p,U,R;if(typeof u!=="string"||u.length<t.URL_LENGTH_LIMIT){return{hash:u};}U=sap.ushell.Container.getService("URLParsing");s=U.parseShellHash(u);p='';if(u.charAt(0)==='#'){p='#';}r=this._splitParameters(s.params,[],"DummyKey");if(r.key){jQuery.sap.log.error("Application startup parameter length exceeds "+t.URL_PARAMS_LENGTH_LIMIT+" characters, truncation occured!");delete r.headParams[this.ABBREV_PARAM_NAME];return{hash:p+U.constructShellHash({target:{semanticObject:s.semanticObject,action:s.action,contextRaw:s.contextRaw},params:r.headParams,appSpecificRoute:s.appSpecificRoute}),params:r.headParams,skippedParams:r.tailParams};}jQuery.sap.log.error("URL exceeds dangerous limits, arbitrary shortening or worse may occur!");return{hash:u};};this._cmpByList=function(a,A,b){var i,c;a=a||[];i=a.indexOf(A);c=a.indexOf(b);if(A===b){return 0;}if(i>=0&&c>=0){return i-c;}if(i>=0){return-1;}if(c>=0){return+1;}if(A<b){return-1;}return+1;};this._sortByPriority=function(l,r){return l.sort(this._cmpByList.bind(null,r));};this._splitParameters=function(p,r,K){var a,i,k,h={},b={},c=false,o,d,e=0,f,l=[];if(!K||typeof K!=="string"){throw new Error("sap.ushell.services.URLShortening._splitParameters: key must be supplied!");}for(a in p){if(Object.prototype.hasOwnProperty.call(p,a)){l.push(a);}}l.sort();l=this._sortByPriority(l,r);for(k=0;k<l.length;k=k+1){a=l[k];o=p[a];if(o.length>1){jQuery.sap.log.error("Array startup parameters violate the designed intent of the Unified Shell Intent, use only single-valued parameters!");}for(i=0;i<o.length;i=i+1){d=p[a][i];f=a.length+d.length;if(f+e>this.URL_PARAMS_LENGTH_LIMIT){if(b[a]){b[a].push(d);}else{b[a]=[d];}c=true;}else{if(h[a]){h[a].push(d);}else{h[a]=[d];}}e=e+f+1;}}if(c){h[this.ABBREV_PARAM_NAME]=[K];}return{key:K,tailParams:b,headParams:h};};this.expandHash=function(u){var r=function(k){return t._retrieveValue(k);};return this.expandParamGivenRetrievalFunction(u,this.ABBREV_PARAM_NAME,r);};this.expandParamGivenRetrievalFunction=function(u,p,r){var s,v,k,a,b;if(typeof u!=="string"){return u;}s=sap.ushell.Container.getService("URLParsing").parseShellHash(u);k=s&&s.params&&s.params[p]&&s.params[p][0];if(!k){return u;}a='';if(u.charAt(0)==='#'){a='#';}v=r(k);if(!v){return u;}b=this._blendParameters(s.params,p,v);return a+sap.ushell.Container.getService("URLParsing").constructShellHash({target:{semanticObject:s.semanticObject,action:s.action,contextRaw:s.contextRaw},params:b,appSpecificRoute:s.appSpecificRoute});};this._retrieveValue=function(k){return undefined;};this._storeValue=function(k,v,s){if(s&&typeof s.store==="function"){s.store(v);}};this._blendParameters=function(p,P,v){var n=sap.ushell.Container.getService("URLParsing").parseParameters("?"+v),a;delete p[P];for(a in n){if(Object.prototype.hasOwnProperty.call(n,a)){if(p[a]){p[a]=p[a].concat(n[a]);}else{p[a]=n[a];}}}return p;};};sap.ushell.services.URLShortening.hasNoAdapter=true;}());},"sap/ushell/services/UserRecents.js":function(){(function(){"use strict";jQuery.sap.declare("sap.ushell.services.UserRecents");jQuery.sap.require("sap.ushell.services.Personalization");function R(m,E,c,l,s){var r=[],u=function(I,t){return r.some(function(o){var f;if(E(o.oItem,I)){o.oItem=I;o.iTimestamp=t;o.iCount=o.iCount+1;f=true;}else{f=false;}return f;});},i=function(I,t){var n={oItem:I,iTimestamp:t,iCount:1};if(r.length===m){r.sort(c);r.pop();}r.push(n);};this.newItem=function(I){var t=+new Date(),A;l().done(function(L){r=L||[];A=u(I,t);if(!A){i(I,t);}s(r);});};this.getRecentItems=function(){var d=new jQuery.Deferred();l().done(function(L){L=L||[];L.sort(c);r=L.slice(0,m);d.resolve(jQuery.map(r,function(o){return o.oItem;}));});return d.promise();};};function a(l,s){var A,t=this,m=30,d=false,n=[];this.init=function(){var t=this,p,c=this.getDayFromDateObj(this.getCurrentDate()),D=false;if(t._oInitDeferred===undefined){t._oInitDeferred=jQuery.Deferred();}if(!D||c!==A.recentDay){D=true;p=l();p.done(function(b){A=b||{recentDay:null,recentAppsUsageMap:{}};t.calculateInitialUsage(c);t._oInitDeferred.resolve(A);});p.fail(function(){jQuery.sap.log.error("UShell-lib ; RecentAppsUsage ; Load data in Init failed");t._oInitDeferred.reject();});}return this._oInitDeferred.promise();};this.calculateInitialUsage=function(c){var t=this;if(c!=A.recentDay){this.addNewDay();A.recentDay=c;setTimeout(function(){t.cleanUnusedHashes();},3000);this.saveAppsUsage(A);}};this.addAppUsage=function(h){if(!sap.ushell.utils.validHash(h)){return jQuery.Deferred().reject("Non valid hash").promise();}var p=this.init();p.done(function(){var b=A.recentAppsUsageMap[h]||[];if(b.length==0){b[0]=1;}else{b[b.length-1]+=1;}A.recentAppsUsageMap[h]=b;t.saveAppsUsage(A);});p.fail(function(){Query.sap.log.error("Ushell-lib ; addAppUsage ; Initialization falied!");});return p;};this.getAppsUsage=function(){var r,p,t=this,D=jQuery.Deferred();p=t.init();p.done(function(){r=t.summarizeUsage();D.resolve(r);});p.fail(function(){D.reject("Not initialized yet");});return D.promise();};this.summarizeUsage=function(){var u={},h,b,c,f=true;for(h in A.recentAppsUsageMap){u[h]=this.getHashUsageSum(h);if(f){b=c=u[h];f=false;}else{if(u[h]<c){c=u[h];}else if(u[h]>b){b=u[h];}}}return{usageMap:u,maxUsage:b,minUsage:c};};this.addNewDay=function(){var h,b;for(h in A.recentAppsUsageMap){b=A.recentAppsUsageMap[h];b[b.length]=0;if(b.length>m){b=b.shift();}}};this.cleanUnusedHashes=function(){var u,h;for(h in A.recentAppsUsageMap){u=t.getHashUsageSum(h);if(u==0){delete(A.recentAppsUsageMap[h]);}}};this.getHashUsageSum=function(h){var b=0,c,f=A.recentAppsUsageMap[h],g=f.length;for(c=0;c<g;c++){b+=f[c];}return b;};this.saveAppsUsage=function(o){var p=s(o);p.fail(function(){jQuery.sap.log.error("Ushell-lib ; saveAppsUsage ; Save action failed");});p.done(function(b){});return p;};this.getCurrentDate=function(){return new Date();};this.getDayFromDateObj=function(b){return(b.getUTCFullYear()+"/"+(b.getUTCMonth()+1)+"/"+b.getUTCDate());};};sap.ushell.services.UserRecents=function(){var r,o,A,b,p,c,s,d,f,l,S,g="RecentApps",h="AppsUsage",i="RecentSearches",j="RecentDataSources",P="sap.ushell.services.UserRecents";this.noticeDataSource=function(D){if((D&&D.objectName&&D.objectName.value&&D.objectName.value.toLowerCase()==="$$all$$")||(D.objectName&&D.objectName.toLowerCase&&D.objectName.toLowerCase()==="$$all$$"))return;b.newItem(D);return b.getRecentItems();};this.getRecentDataSources=function(){return b.getRecentItems();};this.noticeSearch=function(m){r.newItem(m);return r.getRecentItems();};this.getRecentSearches=function(){return r.getRecentItems();};this.noticeApp=function(m){o.newItem(m);return o.getRecentItems();};this.getRecentApps=function(){return o.getRecentItems();};this.initAppsUsage=function(){A.init(new Date());};this.addAppUsage=function(m){var n=sap.ushell.utils.getBasicHash(m);A.addAppUsage(n);};this.getAppsUsage=function(){return A.getAppsUsage();};p=sap.ushell.Container.getService("Personalization");try{c=p.getPersonalizer({container:P,item:g});s=p.getPersonalizer({container:P,item:i});d=p.getPersonalizer({container:P,item:j});f=p.getPersonalizer({container:P,item:h});}catch(k){jQuery.sap.log.error("Personalization service does not work:");jQuery.sap.log.error(k.name+": "+k.message);}l=function(m){var n,D;try{n=m.getPersData();}catch(k){jQuery.sap.log.error("Personalization service does not work:");jQuery.sap.log.error(k.name+": "+k.message);D=new jQuery.Deferred();D.reject(k);n=D.promise();}return n;};S=function(m,L){var n;try{n=m.setPersData(L);}catch(k){jQuery.sap.log.error("Personalization service does not work:");jQuery.sap.log.error(k.name+": "+k.message);}return n;};r=new R(10,function(x,y){var m=false;if(x.oDataSource&&y.oDataSource){if(x.oDataSource.objectName&&y.oDataSource.objectName){m=((x.sTerm===y.sTerm)&&(x.oDataSource.objectName.value===y.oDataSource.objectName.value));}if(!x.oDataSource.objectName&&!y.oDataSource.objectName){m=(x.sTerm===y.sTerm);}}if(!x.oDataSource&&!y.oDataSource){m=(x.sTerm===y.sTerm);}return m;},function(x,y){return y.iTimestamp-x.iTimestamp;},l.bind(this,s),S.bind(this,s));b=new R(6,function(x,y){if(x.objectName&&y.objectName)return x.objectName.value===y.objectName.value;return false;},function(x,y){return y.iTimestamp-x.iTimestamp;},l.bind(this,d),S.bind(this,d));o=new R(6,function(x,y){return x.semanticObject===y.semanticObject&&x.action===y.action;},function(x,y){return y.iTimestamp-x.iTimestamp;},l.bind(this,c),S.bind(this,c));A=new a(l.bind(this,f),S.bind(this,f));};var e=sap.ui.getCore().getEventBus();sap.ushell.services.UserRecents.hasNoAdapter=true;}());},"sap/ushell/ui/launchpad/DashboardGroupsContainer.js":function(){jQuery.sap.declare("sap.ushell.ui.launchpad.DashboardGroupsContainer");jQuery.sap.require("sap.ushell.library");jQuery.sap.require("sap.ui.core.Control");sap.ui.core.Control.extend("sap.ushell.ui.launchpad.DashboardGroupsContainer",{metadata:{library:"sap.ushell",properties:{"accessibilityLabel":{type:"string",group:"",defaultValue:null}},aggregations:{"groups":{type:"sap.ui.core.Control",multiple:true,singularName:"group"}},events:{"afterRendering":{}}}});sap.ushell.ui.launchpad.DashboardGroupsContainer.M_EVENTS={'afterRendering':'afterRendering'};(function(){"use strict";sap.ushell.ui.launchpad.DashboardGroupsContainer.prototype.updateGroups=sap.ushell.override.updateAggregatesFactory("groups");sap.ushell.ui.launchpad.DashboardGroupsContainer.prototype.onAfterRendering=function(){this.fireAfterRendering();};sap.ushell.ui.launchpad.DashboardGroupsContainer.prototype.getGroupControlByGroupId=function(g){try{var a=this.getGroups();for(var i=0;i<a.length;i++){if(a[i].getGroupId()==g){return a[i];}}}catch(e){}return null;}}());},"sap/ushell/ui/launchpad/DashboardGroupsContainerRenderer.js":function(){(function(){"use strict";jQuery.sap.declare("sap.ushell.ui.launchpad.DashboardGroupsContainerRenderer");sap.ushell.ui.launchpad.DashboardGroupsContainerRenderer={};sap.ushell.ui.launchpad.DashboardGroupsContainerRenderer.render=function(r,c){r.write("<div");r.writeControlData(c);r.addClass("sapUshellDashboardGroupsContainer");r.writeClasses();if(c.getAccessibilityLabel()){r.writeAccessibilityState(c,{label:c.getAccessibilityLabel()});}r.write(">");var g=c.getGroups();jQuery.each(g,function(i,G){r.write("<div");r.addClass("sapUshellDashboardGroupsContainerItem");if(G.getIsGroupLocked()||G.getDefaultGroup()){r.addClass("sapUshellDisableDragAndDrop");}r.writeClasses();r.write(">");r.renderControl(this);r.write("</div>");});r.write("</div>");};}());},"sap/ushell/ui/launchpad/GroupHeaderActions.js":function(){jQuery.sap.declare("sap.ushell.ui.launchpad.GroupHeaderActions");jQuery.sap.require("sap.ushell.library");jQuery.sap.require("sap.ui.core.Control");sap.ui.core.Control.extend("sap.ushell.ui.launchpad.GroupHeaderActions",{metadata:{library:"sap.ushell",properties:{"isOverflow":{type:"boolean",group:"Misc",defaultValue:false},"tileActionModeActive":{type:"boolean",group:"Misc",defaultValue:false}},aggregations:{"content":{type:"sap.ui.core.Control",multiple:true,singularName:"content"},"overflowCtrl":{type:"sap.ui.core.Control",multiple:true,singularName:"overflowCtrl"}},events:{"afterRendering":{}}}});sap.ushell.ui.launchpad.GroupHeaderActions.M_EVENTS={'afterRendering':'afterRendering'};(function(){"use strict";sap.ushell.ui.launchpad.GroupHeaderActions.prototype.onAfterRendering=function(){this.fireAfterRendering();};sap.ushell.ui.launchpad.GroupHeaderActions.prototype._getActionOverflowControll=function(){var c=this;return[new sap.m.Button({icon:'sap-icon://overflow',type:'Transparent',press:function(e){var C=this,t=this;var a=new sap.m.ActionSheet({placement:sap.m.PlacementType.Auto});c.getContent().forEach(function(b){var d=b.clone();d.setModel(b.getModel());d.setBindingContext(b.getBindingContext());a.addButton(d);});a.openBy(e.getSource());}}).addStyleClass('sapUshellHeaderActionButton')];};}());},"sap/ushell/ui/launchpad/GroupHeaderActionsRenderer.js":function(){(function(){"use strict";jQuery.sap.declare("sap.ushell.ui.launchpad.GroupHeaderActionsRenderer");sap.ushell.ui.launchpad.GroupHeaderActionsRenderer={};sap.ushell.ui.launchpad.GroupHeaderActionsRenderer.render=function(r,c){var i=c.getIsOverflow(),o=c.getOverflowCtrl(),a=c.getTileActionModeActive();r.write("<div");r.writeControlData(c);r.writeClasses();r.write(">");var C=c.getContent();if(a){if(i){jQuery.each(c._getActionOverflowControll(),function(){r.renderControl(this);});}else{jQuery.each(C,function(){r.renderControl(this);});}}r.write("</div>");};}());},"sap/ushell/ui/launchpad/LoadingDialog.js":function(){jQuery.sap.declare("sap.ushell.ui.launchpad.LoadingDialog");jQuery.sap.require("sap.ushell.library");jQuery.sap.require("sap.m.BusyDialog");sap.m.BusyDialog.extend("sap.ushell.ui.launchpad.LoadingDialog",{metadata:{library:"sap.ushell",properties:{"iconUri":{type:"sap.ui.core.URI",group:"Appearance",defaultValue:null}}}});(function(){"use strict";jQuery.sap.require("sap.ui.core.Icon");sap.ushell.ui.launchpad.LoadingDialog.prototype.init=function(){sap.m.BusyDialog.prototype.init.call(this,arguments);this.oIcon=new sap.ui.core.Icon();};sap.ushell.ui.launchpad.LoadingDialog.prototype.exit=function(){sap.m.BusyDialog.prototype.exit.call(this,arguments);if(this.oIcon){this.oIcon.destroy();this.oIcon=null;}};sap.ushell.ui.launchpad.LoadingDialog.prototype.isOpen=function(){var p=this._oPopup;return p.isOpen();};sap.ushell.ui.launchpad.LoadingDialog.prototype.setPopupVisible=function(v){if(v){this.removeStyleClass("sapUshellLoadingDialogInvisible");}else{this.addStyleClass("sapUshellLoadingDialogInvisible");}};sap.ushell.ui.launchpad.LoadingDialog.prototype.setAppInfoVisible=function(v){this.toggleStyleClass("sapUshellLoadingDialogAppDataInvisible",!v);};sap.ushell.ui.launchpad.LoadingDialog.prototype.openLoadingScreen=function(){if(!this._oPopup.isOpen()){this.setPopupVisible(true);this.open();jQuery('.sapUiBLy').addClass('sapUshellLoadingDialog');}};sap.ushell.ui.launchpad.LoadingDialog.prototype.showAppInfo=function(a,i){var t=this,T=function(t){t.setAppInfoVisible(true);};this.setText(a);this.setIconUri(i);this.oIcon.setSrc(i);window.setTimeout(function(){T(t);},50);};sap.ushell.ui.launchpad.LoadingDialog.prototype.closeLoadingScreen=function(){var t=this,T=function(t){t.setText(null);t.setIconUri(null);t.setAppInfoVisible(false);if(t._oPopup&&t.isActive()){t.close();}jQuery('.sapMDialogBLyInit').removeClass('sapUshellLoadingDialog');};if(this._oPopup&&this._oPopup.isOpen()){this.setPopupVisible(false);window.setTimeout(function(){T(t);},300);}};}());},"sap/ushell/ui/launchpad/LoadingDialogRenderer.js":function(){(function(){"use strict";jQuery.sap.declare("sap.ushell.ui.launchpad.LoadingDialogRenderer");sap.ushell.ui.launchpad.LoadingDialogRenderer={};sap.ushell.ui.launchpad.LoadingDialogRenderer.render=function(r,c){var t=c.getTooltip_AsString();c._oLabel.addStyleClass("sapUshellLoadingDialogLabel");r.write("<div");r.writeControlData(c);r.addClass("sapUshellLoadingDialogControl sapMCommonDialog");if(sap.ui.Device.system.iphone){r.addClass("sapMDialogHidden");}if(!c._isPlatformDependent){if(!c.getText()&&!c.getTitle()&&!c.getShowCancelButton()){r.addClass("sapMBusyDialogSimple");}}r.writeClasses();if(t){r.writeAttributeEscaped("title",t);}r.write(">");if(c.getTitle()){r.write("<header class=\"sapMDialogTitle\">");r.writeEscaped(c.getTitle());r.write("</header>");}if(jQuery.os.ios||!c._isPlatformDependent){this.renderAppInfo(r,c);this.renderFioriFlower(r,c);}else{this.renderFioriFlower(r,c);this.renderAppInfo(r,c);}if(c.getShowCancelButton()){r.write("<footer class='sapMBusyDialogFooter sapMFooter-CTX'>");r.renderControl(c._oButton);r.write("</footer>");}r.write("</div>");};sap.ushell.ui.launchpad.LoadingDialogRenderer.renderAppInfo=function(r,c){r.write("<div").addClass("sapUshellLoadingDialogAppData").writeClasses().write(">");if(c.getIconUri()){r.renderControl(c.oIcon);}r.renderControl(c._oLabel);r.write("</div>");};sap.ushell.ui.launchpad.LoadingDialogRenderer.renderFioriFlower=function(r,c){var i,R=false,u=[/Android\s4\.2.+GT-I9505.+Chrome\/18/];if(navigator.userAgent){for(i=0;i<u.length;i=i+1){if(u[i].test(navigator.userAgent)){R=true;break;}}}if(jQuery.support.cssAnimations&&!R){r.write("<div id='fiori2-loader'>");r.write("<div class='fiori2-blossom'>");for(i=1;i<6;i=i+1){r.write("<div class='fiori2-leafContainer fiori2-leafContainer"+i+"'>");r.write("<div class='fiori2-leaf fiori2-leaf"+i+"'></div>");r.write("</div>");}r.write("</div>");r.write("</div>");}else{r.renderControl(c._busyIndicator);}};}());},"sap/ushell/ui/launchpad/PlusTile.js":function(){jQuery.sap.declare("sap.ushell.ui.launchpad.PlusTile");jQuery.sap.require("sap.ushell.library");jQuery.sap.require("sap.ushell.ui.launchpad.Tile");sap.ushell.ui.launchpad.Tile.extend("sap.ushell.ui.launchpad.PlusTile",{metadata:{library:"sap.ushell",properties:{"groupId":{type:"string",group:"Misc",defaultValue:''}},events:{"press":{}}}});sap.ushell.ui.launchpad.PlusTile.M_EVENTS={'press':'press'};(function(){"use strict";sap.ushell.ui.launchpad.PlusTile.prototype.init=function(){this.oIcon=new sap.ui.core.Icon({src:'sap-icon://add',tooltip:sap.ushell.resources.i18n.getText("open_catalog")});};sap.ushell.ui.launchpad.PlusTile.prototype.exit=function(){if(this.oIcon){this.oIcon.destroy();}};sap.ushell.ui.launchpad.PlusTile.prototype.onclick=function(){this.firePress();};sap.ushell.ui.launchpad.PlusTile.prototype.onsapspace=function(){this.firePress();};sap.ushell.ui.launchpad.PlusTile.prototype.onsapenter=function(){this.firePress();};sap.ushell.ui.launchpad.PlusTile.prototype.setGroupId=function(v){this.setProperty("groupId",v,true);return this;};}());},"sap/ushell/ui/launchpad/PlusTileRenderer.js":function(){(function(){"use strict";jQuery.sap.require("sap.ushell.resources");jQuery.sap.declare("sap.ushell.ui.launchpad.PlusTileRenderer");sap.ushell.ui.launchpad.PlusTileRenderer={};var t=sap.ushell.resources.i18n;sap.ushell.ui.launchpad.PlusTileRenderer.render=function(r,c){r.write("<div");r.writeAttribute("tabindex","0");r.writeControlData(c);r.addClass("sapUshellTile");r.addClass("sapUshellPlusTile");r.writeClasses();r.writeAccessibilityState(c,{label:t.getText("TilePlus_label")});r.write(">");r.renderControl(c.oIcon);r.write("</div>");};}());},"sap/ushell/ui/launchpad/Tile.js":function(){jQuery.sap.declare("sap.ushell.ui.launchpad.Tile");jQuery.sap.require("sap.ushell.library");jQuery.sap.require("sap.ui.core.Control");sap.ui.core.Control.extend("sap.ushell.ui.launchpad.Tile",{metadata:{library:"sap.ushell",properties:{"tall":{type:"boolean",group:"Misc",defaultValue:false},"long":{type:"boolean",group:"Misc",defaultValue:false},"uuid":{type:"string",group:"Misc",defaultValue:null},"tileCatalogId":{type:"string",group:"Misc",defaultValue:null},"target":{type:"string",group:"Misc",defaultValue:null},"visible":{type:"boolean",group:"Misc",defaultValue:true},"debugInfo":{type:"string",group:"Misc",defaultValue:null},"rgba":{type:"string",group:"Misc",defaultValue:null},"animationRendered":{type:"boolean",group:"Misc",defaultValue:false},"isLocked":{type:"boolean",group:"Misc",defaultValue:false},"showActionsIcon":{type:"boolean",group:"Misc",defaultValue:false},"tileActionModeActive":{type:"boolean",group:"Misc",defaultValue:false}},aggregations:{"tileViews":{type:"sap.ui.core.Control",multiple:true,singularName:"tileView"},"footItems":{type:"sap.ui.core.Control",multiple:true,singularName:"footItem"}},events:{"press":{},"coverDivPress":{},"afterRendering":{}}}});sap.ushell.ui.launchpad.Tile.M_EVENTS={'press':'press','coverDivPress':'coverDivPress','afterRendering':'afterRendering'};(function(){"use strict";jQuery.sap.require("sap.ushell.override");sap.ushell.ui.launchpad.Tile.prototype.ontap=function(e,u){jQuery.sap.log.info("Tile clicked:",this.getDebugInfo(),"sap.ushell.ui.launchpad.Tile");return;var s=e.srcElement,I=true,i,t=function(){var h=function(){this.toggleStyleClass("sapUshellTileHide",false);};this.toggleStyleClass("sapUshellTileHide",true);this.toggleStyleClass("sapUshellTileTapped",false);window.setTimeout(jQuery.proxy(h,this),800);};if(sap.ui.Device.system.phone||!jQuery.support.cssAnimations){return;}for(i=0;i<6;i=i+1){if(jQuery(s)&&(jQuery(s).hasClass("sapUshellTileInner")||jQuery(s).hasClass("sapUshellPlusTile"))){I=false;break;}s=jQuery(s).parent();}if(I){return;}this.toggleStyleClass("sapUshellTileTapped",true);window.setTimeout(jQuery.proxy(t,this),1000);};sap.ushell.ui.launchpad.Tile.prototype.destroy=function(s){this.destroyTileViews();sap.ui.core.Control.prototype.destroy.call(this,s);};sap.ushell.ui.launchpad.Tile.prototype.addTileView=function(o,s){o.setParent(null);sap.ui.base.ManagedObject.prototype.addAggregation.call(this,"tileViews",o,s);};sap.ushell.ui.launchpad.Tile.prototype.destroyTileViews=function(){if(this.mAggregations["tileViews"]){this.mAggregations["tileViews"].length=0;}};sap.ushell.ui.launchpad.Tile.prototype.onAfterRendering=function(){var c=this.$().find("div.tileActionLayerDiv"),r;if(this.getTileActionModeActive()){c.css("display","block");}else{c.css("display","none");}r=this.getRgba();if(r){this._redrawRGBA();}this.fireAfterRendering();};sap.ushell.ui.launchpad.Tile.prototype.onsapenter=function(e){if(this.getTileActionModeActive()){this.fireCoverDivPress({id:this.getId()});}else{this.getTileViews()[0].firePress({id:this.getId()});}};sap.ushell.ui.launchpad.Tile.prototype.onsapspace=function(){if(this.getTileActionModeActive()){this.fireCoverDivPress({id:this.getId()});}else{this.firePress({id:this.getId()});}};sap.ushell.ui.launchpad.Tile.prototype.onclick=function(){if(this.getTileActionModeActive()){this.fireCoverDivPress({id:this.getId()});}};sap.ushell.ui.launchpad.Tile.prototype.setShowActionsIcon=function(s){var t=this,i,a;if(s){i=new sap.ui.core.Icon({size:"1rem",src:"sap-icon://overflow",tooltip:"Tile Actions",press:function(e){sap.ushell.renderers.fiori2.ActionMode._openActionsMenu(e,t);t.addStyleClass('showTileActionsIcon');var E=sap.ui.getCore().getEventBus();var b=(function(n,c,d){d.removeStyleClass('showTileActionsIcon');E.unsubscribe("dashboard","actionSheetClose",b);});E.subscribe("dashboard","actionSheetClose",b);}});i.addStyleClass("tileActionsIconClass");this.actionIcon=i;}else if(this.actionIcon){this.actionIcon.destroy(true);}this.setProperty("showActionsIcon",s);};sap.ushell.ui.launchpad.Tile.prototype.setVisible=function(v){this.setProperty("visible",v,true);return this.toggleStyleClass("sapUshellHidden",!v);};sap.ushell.ui.launchpad.Tile.prototype.setRgba=function(v){this.setProperty("rgba",v,true);this._redrawRGBA(arguments);};sap.ushell.ui.launchpad.Tile.prototype.setAnimationRendered=function(v){this.setProperty('animationRendered',v,true);};sap.ushell.ui.launchpad.Tile.prototype._handleTileShadow=function(j,a){if(j.length){j.unbind('mouseenter mouseleave');var u,t=j.css("border").split("px")[0],m=this.getModel();if(t>0){u=j.css("border-color");}else{u=this.getRgba();}j.hover(function(){if(!m.getProperty('/tileActionModeActive')){var o=jQuery(j).css('box-shadow'),T=o?o.split(') ')[1]:null,U;if(T){U=T+" "+u;jQuery(this).css('box-shadow',U);}}},function(){jQuery(this).css('box-shadow','');});}};sap.ushell.ui.launchpad.Tile.prototype._redrawRGBA=function(a){var r=this.getRgba(),j,i;if(r){j=jQuery.sap.byId(this.getId());i=(jQuery.browser.msie&&(parseInt(jQuery.browser.version,9)===9));if(!j){return;}if(!this.getModel().getProperty('/animationRendered')){if(i){j.animate({backgroundColor:r},2000);}else{j.css('transition','background-color 2s');j.css('background-color',r);}}else{j.css('background-color',r);}this._handleTileShadow(j,a);}};sap.ushell.ui.launchpad.Tile.prototype.setLong=function(l){this.setProperty("long",l,true);return this.toggleStyleClass("sapUshellLong",l);};sap.ushell.ui.launchpad.Tile.prototype.setTall=function(t){this.setProperty("tall",t,true);return this.toggleStyleClass("sapUshellTall",t);};sap.ushell.ui.launchpad.Tile.prototype.setUuid=function(u){this.setProperty("uuid",u,true);return this;};}());},"sap/ushell/ui/launchpad/TileContainer.js":function(){jQuery.sap.declare("sap.ushell.ui.launchpad.TileContainer");jQuery.sap.require("sap.ushell.library");jQuery.sap.require("sap.ui.core.Control");sap.ui.core.Control.extend("sap.ushell.ui.launchpad.TileContainer",{metadata:{library:"sap.ushell",properties:{"scrollType":{type:"string",group:"Misc",defaultValue:'item'},"animationSpeed":{type:"int",group:"Misc",defaultValue:500},"groupId":{type:"string",group:"Misc",defaultValue:null},"showHeader":{type:"boolean",group:"Misc",defaultValue:true},"showPlaceholder":{type:"boolean",group:"Misc",defaultValue:true},"defaultGroup":{type:"boolean",group:"Misc",defaultValue:false},"isLastGroup":{type:"boolean",group:"Misc",defaultValue:false},"headerText":{type:"string",group:"Misc",defaultValue:null},"headerLevel":{type:"sap.m.HeaderLevel",group:"Misc",defaultValue:sap.m.HeaderLevel.H2},"groupHeaderLevel":{type:"sap.m.HeaderLevel",group:"Misc",defaultValue:sap.m.HeaderLevel.H4},"showGroupHeader":{type:"boolean",group:"Misc",defaultValue:true},"visible":{type:"boolean",group:"Misc",defaultValue:true},"sortable":{type:"boolean",group:"Misc",defaultValue:true},"showNoData":{type:"boolean",group:"Misc",defaultValue:false},"noDataText":{type:"string",group:"Misc",defaultValue:null},"isGroupLocked":{type:"boolean",group:"Misc",defaultValue:null},"editMode":{type:"boolean",group:"Misc",defaultValue:false},"showBackground":{type:"boolean",group:"Misc",defaultValue:false},"icon":{type:"string",group:"Misc",defaultValue:'sap-icon://locked'},"showIcon":{type:"boolean",group:"Misc",defaultValue:false},"deluminate":{type:"boolean",group:"Misc",defaultValue:false},"showMobileActions":{type:"boolean",group:"Misc",defaultValue:false},"enableHelp":{type:"boolean",group:"Misc",defaultValue:false},"tileActionModeActive":{type:"boolean",group:"Misc",defaultValue:false},"showDragIndicator":{type:"boolean",group:"Misc",defaultValue:false}},aggregations:{"tiles":{type:"sap.ushell.ui.launchpad.Tile",multiple:true,singularName:"tile"},"beforeContent":{type:"sap.ui.core.Control",multiple:true,singularName:"beforeContent"},"afterContent":{type:"sap.ui.core.Control",multiple:true,singularName:"afterContent"},"footerContent":{type:"sap.ui.core.Control",multiple:true,singularName:"footerContent"},"headerActions":{type:"sap.ui.core.Control",multiple:true,singularName:"headerAction"}},events:{"afterRendering":{},"add":{},"titleChange":{}}}});sap.ushell.ui.launchpad.TileContainer.M_EVENTS={'afterRendering':'afterRendering','add':'add','titleChange':'titleChange'};(function(){"use strict";jQuery.sap.require("sap.ushell.override");sap.ushell.ui.launchpad.TileContainer.prototype.init=function(){jQuery.sap.require("sap.ushell.ui.launchpad.PlusTile");this._sDefaultValue=sap.ushell.resources.i18n.getText("new_group_name");this._sOldTitle="";this.oIcon=new sap.ui.core.Icon({src:this.getIcon()});this.oIcon.addStyleClass('sapUshellContainerIcon');this.oPlusTile=new sap.ushell.ui.launchpad.PlusTile({groupId:this.getGroupId(),press:[this.fireAdd,this]});this.oPlusTile.setParent(this);};sap.ushell.ui.launchpad.TileContainer.prototype.exit=function(){if(this.oPlusTile){this.oPlusTile.destroy();}};sap.ushell.ui.launchpad.TileContainer.prototype.onAfterRendering=function(){var t=this,j;if(this.getEnableHelp()){this.oPlusTile.addStyleClass("help-id-plusTile");}this.handleNoItemsToDisplayMessage();jQuery("#"+this.getId()+"-title").find(this.getHeaderLevel()).click(function(){var e=!t.getIsGroupLocked()&&!t.getDefaultGroup()&&t.getTileActionModeActive();t.setEditMode(e);});if((document.documentMode)&&(navigator.maxTouchPoints||navigator.msMaxTouchPoints)){j=jQuery(this.getDomRef());j.on("MSHoldVisual contextmenu",".sapUshellTile",function(e){e.preventDefault();});}this.fireAfterRendering();};sap.ushell.ui.launchpad.TileContainer.prototype.updateAggregation=sap.ushell.override.updateAggregation;sap.ushell.ui.launchpad.TileContainer.prototype.updateTiles=function(r){var n="tiles";if(this.isTreeBinding(n)){sap.ui.base.ManagedObject.prototype.updateAggregation.apply(this,arguments);}else{jQuery.sap.log.debug("Updating TileContainer. Reason: ",r);switch(r){case"filter":try{this.filterTiles();}catch(e){this.updateAggregation(n);}break;default:this.updateAggregation(n);}}};sap.ushell.ui.launchpad.TileContainer.prototype.handleNoItemsToDisplayMessage=function(){var t=this.getBinding('tiles'),i=t&&t.getContexts().length;if(i){this.$().find(".sapUshellNoFilteredItems").hide();}else{if(this.getShowNoData()){if(this.getNoDataText()){this.setNoDataText(this.getNoDataText());}else{this.setNoDataText(sap.ushell.resources.i18n.getText("noFilteredItems"));}this.$().find(".sapUshellNoFilteredItems").show();}}};sap.ushell.ui.launchpad.TileContainer.prototype.createMissingElementsInOnScreenElements=function(i,e,a,g,s,b,f,A){var p,n=null,G=null,j=a,S=this.getShowGroupHeader(),c=e.length,o;for(j=a;j<c;j++){p=e[j].getPath();if(!i.onScreenPathIndexMap[p]){if(g&&s.length>0){n=s[0].fnGroup(e[j]);if(typeof n==="string"){n={key:n};}if(G===null&&j>0){G=s[0].fnGroup(e[j-1]);}if(n.key!==G){if(b.groupHeaderFactory){o=b.groupHeaderFactory(n);}if(!i.onScreenHeaders[n.key]){A(n,o);i.onScreenHeaders[n.key]={aItemsRefrenceIndex:this.getTiles().length-1,isVisible:S};}G=n.key;}}f(e[j]);i.onScreenPathIndexMap[p]={aItemsRefrenceIndex:this.getTiles().length-1,isVisible:true};}else{throw true;}}};sap.ushell.ui.launchpad.TileContainer.prototype.addNewItem=function(e){var n="tiles",a=this.getMetadata().getJSONKeys()[n],b=this.mBindingInfos[n],f=b.factory,c=jQuery.proxy(function(C){var i=this.getId()+"-"+jQuery.sap.uid(),o=f(i,C);o.setBindingContext(C,b.model);this[a._sMutator](o);},this);c(e);};sap.ushell.ui.launchpad.TileContainer.prototype.markVisibleOnScreenElements=function(e,i){var a=0,p,b=e.length;for(a=0;a<b;a++){p=e[a].getPath();if(i.onScreenPathIndexMap[p]){i.onScreenPathIndexMap[p].isVisible=true;}else{return a;}}return a;};sap.ushell.ui.launchpad.TileContainer.prototype.indexOnScreenElements=function(o){var p,i,a={onScreenHeaders:{},onScreenPathIndexMap:{}},b=o.length,c;for(i=0;i<b;i++){c=o[i];if(c.getHeaderText){a.onScreenHeaders[c.getHeaderText()]={aItemsRefrenceIndex:i,isVisible:false};}else if(c.getBindingContext()){p=c.getBindingContext().getPath();a.onScreenPathIndexMap[p]={aItemsRefrenceIndex:i,isVisible:false};}}return a;};sap.ushell.ui.launchpad.TileContainer.prototype.showHideTilesAndHeaders=function(i,o){var s,n="tiles",S=this.getShowGroupHeader(),b=this.mBindingInfos[n].binding,g,r,e;for(s in i.onScreenPathIndexMap){if(i.onScreenPathIndexMap.hasOwnProperty(s)){e=i.onScreenPathIndexMap[s];r=o[e.aItemsRefrenceIndex];r.setVisible(e.isVisible);if(e.isVisible){g=b.aSorters[0].fnGroup(r.getBindingContext());i.onScreenHeaders[g].isVisible=S;}}}for(s in i.onScreenHeaders){if(i.onScreenHeaders.hasOwnProperty(s)){e=i.onScreenHeaders[s];o[e.aItemsRefrenceIndex].setVisible(e.isVisible);}}};sap.ushell.ui.launchpad.TileContainer.prototype.filterTiles=function(){var n="tiles",b=this.mBindingInfos[n],B=this.mBindingInfos[n].binding,a=B.getContexts(),i=this.getTiles(),c;var d=this.indexOnScreenElements(i);c=this.markVisibleOnScreenElements(a,d);if(a[c]&&this.getTiles().length>0){var l=this.getTiles()[this.getTiles().length-1].getBindingContext().getPath();var f=a[c].getPath();var s=l.split('/');var e=f.split('/');var g=s[s.length-1];var h=e[e.length-1];if(parseInt(g)>parseInt(h)){throw true;}}this.createMissingElementsInOnScreenElements(d,a,c,B.isGrouped(),B.aSorters,b,this.addNewItem.bind(this),this.addTileGroup.bind(this));i=this.getTiles();this.showHideTilesAndHeaders(d,i);this.handleNoItemsToDisplayMessage();};sap.ushell.ui.launchpad.TileContainer.prototype.addTileGroup=function(g,h){this.addAggregation("tiles",h||new sap.ushell.ui.launchpad.HeaderTile({headerText:g.text||g.key,headerLevel:g.headerLevel||this.getGroupHeaderLevel(),visible:this.getShowGroupHeader()}).addStyleClass("sapUshellTileContainerHdr"));};sap.ushell.ui.launchpad.TileContainer.prototype.setNoDataText=function(n){this.setProperty("noDataText",n,true);if(this.getShowNoData()){this.$().find(".sapUshellNoFilteredItems").text(n);}return this;};sap.ushell.ui.launchpad.TileContainer.prototype.setGroupId=function(v){this.setProperty("groupId",v,true);if(this.oPlusTile){this.oPlusTile.setGroupId(v);}return this;};sap.ushell.ui.launchpad.TileContainer.prototype.setHeaderText=function(h){this.setProperty("headerText",h,true);this.$().find(".sapUshellContainerTitle").text(h);return this;};sap.ushell.ui.launchpad.TileContainer.prototype.setVisible=function(v){this.setProperty("visible",v,true);this.toggleStyleClass("sapUshellHidden",!v);return this;};sap.ushell.ui.launchpad.TileContainer.prototype.setShowMobileActions=function(s){var S=true;if(this.oHeaderButton){this.oHeaderButton.setVisible(s);}else if(s){S=false;}this.setProperty('showMobileActions',s,S);};sap.ushell.ui.launchpad.TileContainer.prototype.setShowIcon=function(s){this.setProperty('showIcon',s,true);jQuery('#'+this.getId()).find('.'+'sapUshellContainerIcon').toggleClass('sapUshellContainerIconHidden',!s);};sap.ushell.ui.launchpad.TileContainer.prototype.setDeluminate=function(d){this.setProperty('deluminate',d,true);this.toggleStyleClass('sapUshellDisableLockedGroupDuringDrag',d);return this;};sap.ushell.ui.launchpad.TileContainer.prototype.groupHasVisibleTiles=function(){var p='',t=this.getTiles();if(this.getBindingContext()){p=this.getBindingContext().sPath;t=this.getModel().getProperty(p).tiles;}return sap.ushell.utils.groupHasVisibleTiles(t);};sap.ushell.ui.launchpad.TileContainer.prototype.getInnerContainerDomRef=function(){var c=this.getDomRef(),i;if(!c){return null;}i=jQuery(c).find('.sapUshellTilesContainer-sortable');return i[0];};sap.ushell.ui.launchpad.TileContainer.prototype.setEditMode=function(v){this.setProperty('editMode',v,false);if(v){this.addStyleClass('sapUshellEditing');this._startEdit();}else{this.removeStyleClass('sapUshellEditing');}};sap.ushell.ui.launchpad.TileContainer.prototype._startEdit=function(){if(this.getModel()&&!this.getModel().getProperty("/editTitle")){this.getModel().setProperty("/editTitle",true,false);}if(!this.oEditInputField){jQuery.sap.require("sap.m.Input");var t=this;this.oEditInputField=new sap.m.Input({placeholder:this._sDefaultValue,value:this.getHeaderText()}).addStyleClass('sapUshellTileContainerTitleInput');this.oEditInputField.addEventDelegate({onfocusout:function(e){var T=e.srcControl,j=jQuery(T.getDomRef()).prev();t._stopEdit();jQuery.proxy(t.setEditMode,t,false)();},onsapenter:function(e){t._stopEdit();jQuery.proxy(t.setEditMode,t,false)();setTimeout(function(){sap.ushell.renderers.fiori2.AccessKeysHandler.setTabIndexOnTileContainerHeader(jQuery(t.getDomRef()));var T=e.srcControl,j=jQuery(T.getDomRef()).prev();j.focus();},0);}});}this._sOldTitle=this._sDefaultValue;this.oEditInputField.setValue(this.getHeaderText());var t=this;setTimeout(function(){if(sap.ui.Device.system.phone){var e=sap.ui.getCore().getEventBus();e.publish("launchpad","scrollToGroup",{group:t,groupChanged:false,focus:false});}jQuery(t.oEditInputField.getDomRef()).find('input').focus();t.oEditInputField.selectText(0,t.oEditInputField.getValue().length);},100);};sap.ushell.ui.launchpad.TileContainer.prototype._stopEdit=function(){var c=this.getHeaderText();var n=this.oEditInputField.getValue(),h;n=n.trim()||this._sDefaultValue;h=n!==c;if(this.getModel()&&this.getModel().getProperty("/editTitle")){this.getModel().setProperty("/editTitle",false,false);}if(!this._sOldTitle){this._sOldTitle=c;this.setHeaderText(c);}else if(h){this.fireTitleChange({newTitle:n});this.setHeaderText(n);}};sap.ushell.ui.launchpad.TileContainer.prototype.exit=function(){if(this.oHeaderButton){this.oHeaderButton.destroy();}if(this.oActionSheet){this.oActionSheet.destroy();}if(sap.ui.core.Control.prototype.exit){sap.ui.core.Control.prototype.exit.apply(this,arguments);}};}());},"sap/ushell/ui/launchpad/TileContainerRenderer.js":function(){(function(){"use strict";jQuery.sap.require("sap.ushell.resources");jQuery.sap.declare("sap.ushell.ui.launchpad.TileContainerRenderer");sap.ushell.ui.launchpad.TileContainerRenderer={};sap.ushell.ui.launchpad.TileContainerRenderer.render=function(r,c){var t=c.getTiles(),h=c.getHeaderActions(),b=c.getBeforeContent(),a=c.getAfterContent(),f=c.getFooterContent()||[],H=!c.getVisible(),v=false,d;r.write("<div");r.writeControlData(c);r.addClass("sapUshellTileContainer");r.writeClasses();if(H){r.addStyle("display","none");r.writeStyles();}r.write(">");if(b.length){r.write("<div");r.addClass("sapUshellTileContainerBeforeContent");r.writeClasses();r.write(">");jQuery.each(b,function(){r.renderControl(this);});r.write("</div>");}r.write("<div");r.addClass("sapUshellTileContainerContent");if(c.getIsGroupLocked()){r.addClass("sapUshellTileContainerLocked");}if(c.getDefaultGroup()){r.addClass("sapUshellTileContainerDefault");}if(c.getShowBackground()){r.addClass("tileContainerEditMode");}r.writeClasses();r.writeAttribute("tabindex","-1");r.write(">");if(c.getShowDragIndicator()){r.write("<div");r.addClass("sapUshellCircleBase");r.writeClasses();r.write(">");r.write("<div");r.addClass("sapUshellCircle");r.writeClasses();r.write(">");r.write("</div>");r.write("<div");r.addClass("sapUshellCircle");r.writeClasses();r.write(">");r.write("</div>");r.write("<div");r.addClass("sapUshellCircle");r.writeClasses();r.write(">");r.write("</div>");r.write("<div");r.addClass("sapUshellCircle");r.writeClasses();r.write(">");r.write("</div>");r.write("</div>");}if(c.getShowHeader()){r.write("<div");r.addClass("sapUshellTileContainerHeader");r.writeClasses();r.write(">");r.write("<div");r.writeAttribute("id",c.getId()+"-title");r.write(">");r.write("<");r.write(c.getHeaderLevel().toLowerCase());r.addClass('sapUshellContainerTitle');r.addClass("sapUiStrongBackgroundTextColor");r.writeClasses();r.writeAttributeEscaped("title",c.getHeaderText());r.write(">");r.writeEscaped(c.getHeaderText());if(c.getShowIcon()){c.oIcon.removeStyleClass('sapUshellContainerIconHidden')}else{c.oIcon.addStyleClass('sapUshellContainerIconHidden');}r.renderControl(c.oIcon);r.write("</");r.write(c.getHeaderLevel().toLowerCase());r.write(">");r.renderControl(c.oEditInputField);r.write("<div");r.addClass('sapUshellContainerHeaderActions');r.writeClasses();r.write(">");jQuery.each(h,function(){r.renderControl(this);});r.write("</div>");r.write("</div>");r.write("</div>");}r.write("<div");d=c.data('containerHeight');if(d){r.writeAttribute("style",'height:'+d);}r.addClass('sapUshellTilesContainer-sortable');r.addClass('sapUshellInner');r.writeClasses();r.write(">");jQuery.each(t,function(){if(this.getVisible()){v=true;}if(this.getVisible){r.renderControl(this);}});if(c.getShowPlaceholder()){r.renderControl(c.oPlusTile);}if(c.getShowNoData()){this.renderNoData(r,c,!t.length||!v);}r.write("</div>");if(f.length>0){r.write("<footer");r.addClass('sapUshellTilesContainerFtr');r.writeClasses();r.write(">");jQuery.each(f,function(){r.renderControl(this);});r.write("</footer>");}r.write("</div>");if(a.length){r.write("<div");r.addClass("sapUshellTileContainerAfterContent");r.writeClasses();r.write(">");jQuery.each(a,function(){r.renderControl(this);});r.write("</div>");}r.write("</div>");};sap.ushell.ui.launchpad.TileContainerRenderer.renderNoData=function(r,c,d){r.write("<div id='"+c.getId()+"-listNoData' class='sapUshellNoFilteredItems sapUiStrongBackgroundTextColor'>");if(d){if(c.getNoDataText()){r.writeEscaped(c.getNoDataText());}else{r.writeEscaped(c.getNoDataText(sap.ushell.resources.i18n.getText("noFilteredItems")));}}else{r.writeEscaped("");}r.write("</div>");};}());},"sap/ushell/ui/launchpad/TileRenderer.js":function(){(function(){"use strict";jQuery.sap.require("sap.ushell.resources");jQuery.sap.declare("sap.ushell.ui.launchpad.TileRenderer");sap.ushell.ui.launchpad.TileRenderer={};var t=sap.ushell.resources.i18n;sap.ushell.ui.launchpad.TileRenderer.render=function(r,c){var T=null,m=c.getModel();try{T=c.getTileViews()[0];}catch(e){jQuery.sap.log.warning("Failed to load tile view: ",e.message);T=new sap.m.Text({text:"Failed to load. "});}r.write("<div");if(m&&m.getProperty("/enableHelp")){r.writeAttribute("data-tileCatalogId",c.getTileCatalogId());}r.writeControlData(c);r.addClass("sapUshellTile");if(c.getFootItems()&&c.getFootItems().length>0){r.addClass("sapUshellTileFooter");}if(c.getLong()){r.addClass("sapUshellLong");}if(c.getTall()){r.addClass("sapUshellTall");}if(!c.getVisible()){r.addClass("sapUshellHidden");}if(c.getIsLocked()){r.addClass("sapUshellLockedTile");}r.writeClasses();r.writeAttributeEscaped("tabindex","-1");var l=c.data('layoutPosition');if(l){var s='-webkit-transform:'+l.translate3D+';-ms-transform:'+l.translate2D+';transform:'+l.translate3D;r.writeAttribute("style",s);}r.writeAccessibilityState(c,{role:'link',label:t.getText("TileDetails_lable")});r.write(">");r.write("<div");r.addClass("tileActionLayerDiv");r.writeClasses();r.write(">");r.write("</div>");r.addClass("sapUshellTileInner");if(this.renderTileView){this.renderTileView(r,T,c.getTarget());}if(c.getShowActionsIcon()){r.renderControl(c.actionIcon);}r.write("<footer");if(m&&m.getProperty("/enableHelp")){r.writeAttribute("data-tileCatalogId","addRemoveTile-"+c.getTileCatalogId());}r.addClass("sapUshellTileFooterElement");r.writeClasses();r.write(">");jQuery.each(c.getFootItems(),function(){r.renderControl(this);});r.write("</footer>");r.write("</div>");};sap.ushell.ui.launchpad.TileRenderer.renderTileView=function(r,T,s){if((s||"")!==""){r.write("<a");r.writeClasses();r.writeAttributeEscaped("href","#"+s);r.write(">");r.renderControl(T);r.write("</a>");}else{r.write("<div");r.writeClasses();r.writeAttribute("title",sap.ushell.resources.i18n.getText("launchTile_tooltip"));r.write(">");r.renderControl(T);r.write("</div>");}};}());},"sap/ushell/ui/tile/DynamicTile.js":function(){jQuery.sap.declare("sap.ushell.ui.tile.DynamicTile");jQuery.sap.require("sap.ushell.library");jQuery.sap.require("sap.ushell.ui.tile.TileBase");sap.ushell.ui.tile.TileBase.extend("sap.ushell.ui.tile.DynamicTile",{metadata:{library:"sap.ushell",properties:{"numberValue":{type:"string",group:"Data",defaultValue:'0.0'},"numberState":{type:"sap.ushell.ui.tile.State",group:"Appearance",defaultValue:sap.ushell.ui.tile.State.Neutral},"numberUnit":{type:"string",group:"Data",defaultValue:null},"numberDigits":{type:"int",group:"Appearance",defaultValue:0},"stateArrow":{type:"sap.ushell.ui.tile.StateArrow",group:"Appearance",defaultValue:sap.ushell.ui.tile.StateArrow.None},"numberFactor":{type:"string",group:"Data",defaultValue:null}}}});},"sap/ushell/ui/tile/DynamicTileRenderer.js":function(){(function(){"use strict";jQuery.sap.declare("sap.ushell.ui.tile.DynamicTileRenderer");jQuery.sap.require("sap.ushell.ui.tile.TileBaseRenderer");jQuery.sap.require("sap.ushell.ui.tile.State");jQuery.sap.require("sap.ui.core.format.NumberFormat");sap.ushell.ui.tile.DynamicTileRenderer=sap.ui.core.Renderer.extend(sap.ushell.ui.tile.TileBaseRenderer);var t=sap.ushell.resources.i18n;sap.ushell.ui.tile.DynamicTileRenderer.renderPart=function(r,c){r.write("<div");r.addClass("sapUshellDynamicTile");r.writeClasses();r.write(">");r.write("<div");r.addClass("sapUshellDynamicTileData");r.addClass((c.getNumberState()?"sapUshellDynamicTileData"+c.getNumberState():"sapUshellDynamicTileData"+sap.ushell.ui.tile.State.Neutral));r.writeClasses();r.write(">");r.write("<div class='sapUshellDynamicTileIndication'>");if(c.getStateArrow()){r.write("<div");r.addClass("sapUshellDynamicTileStateArrow");r.addClass("sapUshellDynamicTileData"+c.getStateArrow());r.writeClasses();r.write(">");r.write("</div>");}r.write('<br><div');r.addClass("sapUshellDynamicTileNumberFactor");r.writeClasses();r.writeAccessibilityState(c,{label:t.getText("TileUnits_lable")+c.getNumberFactor()});r.write('>');r.writeEscaped(c.getNumberFactor());r.write('</div>');r.write("</div>");var n=c.getNumberValue(),a;if(isNaN(n)){a=n;}else{var N=sap.ui.core.format.NumberFormat.getFloatInstance({maxFractionDigits:c.getNumberDigits()});a=N.format(c.getNumberValue());}r.write('<div');r.addClass("sapUshellDynamicTileNumber");r.writeClasses();if(a&&a!==""){r.writeAccessibilityState(c,{label:t.getText("TileValue_lable")+a});r.write('>');var d=a;try{var m=c.getIcon()?4:5;m-=(a[m-1]=='.')?1:0;d=d.substring(0,m);}catch(e){}r.writeEscaped(d);}else{r.write('>');r.writeEscaped(c.getNumberValue());}r.write('</div>');r.write("</div>");r.write("</div>");};sap.ushell.ui.tile.DynamicTileRenderer.getInfoPrefix=function(c){return c.getNumberUnit();};}());},"sap/ushell/ui/tile/StaticTile.js":function(){jQuery.sap.declare("sap.ushell.ui.tile.StaticTile");jQuery.sap.require("sap.ushell.library");jQuery.sap.require("sap.ushell.ui.tile.TileBase");sap.ushell.ui.tile.TileBase.extend("sap.ushell.ui.tile.StaticTile",{metadata:{library:"sap.ushell"}});},"sap/ushell/ui/tile/StaticTileRenderer.js":function(){(function(){"use strict";jQuery.sap.declare("sap.ushell.ui.tile.StaticTileRenderer");jQuery.sap.require("sap.ushell.ui.tile.TileBaseRenderer");sap.ushell.ui.tile.StaticTileRenderer=sap.ui.core.Renderer.extend(sap.ushell.ui.tile.TileBaseRenderer);sap.ushell.ui.tile.StaticTileRenderer.renderPart=function(r,c){r.write("<span");r.addClass("sapUshellStaticTile");r.writeClasses();r.write(">");r.write("</span>");};}());},"sap/ushell/ui/tile/TileBase.js":function(){jQuery.sap.declare("sap.ushell.ui.tile.TileBase");jQuery.sap.require("sap.ushell.library");jQuery.sap.require("sap.ui.core.Control");sap.ui.core.Control.extend("sap.ushell.ui.tile.TileBase",{metadata:{library:"sap.ushell",properties:{"title":{type:"string",group:"Data",defaultValue:null},"subtitle":{type:"string",group:"Data",defaultValue:null},"icon":{type:"string",group:"Data",defaultValue:null},"info":{type:"string",group:"Data",defaultValue:null},"infoState":{type:"sap.ushell.ui.tile.State",group:"",defaultValue:sap.ushell.ui.tile.State.Neutral},"targetURL":{type:"string",group:"Behavior",defaultValue:null},"highlightTerms":{type:"any",group:"Appearance",defaultValue:[]}},aggregations:{"content":{type:"sap.ui.core.Control",multiple:true,singularName:"content"}},events:{"press":{}}}});sap.ushell.ui.tile.TileBase.M_EVENTS={'press':'press'};(function(){"use strict";sap.ushell.ui.tile.TileBase.prototype.ontap=function(e){this.firePress({});};sap.ushell.ui.tile.TileBase.prototype.onsapenter=function(e){this.firePress({});};sap.ushell.ui.tile.TileBase.prototype.onsapspace=function(e){this.firePress({});};}());},"sap/ushell/ui/tile/TileBaseRenderer.js":function(){(function(){"use strict";jQuery.sap.require("sap.ushell.resources");jQuery.sap.declare("sap.ushell.ui.tile.TileBaseRenderer");sap.ushell.ui.tile.TileBaseRenderer={};var t=sap.ushell.resources.i18n;sap.ushell.ui.tile.TileBaseRenderer.highlight=function(h,T){var i,r,e=jQuery.sap.encodeHTML(T).replace(/&#xa;/g,"<br/>");if(h&&h.length&&h.length>0){for(i=0;i<h.length;i=i+1){r=new RegExp("("+jQuery.sap.encodeHTML(h[i]).replace(/([.*+?\^=!:${}()|\[\]\/\\])/g,"\\$1")+")","gi");e=e.replace(r,"<b>$1</b>");}}return e;};sap.ushell.ui.tile.TileBaseRenderer.render=function(r,c){var T=t.getText('launchTileTitle_tooltip',[c.getTitle()]),i,I;r.write("<div");r.writeControlData(c);if(c.getTargetURL()){r.writeAttributeEscaped("data-targeturl",c.getTargetURL());}r.writeAttributeEscaped("tabindex","-1");r.writeAttributeEscaped('title',T);r.addClass("sapUshellTileBase");r.writeClasses();r.write(">");r.write("<div");r.addClass("sapUshellTileBaseHeader");r.writeClasses();r.write(">");r.write("<h3");r.addClass("sapUshellTileBaseTitle");r.writeClasses();r.writeAccessibilityState(c,{label:t.getText("TileTitle_lable")+c.getTitle()});r.write(">");r.write(this.highlight(c.getHighlightTerms(),c.getTitle()||""));r.write("</h3>");if(c.getSubtitle()){r.write("<h4");r.addClass("sapUshellTileBaseSubtitle");r.writeClasses();r.writeAccessibilityState(c,{label:t.getText("TileSubTitle_lable")+c.getSubtitle()});r.write(">");r.write(this.highlight(c.getHighlightTerms(),c.getSubtitle()));r.write("</h4>");}r.write("</div>");if(typeof(this.renderPart)==='function'){this.renderPart(r,c);}if(c.getIcon()){I=new sap.ui.core.Icon({src:c.getIcon()});I.addStyleClass("sapUshellTileBaseIcon");r.renderControl(I);}if(c.getInfo()||((typeof(this.getInfoPrefix)==='function'))&&this.getInfoPrefix(c)){r.write("<div");r.addClass("sapUshellTileBaseInfo");r.addClass(c.getInfoState()?"sapUshellTileBase"+c.getInfoState():"sapUshellTileBase"+sap.ushell.ui.tile.State.Neutral);r.writeClasses();r.writeAccessibilityState(c,{label:t.getText("TileInfo_lable")+c.getInfo()});r.write(">");if(typeof(this.getInfoPrefix)==='function'){i=this.getInfoPrefix(c);r.writeEscaped(i);}if(c.getInfo()){if(i){r.write(", ");}r.write(this.highlight(c.getHighlightTerms(),c.getInfo()));}r.write("</div>");}r.write("</div>");};}());},"sap/ushell/utils.js":function(){(function(){"use strict";jQuery.sap.declare("sap.ushell.utils");sap.ushell.utils={};var v;sap.ushell.utils.Error=function(m,c){this.name="sap.ushell.utils.Error";this.message=m;jQuery.sap.log.error(m,null,c);};sap.ushell.utils.Error.prototype=new Error();sap.ushell.utils.localStorageSetItem=function(k,V,l){var E;try{localStorage.setItem(k,V);if(l){E=document.createEvent("StorageEvent");E.initStorageEvent("storage",false,false,k,"",V,"",localStorage);dispatchEvent(E);}}catch(e){jQuery.sap.log.warning("Error calling localStorage.setItem(): "+e,null,"sap.ushell.utils");}};sap.ushell.utils.Map=function(){this.entries={};};sap.ushell.utils.Map.prototype.put=function(k,V){var o=this.get(k);this.entries[k]=V;return o;};sap.ushell.utils.Map.prototype.containsKey=function(k){if(typeof k!=="string"){throw new sap.ushell.utils.Error("Not a string key: "+k,"sap.ushell.utils.Map");}return Object.prototype.hasOwnProperty.call(this.entries,k);};sap.ushell.utils.Map.prototype.get=function(k){if(this.containsKey(k)){return this.entries[k];}};sap.ushell.utils.Map.prototype.keys=function(){return Object.keys(this.entries);};sap.ushell.utils.Map.prototype.remove=function(k){delete this.entries[k];};sap.ushell.utils.Map.prototype.toString=function(){var r=['sap.ushell.utils.Map('];r.push(JSON.stringify(this.entries));r.push(')');return r.join('');};sap.ushell.utils.getParameterValueBoolean=function(p,P){var a=jQuery.sap.getUriParameters(P).mParams&&jQuery.sap.getUriParameters(P).mParams[p],t=["true","x"],f=["false",""],V;if(!a||a.length===0){return undefined;}V=a[0].toLowerCase();if(t.indexOf(V)>=0){return true;}if(f.indexOf(V)>=0){return false;}return undefined;};sap.ushell.utils.testPublishAt=function(o,e){};sap.ushell.utils.call=function(s,f,a){var m;if(a){setTimeout(function(){sap.ushell.utils.call(s,f,false);},0);return;}try{s();}catch(e){m=e.message||e.toString();jQuery.sap.log.error("Call to success handler failed: "+m,e.stack,"sap.ushell.utils");if(f){f(m);}}};sap.ushell.utils.handleTilesVisibility=function(){clearTimeout(v);v=setTimeout(function(){var s=new Date(),t=sap.ushell.utils.getVisibleTiles(),d,l;if((typeof t!="undefined")&&t.length>0){l=sap.ushell.Container.getService("LaunchPage");t.forEach(function(T){var a=sap.ushell.utils.getTileObject(T);if(a!==null){l.setTileVisible(a,T.isDisplayedInViewPort);}});jQuery.sap.log.debug("Visible Tiles: "+t.filter(function(T){return T.isDisplayedInViewPort;}).length);jQuery.sap.log.debug("NonVisible Tiles: "+t.filter(function(T){return!T.isDisplayedInViewPort;}).length);}d=new Date()-s;jQuery.sap.log.debug("Start time is: "+s+" and duration is: "+d);},1000);};sap.ushell.utils.setTilesNoVisibility=function(){var t=sap.ushell.utils.getVisibleTiles(),l;if((typeof t!=="undefined")&&t.length>0){l=sap.ushell.Container.getService("LaunchPage");t.forEach(function(T){l.setTileVisible(sap.ushell.utils.getTileObject(T),false);});jQuery.sap.log.debug("Visible Tiles: "+t.filter(function(T){return T.isDisplayedInViewPort;}).length);jQuery.sap.log.debug("NonVisible Tiles: "+t.filter(function(T){return!T.isDisplayedInViewPort;}).length);}};sap.ushell.utils.getBasicHash=function(h){if(!sap.ushell.utils.validHash(h)){jQuery.sap.log.debug("Utils ; getBasicHash ; Got invalid hash");return false;}var u=sap.ushell.Container.getService("URLParsing"),s=u.parseShellHash(h);return s?s.semanticObject+"-"+s.action:h;};sap.ushell.utils.validHash=function(h){return(h&&h.constructor===String&&jQuery.trim(h)!="");};sap.ushell.utils.handleTilesOpacity=function(){jQuery.sap.require("sap.ui.core.theming.Parameters");var t,c,a,C=sap.ui.core.theming.Parameters.get("sapUshellTileBackgroundColor"),r=this.hexToRgb(C),j,b,R,d,s,e,o,p,g,f,h=sap.ui.getCore(),m=h.byId("shell").getModel(),u=sap.ushell.Container.getService("UserRecents");if(r){R="rgba("+r.r+","+r.g+","+r.b+",{0})";a=u.getAppsUsage();a.done(function(i){t=i.usageMap;j=jQuery('.sapUshellTile').not('.sapUshellTileFooter');var k=m.getProperty("/groups");m.setProperty('/animationRendered',true);for(var l=0;l<j.length;l++){d=jQuery(j[l]);s=this.getBasicHash(d.find('.sapUshellTileBase').attr('data-targeturl'));if(s){b=this.convertToRealOpacity(t[s],i.maxUsage);e=R.replace("{0}",b);c=sap.ui.getCore().byId(d.attr('id'));o=c.getBindingContext();p=o.sPath.split('/');g=p[2];f=p[4];k[g].tiles[f].rgba=e;}}m.setProperty("/groups",k);}.bind(this));}};sap.ushell.utils.convertToRealOpacity=function(a,m){var o=[1,0.95,0.9,0.85,0.8],O=Math.floor(m/o.length),i;if(!a){return o[0];}else if(!m){return o[o.length-1];}else{i=Math.floor((m-a)/O);return i<o.length?o[i]:o[o.length-1];}};sap.ushell.utils.getCurrentHiddenGroupIds=function(){var g=sap.ui.getCore().byId("shell").getModel().getProperty('/groups'),h=[],G,a;for(a in g){if(!g[a].isGroupVisible){G=g[a].groupId;h.push(G);}}return h;};sap.ushell.utils.hexToRgb=function(h){var i=!h||h[0]!='#'||(h.length!=4&&h.length!=7),r;h=!i&&h.length===4?'#'+h[1]+h[1]+h[2]+h[2]+h[3]+h[3]:h;r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(h);return r?{r:parseInt(r[1],16),g:parseInt(r[2],16),b:parseInt(r[3],16)}:null;};sap.ushell.utils.getFormFactor=function(){var s=sap.ui.Device.system;if(s.desktop){return s.SYSTEMTYPE.DESKTOP;}else if(s.tablet){return s.SYSTEMTYPE.TABLET;}else{return s.phone?s.SYSTEMTYPE.PHONE:undefined;}};sap.ushell.utils.getVisibleTiles=function(){var n=document.body.clientHeight,c=sap.ui.getCore().byId("dashboardGroups"),N=sap.ui.getCore().byId("navContainer"),g,t,a,b,T,d,e,f,h,s=jQuery('#shell-hdr').height(),i=[];if(c&&c.getGroups()&&N){var C=N.getModel().getProperty("/currentState/stateName"),I=C==="home",G=c.getGroups();for(g=0;g<G.length;g=g+1){a=G[g];b=a.getTiles();if(b){for(t=0;t<b.length;t=t+1){T=b[t];if(!I){T.isDisplayedInViewPort=false;}else{d=jQuery(T.getDomRef());e=d.offset();if(!e){return null;}f=d.offset().top;h=f+d.height();T.isDisplayedInViewPort=(h>s)&&(f<n);}i.push(T);}}}}return i;};sap.ushell.utils.getTileObject=function(u){var b=u.getBindingContext();return b.getObject()?b.getObject().object:null;};sap.ushell.utils.addBottomSpace=function(){var j=jQuery('#dashboardGroups').find('.sapUshellTileContainer:visible'),l=j.last(),h=jQuery(".sapUshellShellHead").height(),a=l.parent().height(),g=parseInt(l.find(".sapUshellContainerTitle").css("margin-top"),10),b=parseInt(jQuery('.sapUshellDashboardGroupsContainer').css("padding-bottom"),10);var n=jQuery(window).height()-h-a-g-b;n=(n<0)?0:n;jQuery('.sapUshellDashboardGroupsContainer').css("margin-bottom",n+"px");};sap.ushell.utils.groupHasVisibleTiles=function(g){var a=false,t,b;if(!g||(g&&g.length===0)){return false;}for(t=0;t<g.length;t=t+1){b=g[t];if(b.isTileIntentSupported){a=true;break;}}return a;};}());}}});jQuery.sap.require("sap.ui.core.Core");sap.ui.getCore().boot&&sap.ui.getCore().boot();
