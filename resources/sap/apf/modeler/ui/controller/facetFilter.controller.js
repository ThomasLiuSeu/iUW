/*!
* SAP APF Analysis Path Framework
*
* (c) Copyright 2012-2014 SAP SE. All rights reserved
*/
jQuery.sap.require("sap.apf.modeler.ui.utils.textPoolHelper");sap.ui.controller("sap.apf.modeler.ui.controller.facetFilter",{onInit:function(){this.getView().addStyleClass("sapUiSizeCompact");this.oViewData=this.getView().getViewData();this.getText=this.oViewData.getText;this.params=this.oViewData.oParams;this.oConfigurationHandler=this.oViewData.oConfigurationHandler;this.oConfigurationEditor=this.oViewData.oConfigurationEditor;var s=this;if(!this.oConfigurationEditor){this.oConfigurationHandler.loadConfiguration(this.params.arguments.configId,function(c){s.oConfigurationEditor=c;});}this.oTextPool=this.oConfigurationHandler.getTextPool();this._addConfigStyleClass();this._setDisplayText();this.setDetailData();var m=[];m.push(this.byId("idffProperty"));m.push(this.byId("idLabel"));m.push(this.byId("idVHDefaultValues"));m.push(this.byId("idVHfunction"));m.push(this.byId("idVHEntity"));m.push(this.byId("idVHSelectProperties"));m.push(this.byId("idFREntity"));m.push(this.byId("idFRSelectProperties"));this._setMandatoryFields(m);},onAfterRendering:function(){this._setMandatoryFieldsVHD();},_addConfigStyleClass:function(){this.byId("idValueHelpTitle").addStyleClass("formTextTitle");this.byId("idFilterResolutionTitle").addStyleClass("formTextTitle");this.byId("idScrollContent").addStyleClass("scrollContentLayout");},_addAutoCompleteFeatureOnInputs:function(){if(this.oConfigurationHandler){var t=new sap.apf.modeler.ui.utils.TextPoolHelper(this.oTextPool);var T=sap.apf.modeler.ui.utils.TranslationFormatMap.FACETFILTER_LABEL;var d={oTranslationFormat:T,type:"text"};var f=this.byId("idLabel");t.setAutoCompleteOn(f,d);var D={oConfigurationEditor:this.oConfigurationEditor,type:"service"};var F=this.byId("idVHSource");t.setAutoCompleteOn(F,D);var o=this.byId("idFRSource");t.setAutoCompleteOn(o,D);}},_setDisplayText:function(){this.byId("idLabel").setPlaceholder(this.getText("facetFilterName"));this.byId("idValueHelpTitle").setText(this.getText("valueHelp"));this.byId("idFilterResolutionTitle").setText(this.getText("filterResolution"));this.byId("idFfPropertyLabel").setText("*"+this.getText("ffProperty")+": ");this.byId("idFfLabel").setText("*"+this.getText("ffLabel")+": ");this.byId("idFfAliasLabel").setText(this.getText("ffAlias")+": ");this.byId("idSelectionModeLabel").setText(this.getText("ffSelectionMode")+": ");this.byId("idVhSourceLabel").setText(this.getText("vhSource")+": ");this.byId("idVhEntityLabel").setText(this.getText("vhEntity")+": ");this.byId("idVhSelectPropertiesLabel").setText(this.getText("vhSelectProperties")+": ");this.byId("idVhDefaultValueModeLabel").setText(this.getText("vhDefaultValueMode")+": ");this.byId("idVhDefaultValuesLabel").setText(this.getText("vhDefaultValues")+": ");this.byId("idVhFunctionLabel").setText(this.getText("function")+": ");this.byId("idVhSourceLabel1").setText(this.getText("vhSource")+": ");this.byId("idVhEntityLabel1").setText(this.getText("vhEntity")+": ");this.byId("idVhSelectPropertiesLabel1").setText(this.getText("vhSelectProperties")+": ");this.byId("single").setText(this.getText("singleSelection"));this.byId("multi").setText(this.getText("multipleSelection"));},setDetailData:function(){var p=[];this._addAutoCompleteFeatureOnInputs();var a=this.oConfigurationEditor.getAllKnownProperties();a.forEach(function(t){var u={};u.propertyKey=t;u.propertyName=t;p.push(u);});var d={Properties:p};var m=new sap.ui.model.json.JSONModel();m.setSizeLimit(500);m.setData(d);this.byId("idffProperty").setModel(m);var M=new sap.ui.model.json.JSONModel();M.setSizeLimit(500);M.setData(d);this.byId("idAlias").setModel(M);var D=[{dvKey:this.getText("fixedValues"),dvName:this.getText("fixedValues")},{dvKey:this.getText("function"),dvName:this.getText("function")}];var o={DVModes:D};var b=new sap.ui.model.json.JSONModel();b.setSizeLimit(500);b.setData(o);this.byId("idVHDefaultValueMode").setModel(b);if(this.params&&this.params.arguments&&this.params.arguments.facetFilterId){this.facetFilter=this.oConfigurationEditor.getFacetFilter(this.params.arguments.facetFilterId);}if(this.facetFilter){if(this.params&&this.params.arguments&&this.params.arguments.facetFilterId){this.facetFilter=this.oConfigurationEditor.getFacetFilter(this.params.arguments.facetFilterId);}if(this.facetFilter.getProperty()!==undefined&&this.facetFilter.getProperty()!==null){this.byId("idffProperty").setValue(this.facetFilter.getProperty());}if(this.facetFilter.getLabelKey()!==undefined&&this.facetFilter.getLabelKey()!==null&&this.oTextPool.get(this.facetFilter.getLabelKey())){this.byId("idLabel").setValue(this.oTextPool.get(this.facetFilter.getLabelKey()).TextElementDescription);}else{this.byId("idLabel").setValue(this.params.arguments.facetFilterId);}if(this.facetFilter.getAlias()!==undefined){this.byId("idAlias").setValue(this.facetFilter.getAlias());}if(this.facetFilter.isMultiSelection()!==undefined){this.byId("multi").setSelected(this.facetFilter.isMultiSelection());this.byId("single").setSelected(!this.facetFilter.isMultiSelection());}if(this.facetFilter.getServiceOfValueHelp()!==undefined){this.byId("idVHSource").setValue(this.facetFilter.getServiceOfValueHelp());var s=this.facetFilter.getServiceOfValueHelp();var A=[];var c=[];A=this.oConfigurationEditor.getAllEntitySetsOfService(s);A.forEach(function(t){var u={};u.entityKey=t;u.entityName=t;c.push(u);});var e={Entities:c};var f=new sap.ui.model.json.JSONModel();f.setSizeLimit(500);f.setData(e);this.byId("idVHEntity").setModel(f);this.byId("idVhEntityLabel").setText("*"+this.getText("vhEntity")+": ");this.byId("idVhSelectPropertiesLabel").setText("*"+this.getText("vhSelectProperties")+": ");}if(this.facetFilter.getEntitySetOfValueHelp()!==undefined){this.byId("idVHEntity").setSelectedKey(this.facetFilter.getEntitySetOfValueHelp());var E=this.facetFilter.getEntitySetOfValueHelp();var S=this.facetFilter.getServiceOfValueHelp();var P=[];p=[];P=this.oConfigurationEditor.getAllPropertiesOfEntitySet(S,E);var g=P[0];P.forEach(function(t){var u={};u.propertyKey=t;u.propertyName=t;p.push(u);});var h={Properties:p};var i=new sap.ui.model.json.JSONModel();i.setSizeLimit(500);i.setData(h);this.byId("idVHSelectProperties").setModel(i);}if(this.facetFilter.getSelectPropertiesOfValueHelp()&&this.facetFilter.getSelectPropertiesOfValueHelp().length>0){this.byId("idVHSelectProperties").setSelectedKeys(this.facetFilter.getSelectPropertiesOfValueHelp());}if(!this.facetFilter.isMultiSelection()){this.byId("idVhDefaultValuesLabel").setText("*"+this.getText("vhDefaultValues")+": ");this.byId("idVhFunctionLabel").setText("*"+this.getText("function")+": ");}if(this.facetFilter.getPreselectionFunction()){this.byId("idVhDefaultValuesLabelLayout").setVisible(false);this.byId("idVhFunctionLabelLayout").setVisible(true);this.byId("idVHDefaultValueMode").setSelectedKey(this.getText("function"));this.byId("idVHfunction").setValue(this.facetFilter.getPreselectionFunction());if(!this.facetFilter.isMultiSelection()){this.byId("idVHfunction").isMandatory=true;}}else{this.byId("idVhDefaultValuesLabelLayout").setVisible(true);this.byId("idVhFunctionLabelLayout").setVisible(false);this.byId("idVHDefaultValueMode").setSelectedKey(this.getText("fixedValues"));if(this.facetFilter.getPreselectionDefaults().length>0){var j;if(this.facetFilter.isMultiSelection()){j=this.facetFilter.getPreselectionDefaults().join(',');}else{j=this.facetFilter.getPreselectionDefaults()[0];this.byId("idVHDefaultValueMode").isMandatory=true;}this.byId("idVHDefaultValues").setValue(j);}}if(this.facetFilter.getServiceOfFilterResolution()!==undefined&&this.facetFilter.getServiceOfFilterResolution()!==""&&this.facetFilter.getServiceOfFilterResolution()!==null){s=this.facetFilter.getServiceOfFilterResolution();this.byId("idFRSource").setValue(s);A=[];c=[];A=this.oConfigurationEditor.getAllEntitySetsOfService(s);A.forEach(function(t){var u={};u.entityKey=t;u.entityName=t;c.push(u);});var k={Entities:c};var l=new sap.ui.model.json.JSONModel();l.setSizeLimit(500);l.setData(k);this.byId("idFREntity").setModel(l);this.byId("idVhEntityLabel1").setText("*"+this.getText("vhEntity")+": ");this.byId("idVhSelectPropertiesLabel1").setText("*"+this.getText("vhSelectProperties")+": ");}if(this.facetFilter.getEntitySetOfFilterResolution()!==undefined&&this.facetFilter.getEntitySetOfFilterResolution()!==null&&this.facetFilter.getEntitySetOfFilterResolution()!==""){E=this.facetFilter.getEntitySetOfFilterResolution();S=this.facetFilter.getServiceOfFilterResolution();this.byId("idFREntity").setSelectedKey(this.facetFilter.getEntitySetOfFilterResolution());P=[];p=[];P=this.oConfigurationEditor.getAllPropertiesOfEntitySet(S,E);g=P[0];P.forEach(function(t){var u={};u.propertyKey=t;u.propertyName=t;p.push(u);});var n={Properties:p};var q=new sap.ui.model.json.JSONModel();q.setSizeLimit(500);q.setData(n);this.byId("idFRSelectProperties").setModel(q);}if(this.facetFilter.getSelectPropertiesOfFilterResolution()!==undefined&&this.facetFilter.getSelectPropertiesOfFilterResolution().length>0){this.byId("idFRSelectProperties").setSelectedKeys(this.facetFilter.getSelectPropertiesOfFilterResolution());}}else{var F=this.oConfigurationEditor.createFacetFilter();this.facetFilter=this.oConfigurationEditor.getFacetFilter(F);this.facetFilter.setMultiSelection(true);this.byId("multi").setSelected(true);var r={id:F};this.oViewData.updateSelectedNode(r);}},handleChangeForProperty:function(e){this.oConfigurationEditor.setIsUnsaved();var p=this.byId("idffProperty").getValue().trim();if(p!==""&&p!==null){this.facetFilter.setProperty(p);}},handleChangeForLabel:function(e){this.oConfigurationEditor.setIsUnsaved();var s=this;var t=sap.apf.modeler.ui.utils.TranslationFormatMap.FACETFILTER_LABEL;var f=this.byId("idLabel").getValue().trim();var F=s.oTextPool.setText(f,t);if(f!==""&&f!==null){this.facetFilter.setLabelKey(F);}var a={};a.name=f;a.id=this.facetFilter.getId();if(f!==""&&f!==null){this.oViewData.updateSelectedNode(a,this.bIsNew);}var T=this.getText("facetFilter")+": "+f;this.oViewData.updateTitleAndBreadCrumb(T);},handleChangeForAlias:function(){this.oConfigurationEditor.setIsUnsaved();var a=this.byId("idAlias").getValue().trim();this.facetFilter.setAlias(a);},_changeInSelectionMode:function(){if(!this.facetFilter.isMultiSelection()){var p=this.facetFilter.getPreselectionDefaults();if(p&&p.length>0){this.facetFilter.setPreselectionDefaults([p[0]]);if(this.byId("idVHDefaultValues")){this.byId("idVHDefaultValues").setValue(p[0]);}}}},handleChangeForSelectionModeSingle:function(){this.byId("idVhDefaultValuesLabel").setText("*"+this.getText("vhDefaultValues")+": ");this.byId("idVhFunctionLabel").setText("*"+this.getText("function")+": ");this.oConfigurationEditor.setIsUnsaved();this.facetFilter.setMultiSelection(false);if(jQuery(this.byId("idVHfunction").getDomRef()).length>=1){this.byId("idVHfunction").isMandatory=true;this.byId("idVHDefaultValues").isMandatory=false;}else{this.byId("idVHfunction").isMandatory=false;this.byId("idVHDefaultValues").isMandatory=true;}this._changeInSelectionMode();},handleChangeForSelectionModeMulti:function(){this.byId("idVhDefaultValuesLabel").setText(this.getText("vhDefaultValues")+": ");this.byId("idVhFunctionLabel").setText(this.getText("function")+": ");this.oConfigurationEditor.setIsUnsaved();this.facetFilter.setMultiSelection(true);if(jQuery(this.byId("idVHfunction").getDomRef()).length>=1){this.byId("idVHfunction").isMandatory=false;}else{this.byId("idVHDefaultValues").isMandatory=false;}},_checkValidationStateForService:function(v,p){var s=this;var S,o,V={source:undefined,entitySet:undefined,selectProperty:undefined};if(v){S=this.byId("idVHSource").getValue().trim();}else{S=this.byId("idFRSource").getValue().trim();}var b=this.oConfigurationEditor.registerService(S);var a=[];var A=[];if(b){V.source=S;a=this.oConfigurationEditor.getAllEntitySetsOfService(S);var c;if(p==="entitySet"||p==="selectProperties"){if(v){c=this.byId("idVHEntity").getSelectedKey();}else{c=this.byId("idFREntity").getSelectedKey();}}else{if(v){c=this.facetFilter.getEntitySetOfValueHelp();}else{c=this.facetFilter.getEntitySetOfFilterResolution();}}if(c){a.forEach(function(e){if(c===e){V.entitySet=c;if(p==="source"){if(v){s.byId("idVHEntity").setSelectedKey(c);}else{s.byId("idFREntity").setSelectedKey(c);}}}});var d,C=[];if(p==="selectProperties"){if(v){d=this.byId("idVHSelectProperties").getSelectedKeys();}else{d=this.byId("idFRSelectProperties").getSelectedKeys();}}else{if(v){d=this.facetFilter.getSelectPropertiesOfValueHelp();}else{d=this.facetFilter.getSelectPropertiesOfFilterResolution();}}var P=this.oConfigurationEditor.getAllPropertiesOfEntitySet(S,c);P.forEach(function(e){d.forEach(function(f){if(f===e){C.push(f);}});});if(C.length>0){V.selectProperty=C;if(p!=="selectProperties"){if(v){this.byId("idVHSelectProperties").setSelectedKeys(C);}else{this.byId("idFRSelectProperties").setSelectedKeys(C);}}}}}if(V.selectProperty&&V.entitySet&&V.source){if(v){this.facetFilter.setServiceOfValueHelp(V.source);this.facetFilter.setEntitySetOfValueHelp(V.entitySet);o=this.facetFilter.getSelectPropertiesOfValueHelp();o.forEach(function(e){s.facetFilter.removeSelectPropertyOfValueHelp(e);});V.selectProperty.forEach(function(e){s.facetFilter.addSelectPropertyOfValueHelp(e);});}else{this.facetFilter.setServiceOfFilterResolution(V.source);this.facetFilter.setEntitySetOfFilterResolution(V.entitySet);o=this.facetFilter.getSelectPropertiesOfFilterResolution();o.forEach(function(e){s.facetFilter.removeSelectPropertyOfFilterResolution(e);});V.selectProperty.forEach(function(e){s.facetFilter.addSelectPropertyOfFilterResolution(e);});}}},handleChangeForVHSource:function(){var s=this;this.oConfigurationEditor.setIsUnsaved();var S=this.byId("idVHSource").getValue().trim();var b;if(S){b=this.oConfigurationEditor.registerService(S);if(b){this.byId("idVhEntityLabel").setText("*"+this.getText("vhEntity")+": ");this.byId("idVhSelectPropertiesLabel").setText("*"+this.getText("vhSelectProperties")+": ");}}else{this.facetFilter.setServiceOfValueHelp(S);this.facetFilter.setEntitySetOfValueHelp(undefined);var o=this.facetFilter.getSelectPropertiesOfValueHelp();o.forEach(function(e){s.facetFilter.removeSelectPropertyOfValueHelp(e);});this.byId("idVhEntityLabel").setText(this.getText("vhEntity")+": ");this.byId("idVhSelectPropertiesLabel").setText(this.getText("vhSelectProperties")+": ");}var d,a=[],A=[];a=this.oConfigurationEditor.getAllEntitySetsOfService(S);a.forEach(function(e){var E={};E.entityKey=e;E.entityName=e;A.push(E);});var D={Entities:A};var m=new sap.ui.model.json.JSONModel();m.setSizeLimit(500);m.setData(D);this.byId("idVHEntity").setModel(m);var p=[],P=[];if(a.length>=1){this.byId("idVHEntity").setSelectedKey(a[0]);this.facetFilter.setEntitySetOfValueHelp(a[0]);p=this.oConfigurationEditor.getAllPropertiesOfEntitySet(S,a[0]);p.forEach(function(e){var f={};f.propertyKey=e;f.propertyName=e;P.push(f);});}var c={Properties:P};var M=new sap.ui.model.json.JSONModel();M.setSizeLimit(500);M.setData(c);this.byId("idVHSelectProperties").setModel(M);this._checkValidationStateForService(true,"source");},handleChangeForVHEntity:function(){var s=this;this.oConfigurationEditor.setIsUnsaved();var e=this.byId("idVHEntity").getSelectedKey();var S=this.byId("idVHSource").getValue().trim();var p=[],P=[];if(S&&S!==null&&S!==""){p=this.oConfigurationEditor.getAllPropertiesOfEntitySet(S,e);p.forEach(function(a){var o={};o.propertyKey=a;o.propertyName=a;P.push(o);});var d={Properties:P};var m=new sap.ui.model.json.JSONModel();m.setSizeLimit(500);m.setData(d);this.byId("idVHSelectProperties").setModel(m);this._checkValidationStateForService(true,"entitySet");}},handleChangeForVHSelectProperties:function(){this.oConfigurationEditor.setIsUnsaved();this._checkValidationStateForService(true,"selectProperties");},_setMandatoryFieldsVHD:function(){if(!this.facetFilter.isMultiSelection()){if(jQuery(this.byId("idVHfunction").getDomRef()).length>=1){this.byId("idVHfunction").isMandatory=true;this.byId("idVHDefaultValues").isMandatory=false;}else{this.byId("idVHfunction").isMandatory=false;this.byId("idVHDefaultValues").isMandatory=true;}}else{this.byId("idVHfunction").isMandatory=false;this.byId("idVHDefaultValues").isMandatory=false;}},handleChangeForDVMode:function(){var d=this.byId("idVHDefaultValueMode").getSelectedKey();if(d===this.getText("fixedValues")){this.byId("idVhDefaultValuesLabelLayout").setVisible(true);this.byId("idVhFunctionLabelLayout").setVisible(false);this.facetFilter.removePreselectionFunction();this.byId("idVHfunction").setValue("");}else{this.byId("idVhDefaultValuesLabelLayout").setVisible(false);this.byId("idVhFunctionLabelLayout").setVisible(true);this.facetFilter.removePreselectionDefaults();this.byId("idVHDefaultValues").setValue("");}this._setMandatoryFieldsVHD();},handleChangeForVHdefaultValues:function(e){this.oConfigurationEditor.setIsUnsaved();var p=this.byId("idVHDefaultValues").getValue().trim();var P=p.split(',');var v=[];P.forEach(function(d){var V=d.trim();if(V){v.push(V);}});if(this.facetFilter.isMultiSelection()){this.byId("idVHDefaultValues").isMandatory=false;this.facetFilter.setPreselectionDefaults(v);}else{this.byId("idVHDefaultValues").isMandatory=true;if(v.length>0){this.facetFilter.setPreselectionDefaults([v[0]]);}}},handleChangeForPreselectionFunction:function(e){this.oConfigurationEditor.setIsUnsaved();var p=this.byId("idVHfunction").getValue().trim();if(this.facetFilter.isMultiSelection()){this.byId("idVHfunction").isMandatory=false;if(p){this.facetFilter.setPreselectionFunction(p);}}else{this.byId("idVHfunction").isMandatory=true;if(p){this.facetFilter.setPreselectionFunction(p);}}},handleChangeForFRSource:function(){var s=this;this.oConfigurationEditor.setIsUnsaved();var S=this.byId("idFRSource").getValue().trim();var b;var a=[];var A=[];if(S){b=this.oConfigurationEditor.registerService(S);if(b){this.byId("idVhEntityLabel1").setText("*"+this.getText("vhEntity")+": ");this.byId("idVhSelectPropertiesLabel1").setText("*"+this.getText("vhSelectProperties")+": ");}}else{this.facetFilter.setServiceOfFilterResolution(S);this.facetFilter.setEntitySetOfFilterResolution(undefined);var o=this.facetFilter.getSelectPropertiesOfFilterResolution();o.forEach(function(c){s.facetFilter.removeSelectPropertyOfFilterResolution(c);});this.byId("idVhEntityLabel1").setText(this.getText("vhEntity")+": ");this.byId("idVhSelectPropertiesLabel1").setText(this.getText("vhSelectProperties")+": ");}a=this.oConfigurationEditor.getAllEntitySetsOfService(S);a.forEach(function(e){var E={};E.entityKey=e;E.entityName=e;A.push(E);});var d={Entities:A};var m=new sap.ui.model.json.JSONModel();m.setSizeLimit(500);m.setData(d);this.byId("idFREntity").setModel(m);var p=[],P=[];if(a.length>=1){this.byId("idFREntity").setSelectedKey(a[0]);this.facetFilter.setEntitySetOfFilterResolution(a[0]);p=this.oConfigurationEditor.getAllPropertiesOfEntitySet(S,a[0]);p.forEach(function(c){var e={};e.propertyKey=c;e.propertyName=c;P.push(e);});}var D={Properties:P};var M=new sap.ui.model.json.JSONModel();M.setSizeLimit(500);M.setData(D);this.byId("idFRSelectProperties").setModel(M);this._checkValidationStateForService(false,"source");},handleChangeForFREntity:function(){var s=this;this.oConfigurationEditor.setIsUnsaved();var e=this.byId("idFREntity").getSelectedKey();var S=this.byId("idFRSource").getValue().trim();var p=[],P=[];if(S&&S!==null&&S!==""){p=this.oConfigurationEditor.getAllPropertiesOfEntitySet(S,e);var d=p[0];p.forEach(function(a){var o={};o.propertyKey=a;o.propertyName=a;P.push(o);});var D={Properties:P};var m=new sap.ui.model.json.JSONModel();m.setSizeLimit(500);m.setData(D);this.byId("idFRSelectProperties").setModel(m);this._checkValidationStateForService(false,"entitySet");}},handleChangeForFRSelectProperties:function(){this.oConfigurationEditor.setIsUnsaved();this._checkValidationStateForService(false,"selectProperties");},_setSourceValidationState:function(){var s=this.byId("idVHSource").getValue().trim();var f=this.byId("idFRSource").getValue().trim();var S;var F;if(s!==""){S=this.oConfigurationEditor.registerService(s);if(S){this.byId("idVHEntity").isMandatory=true;this.byId("idVHSelectProperties").isMandatory=true;}else{this.byId("idVHEntity").isMandatory=false;this.byId("idVHSelectProperties").isMandatory=false;}}else{this.byId("idVHEntity").isMandatory=false;this.byId("idVHSelectProperties").isMandatory=false;}if(f){F=this.oConfigurationEditor.registerService(s);if(F){this.byId("idFREntity").isMandatory=true;this.byId("idFRSelectProperties").isMandatory=true;}else{this.byId("idFREntity").isMandatory=false;this.byId("idFRSelectProperties").isMandatory=false;}}else{this.byId("idFREntity").isMandatory=false;this.byId("idFRSelectProperties").isMandatory=false;}},_setMandatoryFields:function(f){this.mandatoryFields=this.mandatoryFields||[];for(var i=0;i<f.length;i++){f[i].isMandatory=true;this.mandatoryFields.push(f[i]);}},_getMandatoryFields:function(){return this.mandatoryFields;},_setValidationState:function(){var m=this._getMandatoryFields();for(var i=0;i<m.length;i++){if(m[i].isMandatory===true){if(typeof m[i].getSelectedKeys==="function"){this.isValidState=(m[i].getSelectedKeys().length>=1)?true:false;}else if(typeof m[i].getValue==="function"){this.isValidState=(m[i].getValue()!=="")?true:false;}else{this.isValidState=(m[i].getSelectedKey().length>=1)?true:false;}if(this.isValidState===false){break;}}}},getValidationState:function(){this._setSourceValidationState();this._setValidationState();var i=(this.isValidState!==undefined)?this.isValidState:true;return i;}});
