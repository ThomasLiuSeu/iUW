/*!
 * SAP APF Analysis Path Framework
 * 
 * (c) Copyright 2012-2014 SAP AG. All rights reserved
 */
(function(){'use strict';jQuery.sap.declare('sap.apf.api');jQuery.sap.require('sap.apf.core.messageHandler');jQuery.sap.require('sap.apf.core.instance');jQuery.sap.require('sap.apf.utils.filter');jQuery.sap.require('sap.apf.utils.pathContextHandler');jQuery.sap.require('sap.apf.utils.serializationMediator');jQuery.sap.require('sap.apf.utils.smartBusinessHandler');jQuery.sap.require('sap.apf.utils.startParameter');jQuery.sap.require('sap.apf.utils.navigationHandler');jQuery.sap.require('sap.apf.ui.instance');jQuery.sap.require('sap.apf.ui.representations.representationInterface');jQuery.sap.require("sap.apf.ui.representations.lineChart");jQuery.sap.require("sap.apf.ui.representations.columnChart");jQuery.sap.require("sap.apf.ui.representations.scatterPlotChart");jQuery.sap.require("sap.apf.ui.representations.table");jQuery.sap.require("sap.apf.ui.representations.stackedColumnChart");jQuery.sap.require("sap.apf.ui.representations.pieChart");jQuery.sap.require("sap.apf.ui.representations.percentageStackedColumnChart");jQuery.sap.require('sap.apf.ui.representations.bubbleChart');sap.apf.Api=function(c,i){var p=null;var m;var C;var s;var n;this.type='api';this.constants={};this.constants.eventTypes=sap.apf.core.constants.eventTypes;s=new sap.apf.utils.StartParameter(c);m=new sap.apf.core.MessageHandler();C=new sap.apf.core.Instance({startParameter:s,messageHandler:m});this.activateOnErrorHandling=function(h){return C.activateOnErrorHandling(h);};this.getStartParameterFacade=function(){return C.getStartParameterFacade();};this.setCallbackForMessageHandling=function(f){return C.setCallbackForMessageHandling(f);};this.setApplicationCallbackForMessageHandling=function(f){return C.setApplicationCallbackForMessageHandling(f);};this.getLogMessages=function(){return C.getLogMessages();};this.createStep=function(a,f,r){return C.createStep(a,f,r);};this.getActiveStep=function(){return C.getActiveStep();};this.getCategories=function(){return C.getCategories();};this.getContext=function(){return jQuery.extend({},C.getContext());};this.getSteps=function(){return C.getSteps();};this.getStepTemplates=function(){return C.getStepTemplates();};this.getFacetFilterConfigurations=function(){return C.getFacetFilterConfigurations();};this.getApplicationConfigProperties=function(){return C.getApplicationConfigProperties();};this.moveStepToPosition=function(o,a,f){return C.moveStepToPosition(o,a,f);};this.removeStep=function(o,f){return C.removeStep(o,f);};this.resetPath=function(){return C.resetPath();};this.setActiveStep=function(o){return C.setActiveStep(o);};this.stepIsActive=function(o){return C.stepIsActive(o);};this.updatePath=function(f){return C.updatePath(f);};this.getApfLocation=function(){return C.getUriGenerator().getApfLocation();};this.readPaths=function(f){return C.readPaths(f);};this.savePath=function(a,N,f){C.savePath(a,N,f);};this.openPath=function(a,f,b){return C.openPath(a,f,b);};this.deletePath=function(a,f){return C.deletePath(a,f);};this.setContext=function(f){P.update('ApfInitialContext',f);};this.addFacetFilter=function(f){u.getLayoutView().getController().addFacetFilter(f);};this.getEventCallback=function(e){return u.getEventCallback(e);};this.putMessage=function(M){return C.putMessage(M);};this.createMessageObject=function(o){return C.createMessageObject(o);};this.getTextHtmlEncoded=function(l,a){return C.getTextHtmlEncoded(l,a);};this.getTextNotHtmlEncoded=function(l,a){return C.getTextNotHtmlEncoded(l,a);};this.loadApplicationConfig=function(f){C.loadApplicationConfig(f);};this.createFilter=function(){return C.createFilter();};this.addPathFilter=function(f){return P.add(f);};this.updatePathFilter=function(a,f){P.update(a,f);};this.getPathFilter=function(a){return P.get(a);};this.createReadRequest=function(r){return C.createReadRequest(r);};this.createReadRequestByRequiredFilter=function(r){return C.createReadRequestByRequiredFilter(r);};var P=new sap.apf.utils.PathContextHandler({setContext:C.setContext},C.getMessageHandler());n=new sap.apf.utils.NavigationHandler({instances:{messageHandler:m,component:c},functions:{getCumulativeFilterUpToActiveStep:C.getCumulativeFilterUpToActiveStep,getNavigationTargets:C.getNavigationTargets,serializePath:C.serializePath,serializeContext:P.serialize,deserializePath:C.deserializePath,deserializeContext:P.deserialize}});var S=new sap.apf.utils.SerializationMediator({coreApi:C,pathContextHandler:P});var d={oCoreApi:C,oPathContextHandler:P,oSerializationMediator:S,oNavigationHandler:n,oComponent:c,oStartParameter:s};var u=new sap.apf.ui.Instance(d);C.createRepresentation=function(r,o){var a=new sap.apf.ui.representations.RepresentationInterfaceProxy(C,u);var R=sap.apf.utils.extractFunctionFromModulePathString(r);return new R(a,o);};this.selectionChanged=function(r){u.selectionChanged(r);};this.createApplicationLayout=function(){return u.createApplicationLayout();};this.startApf=function(){var t=this;if(this.fnBeforeApfStartupCallback&&typeof this.fnBeforeApfStartupCallback==="function"){this.fnBeforeApfStartupCallback.apply(c,[this]);}var a=this.createApplicationLayout();var b=n.checkMode();var e=u.handleStartup(b);e.done(function(){if(t.fnAfterApfStartupCallback&&typeof t.fnAfterApfStartupCallback==="function"){t.fnAfterApfStartupCallback.apply(c,[t]);}});return a;};this.addMasterFooterContent=function(o){return u.addMasterFooterContentRight(o);};this.setEventCallback=function(e,f){switch(e){case sap.apf.core.constants.eventTypes.contextChanged:u.setEventCallback(e,f);return true;case sap.apf.core.constants.eventTypes.printTriggered:u.setEventCallback(e,f);return true;case sap.apf.core.constants.eventTypes.format:u.setEventCallback(e,f);return true;default:return false;}};this.setCallbackBeforeApfStartup=function(f){this.fnBeforeApfStartupCallback=f;};this.setCallbackAfterApfStartup=function(f){this.fnAfterApfStartupCallback=f;};if(i){if(i.probe){p=new i.probe({coreApi:C,component:c,uiApi:u,pathContextHandler:P,serializationMediator:S,navigationHandler:n});}}};}());
